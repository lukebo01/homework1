<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2409.11677] Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn</title><meta property="og:description" content="Hierarchical and complex Mathematical Expression Recognition (MER) is challenging due to multiple possible interpretations of a formula, complicating both parsing and evaluation. In this paper, we introduce the Hierarc…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2409.11677">

<!--Generated on Sat Oct  5 21:36:56 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" lang="en" content="">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line" lang="en">
<h1 class="ltx_title ltx_title_document">
Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network
<span id="id1.id1" class="ltx_note ltx_role_thanks"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">thanks: </span>*Corresponding author. Email: yujunhui3@360.cn</span></span></span>
</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Jiale Wang23,
Junhui Yu21,
Huanyong Liu2,
Chenanran Kong4
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id2.1.id1" class="ltx_text" style="font-size:90%;">2 360 AI Research Institute, China
3 Nanyang Technological University, Singapore
4 Chinese University of Hong Kong (Shenzhen), China
</span>
</span></span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id3.id1" class="ltx_p"><span id="id3.id1.1" class="ltx_text">Hierarchical and complex Mathematical Expression Recognition (MER) is challenging due to multiple possible interpretations of a formula, complicating both parsing and evaluation. In this paper, we introduce the Hierarchical Detail-Focused Recognition dataset (HDR), the first dataset specifically designed to address these issues. It consists of a large-scale training set, HDR-100M, offering an unprecedented scale and diversity with one hundred million training instances. And the test set, HDR-Test, includes multiple interpretations of complex hierarchical formulas for comprehensive model performance evaluation. Additionally, the parsing of complex formulas often suffers from errors in fine-grained details. To address this, we propose the Hierarchical Detail-Focused Recognition Network (HDNet), an innovative framework that incorporates a hierarchical sub-formula module, focusing on the precise handling of formula details, thereby significantly enhancing MER performance. Experimental results demonstrate that HDNet outperforms existing MER models across various datasets.</span></p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Index Terms: </h6>
<span id="id4.id1" class="ltx_text">
mathematical expression recognition, image-to-text conversion, HDNet, HDR dataset
</span>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">I </span><span id="S1.1.1" class="ltx_text ltx_font_smallcaps">Introduction</span>
</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">Mathematical Expression Recognition (MER) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite> refers to the technology that automatically recognizes and parses mathematical formulas or expressions from Latex images <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite>, handwritten notes, or text documents. This means that MER models need to have a deep understanding of mathematical expressions, including the order of operations, structural nesting, and operation precedence, especially for complex formulas. However, the current models are still not performing well in this area. This is not only limited by the lack of datasets with highly complex structures <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>, <a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>, but also by the numerous subtle details in complex formulas that models often overlook. Early research in MER mainly relied on traditional machine learning methods, which typically involved handcrafted feature extraction and pattern recognition techniques <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>, <a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite>. With the development of deep learning, MER algorithms based on Convolutional Neural Networks (CNNs) and the Transformer architecture <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite> have been proposed. These methods have shown excellent performance in recognizing both simple mathematical expressions <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib8" title="" class="ltx_ref">8</a>, <a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite> and handwritten data <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref">10</a>, <a href="#bib.bib11" title="" class="ltx_ref">11</a>, <a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite>. However, they struggle with limited accuracy when processing complex and intricate mathematical expressions, especially in capturing the finer details of these formulas, shown in Figure <a href="#S1.F1" title="Figure 1 ‣ I Introduction ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<figure id="S1.F1" class="ltx_figure"><img src="/html/2409.11677/assets/moti.png" id="S1.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="479" height="87" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>The model fails to capture intricate details in complex formulas, misrecognizing <math id="S1.F1.3.m1.1" class="ltx_Math" alttext="-\frac{1}{2}z^{2}" display="inline"><semantics id="S1.F1.3.m1.1b"><mrow id="S1.F1.3.m1.1.1" xref="S1.F1.3.m1.1.1.cmml"><mo id="S1.F1.3.m1.1.1b" xref="S1.F1.3.m1.1.1.cmml">−</mo><mrow id="S1.F1.3.m1.1.1.2" xref="S1.F1.3.m1.1.1.2.cmml"><mfrac id="S1.F1.3.m1.1.1.2.2" xref="S1.F1.3.m1.1.1.2.2.cmml"><mn id="S1.F1.3.m1.1.1.2.2.2" xref="S1.F1.3.m1.1.1.2.2.2.cmml">1</mn><mn id="S1.F1.3.m1.1.1.2.2.3" xref="S1.F1.3.m1.1.1.2.2.3.cmml">2</mn></mfrac><mo lspace="0em" rspace="0em" id="S1.F1.3.m1.1.1.2.1" xref="S1.F1.3.m1.1.1.2.1.cmml">​</mo><msup id="S1.F1.3.m1.1.1.2.3" xref="S1.F1.3.m1.1.1.2.3.cmml"><mi id="S1.F1.3.m1.1.1.2.3.2" xref="S1.F1.3.m1.1.1.2.3.2.cmml">z</mi><mn id="S1.F1.3.m1.1.1.2.3.3" xref="S1.F1.3.m1.1.1.2.3.3.cmml">2</mn></msup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.F1.3.m1.1c"><apply id="S1.F1.3.m1.1.1.cmml" xref="S1.F1.3.m1.1.1"><minus id="S1.F1.3.m1.1.1.1.cmml" xref="S1.F1.3.m1.1.1"></minus><apply id="S1.F1.3.m1.1.1.2.cmml" xref="S1.F1.3.m1.1.1.2"><times id="S1.F1.3.m1.1.1.2.1.cmml" xref="S1.F1.3.m1.1.1.2.1"></times><apply id="S1.F1.3.m1.1.1.2.2.cmml" xref="S1.F1.3.m1.1.1.2.2"><divide id="S1.F1.3.m1.1.1.2.2.1.cmml" xref="S1.F1.3.m1.1.1.2.2"></divide><cn type="integer" id="S1.F1.3.m1.1.1.2.2.2.cmml" xref="S1.F1.3.m1.1.1.2.2.2">1</cn><cn type="integer" id="S1.F1.3.m1.1.1.2.2.3.cmml" xref="S1.F1.3.m1.1.1.2.2.3">2</cn></apply><apply id="S1.F1.3.m1.1.1.2.3.cmml" xref="S1.F1.3.m1.1.1.2.3"><csymbol cd="ambiguous" id="S1.F1.3.m1.1.1.2.3.1.cmml" xref="S1.F1.3.m1.1.1.2.3">superscript</csymbol><ci id="S1.F1.3.m1.1.1.2.3.2.cmml" xref="S1.F1.3.m1.1.1.2.3.2">𝑧</ci><cn type="integer" id="S1.F1.3.m1.1.1.2.3.3.cmml" xref="S1.F1.3.m1.1.1.2.3.3">2</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.3.m1.1d">-\frac{1}{2}z^{2}</annotation></semantics></math> as <math id="S1.F1.4.m2.1" class="ltx_Math" alttext="\frac{1}{2}z^{2}" display="inline"><semantics id="S1.F1.4.m2.1b"><mrow id="S1.F1.4.m2.1.1" xref="S1.F1.4.m2.1.1.cmml"><mfrac id="S1.F1.4.m2.1.1.2" xref="S1.F1.4.m2.1.1.2.cmml"><mn id="S1.F1.4.m2.1.1.2.2" xref="S1.F1.4.m2.1.1.2.2.cmml">1</mn><mn id="S1.F1.4.m2.1.1.2.3" xref="S1.F1.4.m2.1.1.2.3.cmml">2</mn></mfrac><mo lspace="0em" rspace="0em" id="S1.F1.4.m2.1.1.1" xref="S1.F1.4.m2.1.1.1.cmml">​</mo><msup id="S1.F1.4.m2.1.1.3" xref="S1.F1.4.m2.1.1.3.cmml"><mi id="S1.F1.4.m2.1.1.3.2" xref="S1.F1.4.m2.1.1.3.2.cmml">z</mi><mn id="S1.F1.4.m2.1.1.3.3" xref="S1.F1.4.m2.1.1.3.3.cmml">2</mn></msup></mrow><annotation-xml encoding="MathML-Content" id="S1.F1.4.m2.1c"><apply id="S1.F1.4.m2.1.1.cmml" xref="S1.F1.4.m2.1.1"><times id="S1.F1.4.m2.1.1.1.cmml" xref="S1.F1.4.m2.1.1.1"></times><apply id="S1.F1.4.m2.1.1.2.cmml" xref="S1.F1.4.m2.1.1.2"><divide id="S1.F1.4.m2.1.1.2.1.cmml" xref="S1.F1.4.m2.1.1.2"></divide><cn type="integer" id="S1.F1.4.m2.1.1.2.2.cmml" xref="S1.F1.4.m2.1.1.2.2">1</cn><cn type="integer" id="S1.F1.4.m2.1.1.2.3.cmml" xref="S1.F1.4.m2.1.1.2.3">2</cn></apply><apply id="S1.F1.4.m2.1.1.3.cmml" xref="S1.F1.4.m2.1.1.3"><csymbol cd="ambiguous" id="S1.F1.4.m2.1.1.3.1.cmml" xref="S1.F1.4.m2.1.1.3">superscript</csymbol><ci id="S1.F1.4.m2.1.1.3.2.cmml" xref="S1.F1.4.m2.1.1.3.2">𝑧</ci><cn type="integer" id="S1.F1.4.m2.1.1.3.3.cmml" xref="S1.F1.4.m2.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.4.m2.1d">\frac{1}{2}z^{2}</annotation></semantics></math>.</figcaption>
</figure>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">To address these challenges, we introduce the HDR dataset, a large-scale resource for MER with more than one hundred million formulas, including the HDR-100M training set and the HDR-Test set, which covers a wide range of expression complexities. We also propose HDNet, an encoder-decoder-based MER framework with a hierarchical sub-formula module that improves accuracy in parsing complex formulas. The main contributions of this paper are:</p>
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.p1.1" class="ltx_p"><span id="S1.I1.i1.p1.1.1" class="ltx_text ltx_font_bold">HDR dataset:</span> A large-scale, multi-label MER dataset, providing a robust foundation for model development and evaluation across diverse expressions.</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p id="S1.I1.i2.p1.1" class="ltx_p"><span id="S1.I1.i2.p1.1.1" class="ltx_text ltx_font_bold">HDNet:</span> A novel MER framework that combines an encoder-decoder structure with a hierarchical sub-formula module for subgraph detail enhancement, significantly improving formula parsing accuracy.</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p id="S1.I1.i3.p1.1" class="ltx_p"><span id="S1.I1.i3.p1.1.1" class="ltx_text ltx_font_bold">Fair evaluation:</span> An improved evaluation method designed to account for multiple valid interpretations of a formula, ensuring more equitable comparisons.</p>
</div>
</li>
</ul>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">II </span><span id="S2.1.1" class="ltx_text ltx_font_smallcaps">Related Work</span>
</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">A popular approach to MER leverages CNNs. The ConvMath model <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite> combines an image encoder for feature extraction with a convolutional decoder for sequence generation, converting images of mathematical expressions into LaTeX format. The WAP <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite> model integrates CNNs and RNNs with attention to recognize handwritten expressions directly from 2D image layouts. Scale instability in mathematical expressions has been addressed by improving model performance across different scales through scale augmentation <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>.</p>
</div>
<div id="S2.p2" class="ltx_para">
<p id="S2.p2.1" class="ltx_p">Another MER algorithm is based on the Transformer architecture <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite>. An Attention-Based Mutual Learning Network (ABM) has been introduced to generate LaTeX sequences from images using an attention mechanism <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite>. UniMERNet <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite> is designed for the universality of mathematical expressions, enabling it to handle symbols and structures across languages, making it suitable for multilingual environments. Vary <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite> enhances document-level OCR efficiency by using a vocabulary network and a small decoder-only transformer for autoregressive visual vocabulary generation.</p>
</div>
<div id="S2.p3" class="ltx_para">
<p id="S2.p3.1" class="ltx_p">However, these models often struggle with complex structures, overlapping symbols, or poor image quality, leading to parsing errors.</p>
</div>
<figure id="S2.F2" class="ltx_figure"><img src="/html/2409.11677/assets/icassp_main_final_v1.png" id="S2.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="236" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>In the training process (left), the formulas are parsed hierarchically based on their labels. Each formula is split, rendered, and resized into sub-formulas. The main formula is also rendered and resized. Both the main formula and sub-formulas are fed into the encoder to extract features. The sub-formula features are then fused with the main formula’s feature through weighted aggregation to provide additional visual details. The weighted features are passed to the decoder to predict the result for the main formula. Additionally, each sub-formula feature is separately passed to the decoder to predict sub-formula results. The model’s optimization objective includes the loss of the main formula, <math id="S2.F2.3.m1.1" class="ltx_Math" alttext="L_{\text{main}}" display="inline"><semantics id="S2.F2.3.m1.1b"><msub id="S2.F2.3.m1.1.1" xref="S2.F2.3.m1.1.1.cmml"><mi id="S2.F2.3.m1.1.1.2" xref="S2.F2.3.m1.1.1.2.cmml">L</mi><mtext id="S2.F2.3.m1.1.1.3" xref="S2.F2.3.m1.1.1.3a.cmml">main</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.F2.3.m1.1c"><apply id="S2.F2.3.m1.1.1.cmml" xref="S2.F2.3.m1.1.1"><csymbol cd="ambiguous" id="S2.F2.3.m1.1.1.1.cmml" xref="S2.F2.3.m1.1.1">subscript</csymbol><ci id="S2.F2.3.m1.1.1.2.cmml" xref="S2.F2.3.m1.1.1.2">𝐿</ci><ci id="S2.F2.3.m1.1.1.3a.cmml" xref="S2.F2.3.m1.1.1.3"><mtext mathsize="70%" id="S2.F2.3.m1.1.1.3.cmml" xref="S2.F2.3.m1.1.1.3">main</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.3.m1.1d">L_{\text{main}}</annotation></semantics></math>, and the sum of the losses of the sub-formulas, <math id="S2.F2.4.m2.1" class="ltx_Math" alttext="\sum_{i}^{n}L_{i}" display="inline"><semantics id="S2.F2.4.m2.1b"><mrow id="S2.F2.4.m2.1.1" xref="S2.F2.4.m2.1.1.cmml"><msubsup id="S2.F2.4.m2.1.1.1" xref="S2.F2.4.m2.1.1.1.cmml"><mo id="S2.F2.4.m2.1.1.1.2.2" xref="S2.F2.4.m2.1.1.1.2.2.cmml">∑</mo><mi id="S2.F2.4.m2.1.1.1.2.3" xref="S2.F2.4.m2.1.1.1.2.3.cmml">i</mi><mi id="S2.F2.4.m2.1.1.1.3" xref="S2.F2.4.m2.1.1.1.3.cmml">n</mi></msubsup><msub id="S2.F2.4.m2.1.1.2" xref="S2.F2.4.m2.1.1.2.cmml"><mi id="S2.F2.4.m2.1.1.2.2" xref="S2.F2.4.m2.1.1.2.2.cmml">L</mi><mi id="S2.F2.4.m2.1.1.2.3" xref="S2.F2.4.m2.1.1.2.3.cmml">i</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S2.F2.4.m2.1c"><apply id="S2.F2.4.m2.1.1.cmml" xref="S2.F2.4.m2.1.1"><apply id="S2.F2.4.m2.1.1.1.cmml" xref="S2.F2.4.m2.1.1.1"><csymbol cd="ambiguous" id="S2.F2.4.m2.1.1.1.1.cmml" xref="S2.F2.4.m2.1.1.1">superscript</csymbol><apply id="S2.F2.4.m2.1.1.1.2.cmml" xref="S2.F2.4.m2.1.1.1"><csymbol cd="ambiguous" id="S2.F2.4.m2.1.1.1.2.1.cmml" xref="S2.F2.4.m2.1.1.1">subscript</csymbol><sum id="S2.F2.4.m2.1.1.1.2.2.cmml" xref="S2.F2.4.m2.1.1.1.2.2"></sum><ci id="S2.F2.4.m2.1.1.1.2.3.cmml" xref="S2.F2.4.m2.1.1.1.2.3">𝑖</ci></apply><ci id="S2.F2.4.m2.1.1.1.3.cmml" xref="S2.F2.4.m2.1.1.1.3">𝑛</ci></apply><apply id="S2.F2.4.m2.1.1.2.cmml" xref="S2.F2.4.m2.1.1.2"><csymbol cd="ambiguous" id="S2.F2.4.m2.1.1.2.1.cmml" xref="S2.F2.4.m2.1.1.2">subscript</csymbol><ci id="S2.F2.4.m2.1.1.2.2.cmml" xref="S2.F2.4.m2.1.1.2.2">𝐿</ci><ci id="S2.F2.4.m2.1.1.2.3.cmml" xref="S2.F2.4.m2.1.1.2.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.4.m2.1d">\sum_{i}^{n}L_{i}</annotation></semantics></math>.The predicted results are evaluated (right). We provide a fair evaluation method where even if two formulas differ at the character level, they are considered correctly parsed if they are functionally equivalent.
</figcaption>
</figure>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">III </span><span id="S3.1.1" class="ltx_text ltx_font_smallcaps">HDR Dataset</span>
</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.1" class="ltx_p">We introduce the HDR dataset—a comprehensive collection designed to tackle the challenges of recognizing complex mathematical formulas across multiple disciplines. This dataset focuses on the hierarchical levels of formulas to explain their complexity, which will be explained in detail in Section  <a href="#S3.SS1" title="III-A Hierarchical levels ‣ III HDR Dataset ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag"><span class="ltx_text">III-A</span></span></a>.</p>
</div>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S3.SS1.5.1.1" class="ltx_text">III-A</span> </span><span id="S3.SS1.6.2" class="ltx_text ltx_font_italic">Hierarchical levels</span>
</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.2" class="ltx_p">Hierarchical levels refer to the nested structures within mathematical formulas. At the simplest level (level 0), we have single characters, like <math id="S3.SS1.p1.1.m1.1" class="ltx_Math" alttext="a" display="inline"><semantics id="S3.SS1.p1.1.m1.1a"><mi id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">𝑎</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">a</annotation></semantics></math>. When characters are combined using superscripts, subscripts, or basic operations (e.g., <math id="S3.SS1.p1.2.m2.1" class="ltx_Math" alttext="a^{2}+b^{2}" display="inline"><semantics id="S3.SS1.p1.2.m2.1a"><mrow id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml"><msup id="S3.SS1.p1.2.m2.1.1.2" xref="S3.SS1.p1.2.m2.1.1.2.cmml"><mi id="S3.SS1.p1.2.m2.1.1.2.2" xref="S3.SS1.p1.2.m2.1.1.2.2.cmml">a</mi><mn id="S3.SS1.p1.2.m2.1.1.2.3" xref="S3.SS1.p1.2.m2.1.1.2.3.cmml">2</mn></msup><mo id="S3.SS1.p1.2.m2.1.1.1" xref="S3.SS1.p1.2.m2.1.1.1.cmml">+</mo><msup id="S3.SS1.p1.2.m2.1.1.3" xref="S3.SS1.p1.2.m2.1.1.3.cmml"><mi id="S3.SS1.p1.2.m2.1.1.3.2" xref="S3.SS1.p1.2.m2.1.1.3.2.cmml">b</mi><mn id="S3.SS1.p1.2.m2.1.1.3.3" xref="S3.SS1.p1.2.m2.1.1.3.3.cmml">2</mn></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><apply id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1"><plus id="S3.SS1.p1.2.m2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1.1"></plus><apply id="S3.SS1.p1.2.m2.1.1.2.cmml" xref="S3.SS1.p1.2.m2.1.1.2"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.1.1.2.1.cmml" xref="S3.SS1.p1.2.m2.1.1.2">superscript</csymbol><ci id="S3.SS1.p1.2.m2.1.1.2.2.cmml" xref="S3.SS1.p1.2.m2.1.1.2.2">𝑎</ci><cn type="integer" id="S3.SS1.p1.2.m2.1.1.2.3.cmml" xref="S3.SS1.p1.2.m2.1.1.2.3">2</cn></apply><apply id="S3.SS1.p1.2.m2.1.1.3.cmml" xref="S3.SS1.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.1.1.3.1.cmml" xref="S3.SS1.p1.2.m2.1.1.3">superscript</csymbol><ci id="S3.SS1.p1.2.m2.1.1.3.2.cmml" xref="S3.SS1.p1.2.m2.1.1.3.2">𝑏</ci><cn type="integer" id="S3.SS1.p1.2.m2.1.1.3.3.cmml" xref="S3.SS1.p1.2.m2.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">a^{2}+b^{2}</annotation></semantics></math>), they form level 1 structures. More complex formulas, such as matrices or piecewise functions wrapped in <code id="S3.SS1.p1.2.1" class="ltx_verbatim ltx_font_typewriter">\begin{...}\end{...}</code>, represent level 2 structures. Further nesting or operations create higher levels.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.1" class="ltx_p">The challenge for models is accurately interpreting these nested relationships, ensuring that the opening and closing elements correspond correctly. For example, LaTeX matrices are wrapped within <code id="S3.SS1.p2.1.1" class="ltx_verbatim ltx_font_typewriter">\begin{matrix}...\end{matrix}</code>, and the model must consider the entire structure to maintain coherence. Understanding these hierarchical levels is key to parsing complex formulas. Therefore, we designed the HDR dataset to include a range of formulas with varying hierarchical complexity, challenging models to accurately handle these structures while considering context.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S3.SS2.5.1.1" class="ltx_text">III-B</span> </span><span id="S3.SS2.6.2" class="ltx_text ltx_font_italic">Data Collection and Statistic</span>
</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.1" class="ltx_p">The HDR dataset is constructed from formulas extracted from PDF articles scraped from arXiv, covering publications between 2007 and 2024. These fields include: mathematics (math), statistics (stat), physics (phy), Quantitative Finance (q-fin), quantitative biology (q-bio), economics (econ), electrical engineering and systems science (eess), and computer science (cs)<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span><a target="_blank" href="https://arxiv.org/category_taxonomy" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://arxiv.org/category_taxonomy</a></span></span></span>. This classification ensures broad domain coverage and diverse mathematical expression types, enhancing its relevance to various research areas.</p>
</div>
<div id="S3.SS2.p2" class="ltx_para">
<p id="S3.SS2.p2.1" class="ltx_p">In those articals, we focus on capturing complex formulas and employ various synthesis techniques to enhance the dataset. This includes generating both inline and display formulas to ensure a comprehensive representation of mathematical expressions. Complexity is typically measured by hierarchical levels, the number of lines and the number of characters. For example, matrices nested within fractions, or piecewise functions comprising multiple polynomials, they often are rendered across multiple lines. And the final HDR-100M contains 100,130,000 samples for train set and 43,932 for test. A key feature of HDR-Test is its one-to-many labeling, allowing multiple labels per formula to capture the diverse representations of expressions. Labels support hierarchical classification for flexible representation, shown in Table <a href="#S3.T1" title="Table I ‣ III-B Data Collection and Statistic ‣ III HDR Dataset ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag">I</span></a>.</p>
</div>
<figure id="S3.T1" class="ltx_table">
<figcaption class="ltx_caption" style="font-size:70%;"><span class="ltx_tag ltx_tag_table">Table I: </span>The statistics of multi-annotation HDR-Test set. The first row shows hierarchical levels of LaTeX formulas, including [1-2], [3-5] and [6-7]. The second row indicates the number of lines: A for [1-3], B for [4-8], C for [9-20], and D for [21-51].</figcaption>
<table id="S3.T1.3" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S3.T1.3.1.1" class="ltx_tr">
<th id="S3.T1.3.1.1.1" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.1.1.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.1.1.1.1.1" class="ltx_p" style="width:17.1pt;"><span id="S3.T1.3.1.1.1.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">Class</span></span>
</span>
</th>
<th id="S3.T1.3.1.1.2" class="ltx_td ltx_align_center ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_tt" style="padding-top:0.7pt;padding-bottom:0.7pt;" colspan="4"><span id="S3.T1.3.1.1.2.1" class="ltx_text ltx_font_bold" style="font-size:70%;">[1-2]</span></th>
<th id="S3.T1.3.1.1.3" class="ltx_td ltx_align_center ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_tt" style="padding-top:0.7pt;padding-bottom:0.7pt;" colspan="4"><span id="S3.T1.3.1.1.3.1" class="ltx_text ltx_font_bold" style="font-size:70%;">[3-5]</span></th>
<th id="S3.T1.3.1.1.4" class="ltx_td ltx_align_center ltx_align_top ltx_th ltx_th_column ltx_border_tt" style="padding-top:0.7pt;padding-bottom:0.7pt;" colspan="4"><span id="S3.T1.3.1.1.4.1" class="ltx_text ltx_font_bold" style="font-size:70%;">[6-7]</span></th>
</tr>
<tr id="S3.T1.3.2.2" class="ltx_tr">
<th id="S3.T1.3.2.2.1" class="ltx_td ltx_align_top ltx_th ltx_th_column" style="padding-top:0.7pt;padding-bottom:0.7pt;"></th>
<th id="S3.T1.3.2.2.2" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.2.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.2.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">A</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.3" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.3.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.3.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">B</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.4" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.4.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.4.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">C</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.5" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.5.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.5.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">D</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.6" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.6.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.6.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">A</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.7" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.7.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.7.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.7.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">B</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.8" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.8.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.8.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.8.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">C</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.9" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.9.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.9.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.9.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">D</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.10" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.10.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.10.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.10.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">A</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.11" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.11.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.11.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.11.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">B</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.12" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.12.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.12.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.12.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">C</span></span>
</span>
</th>
<th id="S3.T1.3.2.2.13" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.2.2.13.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.2.2.13.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.2.2.13.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">D</span></span>
</span>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S3.T1.3.3.1" class="ltx_tr">
<td id="S3.T1.3.3.1.1" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.1.1.1" class="ltx_p" style="width:17.1pt;"><span id="S3.T1.3.3.1.1.1.1.1" class="ltx_text" style="font-size:70%;">math</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.2" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.2.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.2.1.1.1" class="ltx_text" style="font-size:70%;">2929</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.3" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.3.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.3.1.1.1" class="ltx_text" style="font-size:70%;">583</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.4" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.4.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.4.1.1.1" class="ltx_text" style="font-size:70%;">339</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.5" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.5.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.5.1.1.1" class="ltx_text" style="font-size:70%;">29</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.6" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.6.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.6.1.1.1" class="ltx_text" style="font-size:70%;">3181</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.7" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.7.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.7.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.7.1.1.1" class="ltx_text" style="font-size:70%;">2411</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.8" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.8.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.8.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.8.1.1.1" class="ltx_text" style="font-size:70%;">994</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.9" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.9.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.9.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.9.1.1.1" class="ltx_text" style="font-size:70%;">106</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.10" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.10.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.10.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.10.1.1.1" class="ltx_text" style="font-size:70%;">10</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.11" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.11.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.11.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.11.1.1.1" class="ltx_text" style="font-size:70%;">75</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.12" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.12.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.12.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.12.1.1.1" class="ltx_text" style="font-size:70%;">133</span></span>
</span>
</td>
<td id="S3.T1.3.3.1.13" class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.3.1.13.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.3.1.13.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.3.1.13.1.1.1" class="ltx_text" style="font-size:70%;">18</span></span>
</span>
</td>
</tr>
<tr id="S3.T1.3.4.2" class="ltx_tr">
<td id="S3.T1.3.4.2.1" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.1.1.1" class="ltx_p" style="width:17.1pt;"><span id="S3.T1.3.4.2.1.1.1.1" class="ltx_text" style="font-size:70%;">stat</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.2" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.2.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.2.1.1.1" class="ltx_text" style="font-size:70%;">1730</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.3" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.3.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.3.1.1.1" class="ltx_text" style="font-size:70%;">60</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.4" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.4.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.4.1.1.1" class="ltx_text" style="font-size:70%;">20</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.5" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.5.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.5.1.1.1" class="ltx_text" style="font-size:70%;">3</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.6" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.6.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.6.1.1.1" class="ltx_text" style="font-size:70%;">1629</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.7" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.7.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.7.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.7.1.1.1" class="ltx_text" style="font-size:70%;">453</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.8" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.8.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.8.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.8.1.1.1" class="ltx_text" style="font-size:70%;">158</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.9" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.9.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.9.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.9.1.1.1" class="ltx_text" style="font-size:70%;">18</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.10" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.10.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.10.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.10.1.1.1" class="ltx_text" style="font-size:70%;">3</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.11" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.11.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.11.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.11.1.1.1" class="ltx_text" style="font-size:70%;">15</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.12" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.12.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.12.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.12.1.1.1" class="ltx_text" style="font-size:70%;">13</span></span>
</span>
</td>
<td id="S3.T1.3.4.2.13" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.4.2.13.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.4.2.13.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.4.2.13.1.1.1" class="ltx_text" style="font-size:70%;">19</span></span>
</span>
</td>
</tr>
<tr id="S3.T1.3.5.3" class="ltx_tr">
<td id="S3.T1.3.5.3.1" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.1.1.1" class="ltx_p" style="width:17.1pt;"><span id="S3.T1.3.5.3.1.1.1.1" class="ltx_text" style="font-size:70%;">phy</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.2" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.2.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.2.1.1.1" class="ltx_text" style="font-size:70%;">2119</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.3" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.3.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.3.1.1.1" class="ltx_text" style="font-size:70%;">282</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.4" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.4.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.4.1.1.1" class="ltx_text" style="font-size:70%;">99</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.5" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.5.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.5.1.1.1" class="ltx_text" style="font-size:70%;">7</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.6" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.6.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.6.1.1.1" class="ltx_text" style="font-size:70%;">4462</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.7" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.7.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.7.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.7.1.1.1" class="ltx_text" style="font-size:70%;">1693</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.8" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.8.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.8.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.8.1.1.1" class="ltx_text" style="font-size:70%;">615</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.9" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.9.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.9.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.9.1.1.1" class="ltx_text" style="font-size:70%;">60</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.10" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.10.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.10.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.10.1.1.1" class="ltx_text" style="font-size:70%;">31</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.11" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.11.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.11.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.11.1.1.1" class="ltx_text" style="font-size:70%;">56</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.12" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.12.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.12.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.12.1.1.1" class="ltx_text" style="font-size:70%;">49</span></span>
</span>
</td>
<td id="S3.T1.3.5.3.13" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.5.3.13.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.5.3.13.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.5.3.13.1.1.1" class="ltx_text" style="font-size:70%;">21</span></span>
</span>
</td>
</tr>
<tr id="S3.T1.3.6.4" class="ltx_tr">
<td id="S3.T1.3.6.4.1" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.1.1.1" class="ltx_p" style="width:17.1pt;"><span id="S3.T1.3.6.4.1.1.1.1" class="ltx_text" style="font-size:70%;">q-fin</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.2" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.2.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.2.1.1.1" class="ltx_text" style="font-size:70%;">1423</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.3" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.3.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.3.1.1.1" class="ltx_text" style="font-size:70%;">19</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.4" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.4.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.4.1.1.1" class="ltx_text" style="font-size:70%;">19</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.5" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.5.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.5.1.1.1" class="ltx_text" style="font-size:70%;">0</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.6" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.6.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.6.1.1.1" class="ltx_text" style="font-size:70%;">978</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.7" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.7.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.7.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.7.1.1.1" class="ltx_text" style="font-size:70%;">174</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.8" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.8.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.8.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.8.1.1.1" class="ltx_text" style="font-size:70%;">48</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.9" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.9.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.9.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.9.1.1.1" class="ltx_text" style="font-size:70%;">8</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.10" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.10.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.10.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.10.1.1.1" class="ltx_text" style="font-size:70%;">3</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.11" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.11.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.11.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.11.1.1.1" class="ltx_text" style="font-size:70%;">4</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.12" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.12.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.12.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.12.1.1.1" class="ltx_text" style="font-size:70%;">7</span></span>
</span>
</td>
<td id="S3.T1.3.6.4.13" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.6.4.13.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.6.4.13.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.6.4.13.1.1.1" class="ltx_text" style="font-size:70%;">0</span></span>
</span>
</td>
</tr>
<tr id="S3.T1.3.7.5" class="ltx_tr">
<td id="S3.T1.3.7.5.1" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.1.1.1" class="ltx_p" style="width:17.1pt;"><span id="S3.T1.3.7.5.1.1.1.1" class="ltx_text" style="font-size:70%;">q-bio</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.2" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.2.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.2.1.1.1" class="ltx_text" style="font-size:70%;">861</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.3" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.3.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.3.1.1.1" class="ltx_text" style="font-size:70%;">34</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.4" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.4.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.4.1.1.1" class="ltx_text" style="font-size:70%;">9</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.5" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.5.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.5.1.1.1" class="ltx_text" style="font-size:70%;">3</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.6" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.6.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.6.1.1.1" class="ltx_text" style="font-size:70%;">901</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.7" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.7.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.7.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.7.1.1.1" class="ltx_text" style="font-size:70%;">101</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.8" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.8.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.8.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.8.1.1.1" class="ltx_text" style="font-size:70%;">24</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.9" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.9.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.9.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.9.1.1.1" class="ltx_text" style="font-size:70%;">1</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.10" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.10.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.10.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.10.1.1.1" class="ltx_text" style="font-size:70%;">0</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.11" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.11.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.11.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.11.1.1.1" class="ltx_text" style="font-size:70%;">2</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.12" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.12.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.12.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.12.1.1.1" class="ltx_text" style="font-size:70%;">3</span></span>
</span>
</td>
<td id="S3.T1.3.7.5.13" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.7.5.13.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.7.5.13.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.7.5.13.1.1.1" class="ltx_text" style="font-size:70%;">0</span></span>
</span>
</td>
</tr>
<tr id="S3.T1.3.8.6" class="ltx_tr">
<td id="S3.T1.3.8.6.1" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.1.1.1" class="ltx_p" style="width:17.1pt;"><span id="S3.T1.3.8.6.1.1.1.1" class="ltx_text" style="font-size:70%;">econ</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.2" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.2.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.2.1.1.1" class="ltx_text" style="font-size:70%;">2952</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.3" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.3.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.3.1.1.1" class="ltx_text" style="font-size:70%;">160</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.4" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.4.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.4.1.1.1" class="ltx_text" style="font-size:70%;">18</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.5" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.5.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.5.1.1.1" class="ltx_text" style="font-size:70%;">5</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.6" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.6.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.6.1.1.1" class="ltx_text" style="font-size:70%;">3281</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.7" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.7.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.7.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.7.1.1.1" class="ltx_text" style="font-size:70%;">490</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.8" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.8.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.8.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.8.1.1.1" class="ltx_text" style="font-size:70%;">111</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.9" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.9.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.9.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.9.1.1.1" class="ltx_text" style="font-size:70%;">15</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.10" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.10.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.10.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.10.1.1.1" class="ltx_text" style="font-size:70%;">13</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.11" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.11.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.11.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.11.1.1.1" class="ltx_text" style="font-size:70%;">9</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.12" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.12.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.12.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.12.1.1.1" class="ltx_text" style="font-size:70%;">8</span></span>
</span>
</td>
<td id="S3.T1.3.8.6.13" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.8.6.13.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.8.6.13.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.8.6.13.1.1.1" class="ltx_text" style="font-size:70%;">0</span></span>
</span>
</td>
</tr>
<tr id="S3.T1.3.9.7" class="ltx_tr">
<td id="S3.T1.3.9.7.1" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.1.1.1" class="ltx_p" style="width:17.1pt;"><span id="S3.T1.3.9.7.1.1.1.1" class="ltx_text" style="font-size:70%;">eess</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.2" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.2.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.2.1.1.1" class="ltx_text" style="font-size:70%;">1670</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.3" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.3.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.3.1.1.1" class="ltx_text" style="font-size:70%;">36</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.4" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.4.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.4.1.1.1" class="ltx_text" style="font-size:70%;">4</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.5" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.5.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.5.1.1.1" class="ltx_text" style="font-size:70%;">0</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.6" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.6.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.6.1.1.1" class="ltx_text" style="font-size:70%;">911</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.7" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.7.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.7.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.7.1.1.1" class="ltx_text" style="font-size:70%;">167</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.8" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.8.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.8.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.8.1.1.1" class="ltx_text" style="font-size:70%;">56</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.9" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.9.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.9.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.9.1.1.1" class="ltx_text" style="font-size:70%;">15</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.10" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.10.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.10.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.10.1.1.1" class="ltx_text" style="font-size:70%;">2</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.11" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.11.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.11.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.11.1.1.1" class="ltx_text" style="font-size:70%;">17</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.12" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.12.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.12.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.12.1.1.1" class="ltx_text" style="font-size:70%;">3</span></span>
</span>
</td>
<td id="S3.T1.3.9.7.13" class="ltx_td ltx_align_justify ltx_align_top" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.9.7.13.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.9.7.13.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.9.7.13.1.1.1" class="ltx_text" style="font-size:70%;">0</span></span>
</span>
</td>
</tr>
<tr id="S3.T1.3.10.8" class="ltx_tr">
<td id="S3.T1.3.10.8.1" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.1.1.1" class="ltx_p" style="width:17.1pt;"><span id="S3.T1.3.10.8.1.1.1.1" class="ltx_text" style="font-size:70%;">cs</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.2" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.2.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.2.1.1.1" class="ltx_text" style="font-size:70%;">2648</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.3" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.3.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.3.1.1.1" class="ltx_text" style="font-size:70%;">201</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.4" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.4.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.4.1.1.1" class="ltx_text" style="font-size:70%;">100</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.5" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.5.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.5.1.1.1" class="ltx_text" style="font-size:70%;">4</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.6" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.6.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.6.1.1.1" class="ltx_text" style="font-size:70%;">1931</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.7" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.7.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.7.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.7.1.1.1" class="ltx_text" style="font-size:70%;">696</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.8" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.8.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.8.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.8.1.1.1" class="ltx_text" style="font-size:70%;">284</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.9" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_r" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.9.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.9.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.9.1.1.1" class="ltx_text" style="font-size:70%;">39</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.10" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.10.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.10.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.10.1.1.1" class="ltx_text" style="font-size:70%;">3</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.11" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.11.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.11.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.11.1.1.1" class="ltx_text" style="font-size:70%;">6</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.12" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.12.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.12.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.12.1.1.1" class="ltx_text" style="font-size:70%;">21</span></span>
</span>
</td>
<td id="S3.T1.3.10.8.13" class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" style="padding-top:0.7pt;padding-bottom:0.7pt;">
<span id="S3.T1.3.10.8.13.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T1.3.10.8.13.1.1" class="ltx_p" style="width:5.7pt;"><span id="S3.T1.3.10.8.13.1.1.1" class="ltx_text" style="font-size:70%;">5</span></span>
</span>
</td>
</tr>
</tbody>
</table>
</figure>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">IV </span><span id="S4.1.1" class="ltx_text ltx_font_smallcaps">FRAMEWORK</span>
</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">We propose the Hierarchical Detail Network (HDNet), to capture fine-grained hierarchical features in mathematical formulas, shown in Figure <a href="#S2.F2" title="Figure 2 ‣ II Related Work ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. HDNet is well-suited for accurately parsing complex expressions.</p>
</div>
<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S4.SS1.5.1.1" class="ltx_text">IV-A</span> </span><span id="S4.SS1.6.2" class="ltx_text ltx_font_italic">HDNet Architecture</span>
</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.3" class="ltx_p">When handling intricate formulas, fixed input image sizes can reduce resolution and lead to inaccuracies in recognizing fine details, as shown in Figure <a href="#S2.F2" title="Figure 2 ‣ II Related Work ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. HDNet addresses this with hierarchical decomposition and random cropping through its hierarchical sub-formula module, overcoming the fixed image size limitations in encoder-decoder models for complex formulas.
Hierarchical sub-formula module improves resolution and precision. It employs a sub-formula cropping strategy, decomposing formulas into sub-formulas rendered as high-resolution images. By using <math id="S4.SS1.p1.1.m1.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S4.SS1.p1.1.m1.1a"><mi id="S4.SS1.p1.1.m1.1.1" xref="S4.SS1.p1.1.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.1.m1.1b"><ci id="S4.SS1.p1.1.m1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.1.m1.1c">n</annotation></semantics></math> randomly selected sub-formula images, where their total character count is at least 70% of the entire formula’s, i.e., <math id="S4.SS1.p1.2.m2.1" class="ltx_Math" alttext="\sum_{i}^{n}c_{i}\geq c" display="inline"><semantics id="S4.SS1.p1.2.m2.1a"><mrow id="S4.SS1.p1.2.m2.1.1" xref="S4.SS1.p1.2.m2.1.1.cmml"><mrow id="S4.SS1.p1.2.m2.1.1.2" xref="S4.SS1.p1.2.m2.1.1.2.cmml"><msubsup id="S4.SS1.p1.2.m2.1.1.2.1" xref="S4.SS1.p1.2.m2.1.1.2.1.cmml"><mo id="S4.SS1.p1.2.m2.1.1.2.1.2.2" xref="S4.SS1.p1.2.m2.1.1.2.1.2.2.cmml">∑</mo><mi id="S4.SS1.p1.2.m2.1.1.2.1.2.3" xref="S4.SS1.p1.2.m2.1.1.2.1.2.3.cmml">i</mi><mi id="S4.SS1.p1.2.m2.1.1.2.1.3" xref="S4.SS1.p1.2.m2.1.1.2.1.3.cmml">n</mi></msubsup><msub id="S4.SS1.p1.2.m2.1.1.2.2" xref="S4.SS1.p1.2.m2.1.1.2.2.cmml"><mi id="S4.SS1.p1.2.m2.1.1.2.2.2" xref="S4.SS1.p1.2.m2.1.1.2.2.2.cmml">c</mi><mi id="S4.SS1.p1.2.m2.1.1.2.2.3" xref="S4.SS1.p1.2.m2.1.1.2.2.3.cmml">i</mi></msub></mrow><mo id="S4.SS1.p1.2.m2.1.1.1" xref="S4.SS1.p1.2.m2.1.1.1.cmml">≥</mo><mi id="S4.SS1.p1.2.m2.1.1.3" xref="S4.SS1.p1.2.m2.1.1.3.cmml">c</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.2.m2.1b"><apply id="S4.SS1.p1.2.m2.1.1.cmml" xref="S4.SS1.p1.2.m2.1.1"><geq id="S4.SS1.p1.2.m2.1.1.1.cmml" xref="S4.SS1.p1.2.m2.1.1.1"></geq><apply id="S4.SS1.p1.2.m2.1.1.2.cmml" xref="S4.SS1.p1.2.m2.1.1.2"><apply id="S4.SS1.p1.2.m2.1.1.2.1.cmml" xref="S4.SS1.p1.2.m2.1.1.2.1"><csymbol cd="ambiguous" id="S4.SS1.p1.2.m2.1.1.2.1.1.cmml" xref="S4.SS1.p1.2.m2.1.1.2.1">superscript</csymbol><apply id="S4.SS1.p1.2.m2.1.1.2.1.2.cmml" xref="S4.SS1.p1.2.m2.1.1.2.1"><csymbol cd="ambiguous" id="S4.SS1.p1.2.m2.1.1.2.1.2.1.cmml" xref="S4.SS1.p1.2.m2.1.1.2.1">subscript</csymbol><sum id="S4.SS1.p1.2.m2.1.1.2.1.2.2.cmml" xref="S4.SS1.p1.2.m2.1.1.2.1.2.2"></sum><ci id="S4.SS1.p1.2.m2.1.1.2.1.2.3.cmml" xref="S4.SS1.p1.2.m2.1.1.2.1.2.3">𝑖</ci></apply><ci id="S4.SS1.p1.2.m2.1.1.2.1.3.cmml" xref="S4.SS1.p1.2.m2.1.1.2.1.3">𝑛</ci></apply><apply id="S4.SS1.p1.2.m2.1.1.2.2.cmml" xref="S4.SS1.p1.2.m2.1.1.2.2"><csymbol cd="ambiguous" id="S4.SS1.p1.2.m2.1.1.2.2.1.cmml" xref="S4.SS1.p1.2.m2.1.1.2.2">subscript</csymbol><ci id="S4.SS1.p1.2.m2.1.1.2.2.2.cmml" xref="S4.SS1.p1.2.m2.1.1.2.2.2">𝑐</ci><ci id="S4.SS1.p1.2.m2.1.1.2.2.3.cmml" xref="S4.SS1.p1.2.m2.1.1.2.2.3">𝑖</ci></apply></apply><ci id="S4.SS1.p1.2.m2.1.1.3.cmml" xref="S4.SS1.p1.2.m2.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.2.m2.1c">\sum_{i}^{n}c_{i}\geq c</annotation></semantics></math>, HDNet captures essential details and focuses on intricate components, significantly improving recognition accuracy. During inference, sub-formulas cannot be extracted, and their labels are unavailable. To simulate this, random cropping of <math id="S4.SS1.p1.3.m3.1" class="ltx_Math" alttext="\lambda\%" display="inline"><semantics id="S4.SS1.p1.3.m3.1a"><mrow id="S4.SS1.p1.3.m3.1.1" xref="S4.SS1.p1.3.m3.1.1.cmml"><mi id="S4.SS1.p1.3.m3.1.1.2" xref="S4.SS1.p1.3.m3.1.1.2.cmml">λ</mi><mo id="S4.SS1.p1.3.m3.1.1.1" xref="S4.SS1.p1.3.m3.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.3.m3.1b"><apply id="S4.SS1.p1.3.m3.1.1.cmml" xref="S4.SS1.p1.3.m3.1.1"><csymbol cd="latexml" id="S4.SS1.p1.3.m3.1.1.1.cmml" xref="S4.SS1.p1.3.m3.1.1.1">percent</csymbol><ci id="S4.SS1.p1.3.m3.1.1.2.cmml" xref="S4.SS1.p1.3.m3.1.1.2">𝜆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.3.m3.1c">\lambda\%</annotation></semantics></math> of the samples is applied during training, ensuring the model’s robustness during the prediction phase.</p>
</div>
<div id="S4.SS1.p2" class="ltx_para">
<p id="S4.SS1.p2.4" class="ltx_p">HDNet is built upon a Transformer-based encoder-decoder framework <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite>. Each input formula image <math id="S4.SS1.p2.1.m1.1" class="ltx_Math" alttext="I\in\mathbb{R}^{3\times H\times W}" display="inline"><semantics id="S4.SS1.p2.1.m1.1a"><mrow id="S4.SS1.p2.1.m1.1.1" xref="S4.SS1.p2.1.m1.1.1.cmml"><mi id="S4.SS1.p2.1.m1.1.1.2" xref="S4.SS1.p2.1.m1.1.1.2.cmml">I</mi><mo id="S4.SS1.p2.1.m1.1.1.1" xref="S4.SS1.p2.1.m1.1.1.1.cmml">∈</mo><msup id="S4.SS1.p2.1.m1.1.1.3" xref="S4.SS1.p2.1.m1.1.1.3.cmml"><mi id="S4.SS1.p2.1.m1.1.1.3.2" xref="S4.SS1.p2.1.m1.1.1.3.2.cmml">ℝ</mi><mrow id="S4.SS1.p2.1.m1.1.1.3.3" xref="S4.SS1.p2.1.m1.1.1.3.3.cmml"><mn id="S4.SS1.p2.1.m1.1.1.3.3.2" xref="S4.SS1.p2.1.m1.1.1.3.3.2.cmml">3</mn><mo lspace="0.222em" rspace="0.222em" id="S4.SS1.p2.1.m1.1.1.3.3.1" xref="S4.SS1.p2.1.m1.1.1.3.3.1.cmml">×</mo><mi id="S4.SS1.p2.1.m1.1.1.3.3.3" xref="S4.SS1.p2.1.m1.1.1.3.3.3.cmml">H</mi><mo lspace="0.222em" rspace="0.222em" id="S4.SS1.p2.1.m1.1.1.3.3.1a" xref="S4.SS1.p2.1.m1.1.1.3.3.1.cmml">×</mo><mi id="S4.SS1.p2.1.m1.1.1.3.3.4" xref="S4.SS1.p2.1.m1.1.1.3.3.4.cmml">W</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.1.m1.1b"><apply id="S4.SS1.p2.1.m1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1"><in id="S4.SS1.p2.1.m1.1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1.1"></in><ci id="S4.SS1.p2.1.m1.1.1.2.cmml" xref="S4.SS1.p2.1.m1.1.1.2">𝐼</ci><apply id="S4.SS1.p2.1.m1.1.1.3.cmml" xref="S4.SS1.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S4.SS1.p2.1.m1.1.1.3.1.cmml" xref="S4.SS1.p2.1.m1.1.1.3">superscript</csymbol><ci id="S4.SS1.p2.1.m1.1.1.3.2.cmml" xref="S4.SS1.p2.1.m1.1.1.3.2">ℝ</ci><apply id="S4.SS1.p2.1.m1.1.1.3.3.cmml" xref="S4.SS1.p2.1.m1.1.1.3.3"><times id="S4.SS1.p2.1.m1.1.1.3.3.1.cmml" xref="S4.SS1.p2.1.m1.1.1.3.3.1"></times><cn type="integer" id="S4.SS1.p2.1.m1.1.1.3.3.2.cmml" xref="S4.SS1.p2.1.m1.1.1.3.3.2">3</cn><ci id="S4.SS1.p2.1.m1.1.1.3.3.3.cmml" xref="S4.SS1.p2.1.m1.1.1.3.3.3">𝐻</ci><ci id="S4.SS1.p2.1.m1.1.1.3.3.4.cmml" xref="S4.SS1.p2.1.m1.1.1.3.3.4">𝑊</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.1.m1.1c">I\in\mathbb{R}^{3\times H\times W}</annotation></semantics></math> is cropped to generate a set of high-resolution sub-formula images, which are processed by a Vision Transformer <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite> encoder to produce feature vectors. Specifically, a feature vector for the main formula image <math id="S4.SS1.p2.2.m2.1" class="ltx_Math" alttext="Z_{\text{main}}" display="inline"><semantics id="S4.SS1.p2.2.m2.1a"><msub id="S4.SS1.p2.2.m2.1.1" xref="S4.SS1.p2.2.m2.1.1.cmml"><mi id="S4.SS1.p2.2.m2.1.1.2" xref="S4.SS1.p2.2.m2.1.1.2.cmml">Z</mi><mtext id="S4.SS1.p2.2.m2.1.1.3" xref="S4.SS1.p2.2.m2.1.1.3a.cmml">main</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.2.m2.1b"><apply id="S4.SS1.p2.2.m2.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS1.p2.2.m2.1.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1">subscript</csymbol><ci id="S4.SS1.p2.2.m2.1.1.2.cmml" xref="S4.SS1.p2.2.m2.1.1.2">𝑍</ci><ci id="S4.SS1.p2.2.m2.1.1.3a.cmml" xref="S4.SS1.p2.2.m2.1.1.3"><mtext mathsize="70%" id="S4.SS1.p2.2.m2.1.1.3.cmml" xref="S4.SS1.p2.2.m2.1.1.3">main</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.2.m2.1c">Z_{\text{main}}</annotation></semantics></math> and feature vectors for the sub-formula images <math id="S4.SS1.p2.3.m3.1" class="ltx_Math" alttext="Z_{i}" display="inline"><semantics id="S4.SS1.p2.3.m3.1a"><msub id="S4.SS1.p2.3.m3.1.1" xref="S4.SS1.p2.3.m3.1.1.cmml"><mi id="S4.SS1.p2.3.m3.1.1.2" xref="S4.SS1.p2.3.m3.1.1.2.cmml">Z</mi><mi id="S4.SS1.p2.3.m3.1.1.3" xref="S4.SS1.p2.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.3.m3.1b"><apply id="S4.SS1.p2.3.m3.1.1.cmml" xref="S4.SS1.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS1.p2.3.m3.1.1.1.cmml" xref="S4.SS1.p2.3.m3.1.1">subscript</csymbol><ci id="S4.SS1.p2.3.m3.1.1.2.cmml" xref="S4.SS1.p2.3.m3.1.1.2">𝑍</ci><ci id="S4.SS1.p2.3.m3.1.1.3.cmml" xref="S4.SS1.p2.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.3.m3.1c">Z_{i}</annotation></semantics></math> are obtained. These vectors are then fused into a unified representation <math id="S4.SS1.p2.4.m4.1" class="ltx_Math" alttext="Z" display="inline"><semantics id="S4.SS1.p2.4.m4.1a"><mi id="S4.SS1.p2.4.m4.1.1" xref="S4.SS1.p2.4.m4.1.1.cmml">Z</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.4.m4.1b"><ci id="S4.SS1.p2.4.m4.1.1.cmml" xref="S4.SS1.p2.4.m4.1.1">𝑍</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.4.m4.1c">Z</annotation></semantics></math>, defined as:</p>
<table id="S4.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S4.E1.m1.1" class="ltx_Math" alttext="Z=\alpha\cdot Z_{\text{main}}+(1-\alpha)\cdot\frac{1}{n}\sum_{i=1}^{n}Z_{i}" display="block"><semantics id="S4.E1.m1.1a"><mrow id="S4.E1.m1.1.1" xref="S4.E1.m1.1.1.cmml"><mi id="S4.E1.m1.1.1.3" xref="S4.E1.m1.1.1.3.cmml">Z</mi><mo id="S4.E1.m1.1.1.2" xref="S4.E1.m1.1.1.2.cmml">=</mo><mrow id="S4.E1.m1.1.1.1" xref="S4.E1.m1.1.1.1.cmml"><mrow id="S4.E1.m1.1.1.1.3" xref="S4.E1.m1.1.1.1.3.cmml"><mi id="S4.E1.m1.1.1.1.3.2" xref="S4.E1.m1.1.1.1.3.2.cmml">α</mi><mo lspace="0.222em" rspace="0.222em" id="S4.E1.m1.1.1.1.3.1" xref="S4.E1.m1.1.1.1.3.1.cmml">⋅</mo><msub id="S4.E1.m1.1.1.1.3.3" xref="S4.E1.m1.1.1.1.3.3.cmml"><mi id="S4.E1.m1.1.1.1.3.3.2" xref="S4.E1.m1.1.1.1.3.3.2.cmml">Z</mi><mtext id="S4.E1.m1.1.1.1.3.3.3" xref="S4.E1.m1.1.1.1.3.3.3a.cmml">main</mtext></msub></mrow><mo id="S4.E1.m1.1.1.1.2" xref="S4.E1.m1.1.1.1.2.cmml">+</mo><mrow id="S4.E1.m1.1.1.1.1" xref="S4.E1.m1.1.1.1.1.cmml"><mrow id="S4.E1.m1.1.1.1.1.1" xref="S4.E1.m1.1.1.1.1.1.cmml"><mrow id="S4.E1.m1.1.1.1.1.1.1.1" xref="S4.E1.m1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E1.m1.1.1.1.1.1.1.1.2" xref="S4.E1.m1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E1.m1.1.1.1.1.1.1.1.1" xref="S4.E1.m1.1.1.1.1.1.1.1.1.cmml"><mn id="S4.E1.m1.1.1.1.1.1.1.1.1.2" xref="S4.E1.m1.1.1.1.1.1.1.1.1.2.cmml">1</mn><mo id="S4.E1.m1.1.1.1.1.1.1.1.1.1" xref="S4.E1.m1.1.1.1.1.1.1.1.1.1.cmml">−</mo><mi id="S4.E1.m1.1.1.1.1.1.1.1.1.3" xref="S4.E1.m1.1.1.1.1.1.1.1.1.3.cmml">α</mi></mrow><mo rspace="0.055em" stretchy="false" id="S4.E1.m1.1.1.1.1.1.1.1.3" xref="S4.E1.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow><mo rspace="0.222em" id="S4.E1.m1.1.1.1.1.1.2" xref="S4.E1.m1.1.1.1.1.1.2.cmml">⋅</mo><mfrac id="S4.E1.m1.1.1.1.1.1.3" xref="S4.E1.m1.1.1.1.1.1.3.cmml"><mn id="S4.E1.m1.1.1.1.1.1.3.2" xref="S4.E1.m1.1.1.1.1.1.3.2.cmml">1</mn><mi id="S4.E1.m1.1.1.1.1.1.3.3" xref="S4.E1.m1.1.1.1.1.1.3.3.cmml">n</mi></mfrac></mrow><mo lspace="0em" rspace="0em" id="S4.E1.m1.1.1.1.1.2" xref="S4.E1.m1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E1.m1.1.1.1.1.3" xref="S4.E1.m1.1.1.1.1.3.cmml"><munderover id="S4.E1.m1.1.1.1.1.3.1" xref="S4.E1.m1.1.1.1.1.3.1.cmml"><mo movablelimits="false" id="S4.E1.m1.1.1.1.1.3.1.2.2" xref="S4.E1.m1.1.1.1.1.3.1.2.2.cmml">∑</mo><mrow id="S4.E1.m1.1.1.1.1.3.1.2.3" xref="S4.E1.m1.1.1.1.1.3.1.2.3.cmml"><mi id="S4.E1.m1.1.1.1.1.3.1.2.3.2" xref="S4.E1.m1.1.1.1.1.3.1.2.3.2.cmml">i</mi><mo id="S4.E1.m1.1.1.1.1.3.1.2.3.1" xref="S4.E1.m1.1.1.1.1.3.1.2.3.1.cmml">=</mo><mn id="S4.E1.m1.1.1.1.1.3.1.2.3.3" xref="S4.E1.m1.1.1.1.1.3.1.2.3.3.cmml">1</mn></mrow><mi id="S4.E1.m1.1.1.1.1.3.1.3" xref="S4.E1.m1.1.1.1.1.3.1.3.cmml">n</mi></munderover><msub id="S4.E1.m1.1.1.1.1.3.2" xref="S4.E1.m1.1.1.1.1.3.2.cmml"><mi id="S4.E1.m1.1.1.1.1.3.2.2" xref="S4.E1.m1.1.1.1.1.3.2.2.cmml">Z</mi><mi id="S4.E1.m1.1.1.1.1.3.2.3" xref="S4.E1.m1.1.1.1.1.3.2.3.cmml">i</mi></msub></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.E1.m1.1b"><apply id="S4.E1.m1.1.1.cmml" xref="S4.E1.m1.1.1"><eq id="S4.E1.m1.1.1.2.cmml" xref="S4.E1.m1.1.1.2"></eq><ci id="S4.E1.m1.1.1.3.cmml" xref="S4.E1.m1.1.1.3">𝑍</ci><apply id="S4.E1.m1.1.1.1.cmml" xref="S4.E1.m1.1.1.1"><plus id="S4.E1.m1.1.1.1.2.cmml" xref="S4.E1.m1.1.1.1.2"></plus><apply id="S4.E1.m1.1.1.1.3.cmml" xref="S4.E1.m1.1.1.1.3"><ci id="S4.E1.m1.1.1.1.3.1.cmml" xref="S4.E1.m1.1.1.1.3.1">⋅</ci><ci id="S4.E1.m1.1.1.1.3.2.cmml" xref="S4.E1.m1.1.1.1.3.2">𝛼</ci><apply id="S4.E1.m1.1.1.1.3.3.cmml" xref="S4.E1.m1.1.1.1.3.3"><csymbol cd="ambiguous" id="S4.E1.m1.1.1.1.3.3.1.cmml" xref="S4.E1.m1.1.1.1.3.3">subscript</csymbol><ci id="S4.E1.m1.1.1.1.3.3.2.cmml" xref="S4.E1.m1.1.1.1.3.3.2">𝑍</ci><ci id="S4.E1.m1.1.1.1.3.3.3a.cmml" xref="S4.E1.m1.1.1.1.3.3.3"><mtext mathsize="70%" id="S4.E1.m1.1.1.1.3.3.3.cmml" xref="S4.E1.m1.1.1.1.3.3.3">main</mtext></ci></apply></apply><apply id="S4.E1.m1.1.1.1.1.cmml" xref="S4.E1.m1.1.1.1.1"><times id="S4.E1.m1.1.1.1.1.2.cmml" xref="S4.E1.m1.1.1.1.1.2"></times><apply id="S4.E1.m1.1.1.1.1.1.cmml" xref="S4.E1.m1.1.1.1.1.1"><ci id="S4.E1.m1.1.1.1.1.1.2.cmml" xref="S4.E1.m1.1.1.1.1.1.2">⋅</ci><apply id="S4.E1.m1.1.1.1.1.1.1.1.1.cmml" xref="S4.E1.m1.1.1.1.1.1.1.1"><minus id="S4.E1.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E1.m1.1.1.1.1.1.1.1.1.1"></minus><cn type="integer" id="S4.E1.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E1.m1.1.1.1.1.1.1.1.1.2">1</cn><ci id="S4.E1.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E1.m1.1.1.1.1.1.1.1.1.3">𝛼</ci></apply><apply id="S4.E1.m1.1.1.1.1.1.3.cmml" xref="S4.E1.m1.1.1.1.1.1.3"><divide id="S4.E1.m1.1.1.1.1.1.3.1.cmml" xref="S4.E1.m1.1.1.1.1.1.3"></divide><cn type="integer" id="S4.E1.m1.1.1.1.1.1.3.2.cmml" xref="S4.E1.m1.1.1.1.1.1.3.2">1</cn><ci id="S4.E1.m1.1.1.1.1.1.3.3.cmml" xref="S4.E1.m1.1.1.1.1.1.3.3">𝑛</ci></apply></apply><apply id="S4.E1.m1.1.1.1.1.3.cmml" xref="S4.E1.m1.1.1.1.1.3"><apply id="S4.E1.m1.1.1.1.1.3.1.cmml" xref="S4.E1.m1.1.1.1.1.3.1"><csymbol cd="ambiguous" id="S4.E1.m1.1.1.1.1.3.1.1.cmml" xref="S4.E1.m1.1.1.1.1.3.1">superscript</csymbol><apply id="S4.E1.m1.1.1.1.1.3.1.2.cmml" xref="S4.E1.m1.1.1.1.1.3.1"><csymbol cd="ambiguous" id="S4.E1.m1.1.1.1.1.3.1.2.1.cmml" xref="S4.E1.m1.1.1.1.1.3.1">subscript</csymbol><sum id="S4.E1.m1.1.1.1.1.3.1.2.2.cmml" xref="S4.E1.m1.1.1.1.1.3.1.2.2"></sum><apply id="S4.E1.m1.1.1.1.1.3.1.2.3.cmml" xref="S4.E1.m1.1.1.1.1.3.1.2.3"><eq id="S4.E1.m1.1.1.1.1.3.1.2.3.1.cmml" xref="S4.E1.m1.1.1.1.1.3.1.2.3.1"></eq><ci id="S4.E1.m1.1.1.1.1.3.1.2.3.2.cmml" xref="S4.E1.m1.1.1.1.1.3.1.2.3.2">𝑖</ci><cn type="integer" id="S4.E1.m1.1.1.1.1.3.1.2.3.3.cmml" xref="S4.E1.m1.1.1.1.1.3.1.2.3.3">1</cn></apply></apply><ci id="S4.E1.m1.1.1.1.1.3.1.3.cmml" xref="S4.E1.m1.1.1.1.1.3.1.3">𝑛</ci></apply><apply id="S4.E1.m1.1.1.1.1.3.2.cmml" xref="S4.E1.m1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S4.E1.m1.1.1.1.1.3.2.1.cmml" xref="S4.E1.m1.1.1.1.1.3.2">subscript</csymbol><ci id="S4.E1.m1.1.1.1.1.3.2.2.cmml" xref="S4.E1.m1.1.1.1.1.3.2.2">𝑍</ci><ci id="S4.E1.m1.1.1.1.1.3.2.3.cmml" xref="S4.E1.m1.1.1.1.1.3.2.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E1.m1.1c">Z=\alpha\cdot Z_{\text{main}}+(1-\alpha)\cdot\frac{1}{n}\sum_{i=1}^{n}Z_{i}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p id="S4.SS1.p2.7" class="ltx_p">where <math id="S4.SS1.p2.5.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS1.p2.5.m1.1a"><mi id="S4.SS1.p2.5.m1.1.1" xref="S4.SS1.p2.5.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.5.m1.1b"><ci id="S4.SS1.p2.5.m1.1.1.cmml" xref="S4.SS1.p2.5.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.5.m1.1c">\alpha</annotation></semantics></math> balances the contributions of the main formula and sub-formula features, and <math id="S4.SS1.p2.6.m2.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S4.SS1.p2.6.m2.1a"><mi id="S4.SS1.p2.6.m2.1.1" xref="S4.SS1.p2.6.m2.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.6.m2.1b"><ci id="S4.SS1.p2.6.m2.1.1.cmml" xref="S4.SS1.p2.6.m2.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.6.m2.1c">n</annotation></semantics></math> is the number of sub-formula images. The fused feature vector <math id="S4.SS1.p2.7.m3.1" class="ltx_Math" alttext="Z" display="inline"><semantics id="S4.SS1.p2.7.m3.1a"><mi id="S4.SS1.p2.7.m3.1.1" xref="S4.SS1.p2.7.m3.1.1.cmml">Z</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.7.m3.1b"><ci id="S4.SS1.p2.7.m3.1.1.cmml" xref="S4.SS1.p2.7.m3.1.1">𝑍</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.7.m3.1c">Z</annotation></semantics></math> is first passed into the decoder. The decoder utilizes cross-attention mechanisms to interact with the output text sequence. Finally, it generates the predicted formula based on these interactions. This approach enables HDNet to effectively integrate fine-grained details from both the main formula and its sub-formulas, resulting in improved accuracy.</p>
</div>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S4.SS2.5.1.1" class="ltx_text">IV-B</span> </span><span id="S4.SS2.6.2" class="ltx_text ltx_font_italic">Loss Function</span>
</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">In addition to the formula decoding loss, sub-formula labels are used to compute the sub-formula loss, contributing to the overall optimization of the model. The overall optimization objective for HDNet is defined by the following loss function:</p>
</div>
<div id="S4.SS2.p2" class="ltx_para">
<table id="S4.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S4.E2.m1.1" class="ltx_Math" alttext="\mathcal{L}_{total}=\alpha\cdot\mathcal{L}_{\text{main}}+(1-\alpha)\cdot\frac{1}{n}\sum_{i=1}^{n}\mathcal{L}_{i}" display="block"><semantics id="S4.E2.m1.1a"><mrow id="S4.E2.m1.1.1" xref="S4.E2.m1.1.1.cmml"><msub id="S4.E2.m1.1.1.3" xref="S4.E2.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.E2.m1.1.1.3.2" xref="S4.E2.m1.1.1.3.2.cmml">ℒ</mi><mrow id="S4.E2.m1.1.1.3.3" xref="S4.E2.m1.1.1.3.3.cmml"><mi id="S4.E2.m1.1.1.3.3.2" xref="S4.E2.m1.1.1.3.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.1.1.3.3.1" xref="S4.E2.m1.1.1.3.3.1.cmml">​</mo><mi id="S4.E2.m1.1.1.3.3.3" xref="S4.E2.m1.1.1.3.3.3.cmml">o</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.1.1.3.3.1a" xref="S4.E2.m1.1.1.3.3.1.cmml">​</mo><mi id="S4.E2.m1.1.1.3.3.4" xref="S4.E2.m1.1.1.3.3.4.cmml">t</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.1.1.3.3.1b" xref="S4.E2.m1.1.1.3.3.1.cmml">​</mo><mi id="S4.E2.m1.1.1.3.3.5" xref="S4.E2.m1.1.1.3.3.5.cmml">a</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.1.1.3.3.1c" xref="S4.E2.m1.1.1.3.3.1.cmml">​</mo><mi id="S4.E2.m1.1.1.3.3.6" xref="S4.E2.m1.1.1.3.3.6.cmml">l</mi></mrow></msub><mo id="S4.E2.m1.1.1.2" xref="S4.E2.m1.1.1.2.cmml">=</mo><mrow id="S4.E2.m1.1.1.1" xref="S4.E2.m1.1.1.1.cmml"><mrow id="S4.E2.m1.1.1.1.3" xref="S4.E2.m1.1.1.1.3.cmml"><mi id="S4.E2.m1.1.1.1.3.2" xref="S4.E2.m1.1.1.1.3.2.cmml">α</mi><mo lspace="0.222em" rspace="0.222em" id="S4.E2.m1.1.1.1.3.1" xref="S4.E2.m1.1.1.1.3.1.cmml">⋅</mo><msub id="S4.E2.m1.1.1.1.3.3" xref="S4.E2.m1.1.1.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.E2.m1.1.1.1.3.3.2" xref="S4.E2.m1.1.1.1.3.3.2.cmml">ℒ</mi><mtext id="S4.E2.m1.1.1.1.3.3.3" xref="S4.E2.m1.1.1.1.3.3.3a.cmml">main</mtext></msub></mrow><mo id="S4.E2.m1.1.1.1.2" xref="S4.E2.m1.1.1.1.2.cmml">+</mo><mrow id="S4.E2.m1.1.1.1.1" xref="S4.E2.m1.1.1.1.1.cmml"><mrow id="S4.E2.m1.1.1.1.1.1" xref="S4.E2.m1.1.1.1.1.1.cmml"><mrow id="S4.E2.m1.1.1.1.1.1.1.1" xref="S4.E2.m1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E2.m1.1.1.1.1.1.1.1.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E2.m1.1.1.1.1.1.1.1.1" xref="S4.E2.m1.1.1.1.1.1.1.1.1.cmml"><mn id="S4.E2.m1.1.1.1.1.1.1.1.1.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.2.cmml">1</mn><mo id="S4.E2.m1.1.1.1.1.1.1.1.1.1" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.cmml">−</mo><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.3.cmml">α</mi></mrow><mo rspace="0.055em" stretchy="false" id="S4.E2.m1.1.1.1.1.1.1.1.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow><mo rspace="0.222em" id="S4.E2.m1.1.1.1.1.1.2" xref="S4.E2.m1.1.1.1.1.1.2.cmml">⋅</mo><mfrac id="S4.E2.m1.1.1.1.1.1.3" xref="S4.E2.m1.1.1.1.1.1.3.cmml"><mn id="S4.E2.m1.1.1.1.1.1.3.2" xref="S4.E2.m1.1.1.1.1.1.3.2.cmml">1</mn><mi id="S4.E2.m1.1.1.1.1.1.3.3" xref="S4.E2.m1.1.1.1.1.1.3.3.cmml">n</mi></mfrac></mrow><mo lspace="0em" rspace="0em" id="S4.E2.m1.1.1.1.1.2" xref="S4.E2.m1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E2.m1.1.1.1.1.3" xref="S4.E2.m1.1.1.1.1.3.cmml"><munderover id="S4.E2.m1.1.1.1.1.3.1" xref="S4.E2.m1.1.1.1.1.3.1.cmml"><mo movablelimits="false" id="S4.E2.m1.1.1.1.1.3.1.2.2" xref="S4.E2.m1.1.1.1.1.3.1.2.2.cmml">∑</mo><mrow id="S4.E2.m1.1.1.1.1.3.1.2.3" xref="S4.E2.m1.1.1.1.1.3.1.2.3.cmml"><mi id="S4.E2.m1.1.1.1.1.3.1.2.3.2" xref="S4.E2.m1.1.1.1.1.3.1.2.3.2.cmml">i</mi><mo id="S4.E2.m1.1.1.1.1.3.1.2.3.1" xref="S4.E2.m1.1.1.1.1.3.1.2.3.1.cmml">=</mo><mn id="S4.E2.m1.1.1.1.1.3.1.2.3.3" xref="S4.E2.m1.1.1.1.1.3.1.2.3.3.cmml">1</mn></mrow><mi id="S4.E2.m1.1.1.1.1.3.1.3" xref="S4.E2.m1.1.1.1.1.3.1.3.cmml">n</mi></munderover><msub id="S4.E2.m1.1.1.1.1.3.2" xref="S4.E2.m1.1.1.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.E2.m1.1.1.1.1.3.2.2" xref="S4.E2.m1.1.1.1.1.3.2.2.cmml">ℒ</mi><mi id="S4.E2.m1.1.1.1.1.3.2.3" xref="S4.E2.m1.1.1.1.1.3.2.3.cmml">i</mi></msub></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.E2.m1.1b"><apply id="S4.E2.m1.1.1.cmml" xref="S4.E2.m1.1.1"><eq id="S4.E2.m1.1.1.2.cmml" xref="S4.E2.m1.1.1.2"></eq><apply id="S4.E2.m1.1.1.3.cmml" xref="S4.E2.m1.1.1.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.3.1.cmml" xref="S4.E2.m1.1.1.3">subscript</csymbol><ci id="S4.E2.m1.1.1.3.2.cmml" xref="S4.E2.m1.1.1.3.2">ℒ</ci><apply id="S4.E2.m1.1.1.3.3.cmml" xref="S4.E2.m1.1.1.3.3"><times id="S4.E2.m1.1.1.3.3.1.cmml" xref="S4.E2.m1.1.1.3.3.1"></times><ci id="S4.E2.m1.1.1.3.3.2.cmml" xref="S4.E2.m1.1.1.3.3.2">𝑡</ci><ci id="S4.E2.m1.1.1.3.3.3.cmml" xref="S4.E2.m1.1.1.3.3.3">𝑜</ci><ci id="S4.E2.m1.1.1.3.3.4.cmml" xref="S4.E2.m1.1.1.3.3.4">𝑡</ci><ci id="S4.E2.m1.1.1.3.3.5.cmml" xref="S4.E2.m1.1.1.3.3.5">𝑎</ci><ci id="S4.E2.m1.1.1.3.3.6.cmml" xref="S4.E2.m1.1.1.3.3.6">𝑙</ci></apply></apply><apply id="S4.E2.m1.1.1.1.cmml" xref="S4.E2.m1.1.1.1"><plus id="S4.E2.m1.1.1.1.2.cmml" xref="S4.E2.m1.1.1.1.2"></plus><apply id="S4.E2.m1.1.1.1.3.cmml" xref="S4.E2.m1.1.1.1.3"><ci id="S4.E2.m1.1.1.1.3.1.cmml" xref="S4.E2.m1.1.1.1.3.1">⋅</ci><ci id="S4.E2.m1.1.1.1.3.2.cmml" xref="S4.E2.m1.1.1.1.3.2">𝛼</ci><apply id="S4.E2.m1.1.1.1.3.3.cmml" xref="S4.E2.m1.1.1.1.3.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.3.3.1.cmml" xref="S4.E2.m1.1.1.1.3.3">subscript</csymbol><ci id="S4.E2.m1.1.1.1.3.3.2.cmml" xref="S4.E2.m1.1.1.1.3.3.2">ℒ</ci><ci id="S4.E2.m1.1.1.1.3.3.3a.cmml" xref="S4.E2.m1.1.1.1.3.3.3"><mtext mathsize="70%" id="S4.E2.m1.1.1.1.3.3.3.cmml" xref="S4.E2.m1.1.1.1.3.3.3">main</mtext></ci></apply></apply><apply id="S4.E2.m1.1.1.1.1.cmml" xref="S4.E2.m1.1.1.1.1"><times id="S4.E2.m1.1.1.1.1.2.cmml" xref="S4.E2.m1.1.1.1.1.2"></times><apply id="S4.E2.m1.1.1.1.1.1.cmml" xref="S4.E2.m1.1.1.1.1.1"><ci id="S4.E2.m1.1.1.1.1.1.2.cmml" xref="S4.E2.m1.1.1.1.1.1.2">⋅</ci><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1"><minus id="S4.E2.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1"></minus><cn type="integer" id="S4.E2.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.2">1</cn><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.3">𝛼</ci></apply><apply id="S4.E2.m1.1.1.1.1.1.3.cmml" xref="S4.E2.m1.1.1.1.1.1.3"><divide id="S4.E2.m1.1.1.1.1.1.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.3"></divide><cn type="integer" id="S4.E2.m1.1.1.1.1.1.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.3.2">1</cn><ci id="S4.E2.m1.1.1.1.1.1.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.3.3">𝑛</ci></apply></apply><apply id="S4.E2.m1.1.1.1.1.3.cmml" xref="S4.E2.m1.1.1.1.1.3"><apply id="S4.E2.m1.1.1.1.1.3.1.cmml" xref="S4.E2.m1.1.1.1.1.3.1"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.3.1.1.cmml" xref="S4.E2.m1.1.1.1.1.3.1">superscript</csymbol><apply id="S4.E2.m1.1.1.1.1.3.1.2.cmml" xref="S4.E2.m1.1.1.1.1.3.1"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.3.1.2.1.cmml" xref="S4.E2.m1.1.1.1.1.3.1">subscript</csymbol><sum id="S4.E2.m1.1.1.1.1.3.1.2.2.cmml" xref="S4.E2.m1.1.1.1.1.3.1.2.2"></sum><apply id="S4.E2.m1.1.1.1.1.3.1.2.3.cmml" xref="S4.E2.m1.1.1.1.1.3.1.2.3"><eq id="S4.E2.m1.1.1.1.1.3.1.2.3.1.cmml" xref="S4.E2.m1.1.1.1.1.3.1.2.3.1"></eq><ci id="S4.E2.m1.1.1.1.1.3.1.2.3.2.cmml" xref="S4.E2.m1.1.1.1.1.3.1.2.3.2">𝑖</ci><cn type="integer" id="S4.E2.m1.1.1.1.1.3.1.2.3.3.cmml" xref="S4.E2.m1.1.1.1.1.3.1.2.3.3">1</cn></apply></apply><ci id="S4.E2.m1.1.1.1.1.3.1.3.cmml" xref="S4.E2.m1.1.1.1.1.3.1.3">𝑛</ci></apply><apply id="S4.E2.m1.1.1.1.1.3.2.cmml" xref="S4.E2.m1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.3.2.1.cmml" xref="S4.E2.m1.1.1.1.1.3.2">subscript</csymbol><ci id="S4.E2.m1.1.1.1.1.3.2.2.cmml" xref="S4.E2.m1.1.1.1.1.3.2.2">ℒ</ci><ci id="S4.E2.m1.1.1.1.1.3.2.3.cmml" xref="S4.E2.m1.1.1.1.1.3.2.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E2.m1.1c">\mathcal{L}_{total}=\alpha\cdot\mathcal{L}_{\text{main}}+(1-\alpha)\cdot\frac{1}{n}\sum_{i=1}^{n}\mathcal{L}_{i}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p id="S4.SS2.p2.1" class="ltx_p">where <math id="S4.SS2.p2.1.m1.1" class="ltx_Math" alttext="\mathcal{L}_{\text{main}}" display="inline"><semantics id="S4.SS2.p2.1.m1.1a"><msub id="S4.SS2.p2.1.m1.1.1" xref="S4.SS2.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p2.1.m1.1.1.2" xref="S4.SS2.p2.1.m1.1.1.2.cmml">ℒ</mi><mtext id="S4.SS2.p2.1.m1.1.1.3" xref="S4.SS2.p2.1.m1.1.1.3a.cmml">main</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.1.m1.1b"><apply id="S4.SS2.p2.1.m1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p2.1.m1.1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1">subscript</csymbol><ci id="S4.SS2.p2.1.m1.1.1.2.cmml" xref="S4.SS2.p2.1.m1.1.1.2">ℒ</ci><ci id="S4.SS2.p2.1.m1.1.1.3a.cmml" xref="S4.SS2.p2.1.m1.1.1.3"><mtext mathsize="70%" id="S4.SS2.p2.1.m1.1.1.3.cmml" xref="S4.SS2.p2.1.m1.1.1.3">main</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.1.m1.1c">\mathcal{L}_{\text{main}}</annotation></semantics></math> represents the primary loss of formula recognition. It is computed using the autoregressive language model loss:</p>
</div>
<div id="S4.SS2.p3" class="ltx_para">
<table id="S4.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S4.E3.m1.2" class="ltx_Math" alttext="\mathcal{L}=-\sum_{t=1}^{T}\log p(y_{t}\mid y_{&lt;t},Z)" display="block"><semantics id="S4.E3.m1.2a"><mrow id="S4.E3.m1.2.2" xref="S4.E3.m1.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.E3.m1.2.2.3" xref="S4.E3.m1.2.2.3.cmml">ℒ</mi><mo id="S4.E3.m1.2.2.2" xref="S4.E3.m1.2.2.2.cmml">=</mo><mrow id="S4.E3.m1.2.2.1" xref="S4.E3.m1.2.2.1.cmml"><mo id="S4.E3.m1.2.2.1a" xref="S4.E3.m1.2.2.1.cmml">−</mo><mrow id="S4.E3.m1.2.2.1.1" xref="S4.E3.m1.2.2.1.1.cmml"><munderover id="S4.E3.m1.2.2.1.1.2" xref="S4.E3.m1.2.2.1.1.2.cmml"><mo movablelimits="false" id="S4.E3.m1.2.2.1.1.2.2.2" xref="S4.E3.m1.2.2.1.1.2.2.2.cmml">∑</mo><mrow id="S4.E3.m1.2.2.1.1.2.2.3" xref="S4.E3.m1.2.2.1.1.2.2.3.cmml"><mi id="S4.E3.m1.2.2.1.1.2.2.3.2" xref="S4.E3.m1.2.2.1.1.2.2.3.2.cmml">t</mi><mo id="S4.E3.m1.2.2.1.1.2.2.3.1" xref="S4.E3.m1.2.2.1.1.2.2.3.1.cmml">=</mo><mn id="S4.E3.m1.2.2.1.1.2.2.3.3" xref="S4.E3.m1.2.2.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S4.E3.m1.2.2.1.1.2.3" xref="S4.E3.m1.2.2.1.1.2.3.cmml">T</mi></munderover><mrow id="S4.E3.m1.2.2.1.1.1" xref="S4.E3.m1.2.2.1.1.1.cmml"><mrow id="S4.E3.m1.2.2.1.1.1.3" xref="S4.E3.m1.2.2.1.1.1.3.cmml"><mi id="S4.E3.m1.2.2.1.1.1.3.1" xref="S4.E3.m1.2.2.1.1.1.3.1.cmml">log</mi><mo lspace="0.167em" id="S4.E3.m1.2.2.1.1.1.3a" xref="S4.E3.m1.2.2.1.1.1.3.cmml">⁡</mo><mi id="S4.E3.m1.2.2.1.1.1.3.2" xref="S4.E3.m1.2.2.1.1.1.3.2.cmml">p</mi></mrow><mo lspace="0em" rspace="0em" id="S4.E3.m1.2.2.1.1.1.2" xref="S4.E3.m1.2.2.1.1.1.2.cmml">​</mo><mrow id="S4.E3.m1.2.2.1.1.1.1.1" xref="S4.E3.m1.2.2.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E3.m1.2.2.1.1.1.1.1.2" xref="S4.E3.m1.2.2.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E3.m1.2.2.1.1.1.1.1.1" xref="S4.E3.m1.2.2.1.1.1.1.1.1.cmml"><msub id="S4.E3.m1.2.2.1.1.1.1.1.1.3" xref="S4.E3.m1.2.2.1.1.1.1.1.1.3.cmml"><mi id="S4.E3.m1.2.2.1.1.1.1.1.1.3.2" xref="S4.E3.m1.2.2.1.1.1.1.1.1.3.2.cmml">y</mi><mi id="S4.E3.m1.2.2.1.1.1.1.1.1.3.3" xref="S4.E3.m1.2.2.1.1.1.1.1.1.3.3.cmml">t</mi></msub><mo id="S4.E3.m1.2.2.1.1.1.1.1.1.2" xref="S4.E3.m1.2.2.1.1.1.1.1.1.2.cmml">∣</mo><mrow id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.2.cmml"><msub id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.cmml"><mi id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.2" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml">y</mi><mrow id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.2" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.1" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.3" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.cmml">t</mi></mrow></msub><mo id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.2" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.2.cmml">,</mo><mi id="S4.E3.m1.1.1" xref="S4.E3.m1.1.1.cmml">Z</mi></mrow></mrow><mo stretchy="false" id="S4.E3.m1.2.2.1.1.1.1.1.3" xref="S4.E3.m1.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.E3.m1.2b"><apply id="S4.E3.m1.2.2.cmml" xref="S4.E3.m1.2.2"><eq id="S4.E3.m1.2.2.2.cmml" xref="S4.E3.m1.2.2.2"></eq><ci id="S4.E3.m1.2.2.3.cmml" xref="S4.E3.m1.2.2.3">ℒ</ci><apply id="S4.E3.m1.2.2.1.cmml" xref="S4.E3.m1.2.2.1"><minus id="S4.E3.m1.2.2.1.2.cmml" xref="S4.E3.m1.2.2.1"></minus><apply id="S4.E3.m1.2.2.1.1.cmml" xref="S4.E3.m1.2.2.1.1"><apply id="S4.E3.m1.2.2.1.1.2.cmml" xref="S4.E3.m1.2.2.1.1.2"><csymbol cd="ambiguous" id="S4.E3.m1.2.2.1.1.2.1.cmml" xref="S4.E3.m1.2.2.1.1.2">superscript</csymbol><apply id="S4.E3.m1.2.2.1.1.2.2.cmml" xref="S4.E3.m1.2.2.1.1.2"><csymbol cd="ambiguous" id="S4.E3.m1.2.2.1.1.2.2.1.cmml" xref="S4.E3.m1.2.2.1.1.2">subscript</csymbol><sum id="S4.E3.m1.2.2.1.1.2.2.2.cmml" xref="S4.E3.m1.2.2.1.1.2.2.2"></sum><apply id="S4.E3.m1.2.2.1.1.2.2.3.cmml" xref="S4.E3.m1.2.2.1.1.2.2.3"><eq id="S4.E3.m1.2.2.1.1.2.2.3.1.cmml" xref="S4.E3.m1.2.2.1.1.2.2.3.1"></eq><ci id="S4.E3.m1.2.2.1.1.2.2.3.2.cmml" xref="S4.E3.m1.2.2.1.1.2.2.3.2">𝑡</ci><cn type="integer" id="S4.E3.m1.2.2.1.1.2.2.3.3.cmml" xref="S4.E3.m1.2.2.1.1.2.2.3.3">1</cn></apply></apply><ci id="S4.E3.m1.2.2.1.1.2.3.cmml" xref="S4.E3.m1.2.2.1.1.2.3">𝑇</ci></apply><apply id="S4.E3.m1.2.2.1.1.1.cmml" xref="S4.E3.m1.2.2.1.1.1"><times id="S4.E3.m1.2.2.1.1.1.2.cmml" xref="S4.E3.m1.2.2.1.1.1.2"></times><apply id="S4.E3.m1.2.2.1.1.1.3.cmml" xref="S4.E3.m1.2.2.1.1.1.3"><log id="S4.E3.m1.2.2.1.1.1.3.1.cmml" xref="S4.E3.m1.2.2.1.1.1.3.1"></log><ci id="S4.E3.m1.2.2.1.1.1.3.2.cmml" xref="S4.E3.m1.2.2.1.1.1.3.2">𝑝</ci></apply><apply id="S4.E3.m1.2.2.1.1.1.1.1.1.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1"><csymbol cd="latexml" id="S4.E3.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.2">conditional</csymbol><apply id="S4.E3.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S4.E3.m1.2.2.1.1.1.1.1.1.3.1.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.3">subscript</csymbol><ci id="S4.E3.m1.2.2.1.1.1.1.1.1.3.2.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.3.2">𝑦</ci><ci id="S4.E3.m1.2.2.1.1.1.1.1.1.3.3.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.3.3">𝑡</ci></apply><list id="S4.E3.m1.2.2.1.1.1.1.1.1.1.2.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1"><apply id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.2">𝑦</ci><apply id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3"><lt id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S4.E3.m1.2.2.1.1.1.1.1.1.1.1.1.3.3">𝑡</ci></apply></apply><ci id="S4.E3.m1.1.1.cmml" xref="S4.E3.m1.1.1">𝑍</ci></list></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E3.m1.2c">\mathcal{L}=-\sum_{t=1}^{T}\log p(y_{t}\mid y_{&lt;t},Z)</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
<p id="S4.SS2.p3.8" class="ltx_p">where <math id="S4.SS2.p3.1.m1.1" class="ltx_Math" alttext="y_{t}" display="inline"><semantics id="S4.SS2.p3.1.m1.1a"><msub id="S4.SS2.p3.1.m1.1.1" xref="S4.SS2.p3.1.m1.1.1.cmml"><mi id="S4.SS2.p3.1.m1.1.1.2" xref="S4.SS2.p3.1.m1.1.1.2.cmml">y</mi><mi id="S4.SS2.p3.1.m1.1.1.3" xref="S4.SS2.p3.1.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.1.m1.1b"><apply id="S4.SS2.p3.1.m1.1.1.cmml" xref="S4.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p3.1.m1.1.1.1.cmml" xref="S4.SS2.p3.1.m1.1.1">subscript</csymbol><ci id="S4.SS2.p3.1.m1.1.1.2.cmml" xref="S4.SS2.p3.1.m1.1.1.2">𝑦</ci><ci id="S4.SS2.p3.1.m1.1.1.3.cmml" xref="S4.SS2.p3.1.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.1.m1.1c">y_{t}</annotation></semantics></math> denotes the token at position <math id="S4.SS2.p3.2.m2.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S4.SS2.p3.2.m2.1a"><mi id="S4.SS2.p3.2.m2.1.1" xref="S4.SS2.p3.2.m2.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.2.m2.1b"><ci id="S4.SS2.p3.2.m2.1.1.cmml" xref="S4.SS2.p3.2.m2.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.2.m2.1c">t</annotation></semantics></math> in the output sequence, <math id="S4.SS2.p3.3.m3.1" class="ltx_Math" alttext="y_{&lt;t}" display="inline"><semantics id="S4.SS2.p3.3.m3.1a"><msub id="S4.SS2.p3.3.m3.1.1" xref="S4.SS2.p3.3.m3.1.1.cmml"><mi id="S4.SS2.p3.3.m3.1.1.2" xref="S4.SS2.p3.3.m3.1.1.2.cmml">y</mi><mrow id="S4.SS2.p3.3.m3.1.1.3" xref="S4.SS2.p3.3.m3.1.1.3.cmml"><mi id="S4.SS2.p3.3.m3.1.1.3.2" xref="S4.SS2.p3.3.m3.1.1.3.2.cmml"></mi><mo id="S4.SS2.p3.3.m3.1.1.3.1" xref="S4.SS2.p3.3.m3.1.1.3.1.cmml">&lt;</mo><mi id="S4.SS2.p3.3.m3.1.1.3.3" xref="S4.SS2.p3.3.m3.1.1.3.3.cmml">t</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.3.m3.1b"><apply id="S4.SS2.p3.3.m3.1.1.cmml" xref="S4.SS2.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS2.p3.3.m3.1.1.1.cmml" xref="S4.SS2.p3.3.m3.1.1">subscript</csymbol><ci id="S4.SS2.p3.3.m3.1.1.2.cmml" xref="S4.SS2.p3.3.m3.1.1.2">𝑦</ci><apply id="S4.SS2.p3.3.m3.1.1.3.cmml" xref="S4.SS2.p3.3.m3.1.1.3"><lt id="S4.SS2.p3.3.m3.1.1.3.1.cmml" xref="S4.SS2.p3.3.m3.1.1.3.1"></lt><csymbol cd="latexml" id="S4.SS2.p3.3.m3.1.1.3.2.cmml" xref="S4.SS2.p3.3.m3.1.1.3.2">absent</csymbol><ci id="S4.SS2.p3.3.m3.1.1.3.3.cmml" xref="S4.SS2.p3.3.m3.1.1.3.3">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.3.m3.1c">y_{&lt;t}</annotation></semantics></math> represents the preceding tokens, and <math id="S4.SS2.p3.4.m4.1" class="ltx_Math" alttext="Z" display="inline"><semantics id="S4.SS2.p3.4.m4.1a"><mi id="S4.SS2.p3.4.m4.1.1" xref="S4.SS2.p3.4.m4.1.1.cmml">Z</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.4.m4.1b"><ci id="S4.SS2.p3.4.m4.1.1.cmml" xref="S4.SS2.p3.4.m4.1.1">𝑍</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.4.m4.1c">Z</annotation></semantics></math> is the feature vector generated through Equation <a href="#S4.E1" title="In IV-A HDNet Architecture ‣ IV FRAMEWORK ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>. <math id="S4.SS2.p3.5.m5.1" class="ltx_Math" alttext="\mathcal{L}_{i}" display="inline"><semantics id="S4.SS2.p3.5.m5.1a"><msub id="S4.SS2.p3.5.m5.1.1" xref="S4.SS2.p3.5.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p3.5.m5.1.1.2" xref="S4.SS2.p3.5.m5.1.1.2.cmml">ℒ</mi><mi id="S4.SS2.p3.5.m5.1.1.3" xref="S4.SS2.p3.5.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.5.m5.1b"><apply id="S4.SS2.p3.5.m5.1.1.cmml" xref="S4.SS2.p3.5.m5.1.1"><csymbol cd="ambiguous" id="S4.SS2.p3.5.m5.1.1.1.cmml" xref="S4.SS2.p3.5.m5.1.1">subscript</csymbol><ci id="S4.SS2.p3.5.m5.1.1.2.cmml" xref="S4.SS2.p3.5.m5.1.1.2">ℒ</ci><ci id="S4.SS2.p3.5.m5.1.1.3.cmml" xref="S4.SS2.p3.5.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.5.m5.1c">\mathcal{L}_{i}</annotation></semantics></math> represents the loss for each sub-formula, capturing the intricate details of complex formulas. This sub-formula loss is included to balance the overall recognition of the entire formula with the detailed parsing of its components. The parameter <math id="S4.SS2.p3.6.m6.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.p3.6.m6.1a"><mi id="S4.SS2.p3.6.m6.1.1" xref="S4.SS2.p3.6.m6.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.6.m6.1b"><ci id="S4.SS2.p3.6.m6.1.1.cmml" xref="S4.SS2.p3.6.m6.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.6.m6.1c">\alpha</annotation></semantics></math> controls the trade-off between the primary formula recognition loss (<math id="S4.SS2.p3.7.m7.1" class="ltx_Math" alttext="\mathcal{L}_{\text{main}}" display="inline"><semantics id="S4.SS2.p3.7.m7.1a"><msub id="S4.SS2.p3.7.m7.1.1" xref="S4.SS2.p3.7.m7.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p3.7.m7.1.1.2" xref="S4.SS2.p3.7.m7.1.1.2.cmml">ℒ</mi><mtext id="S4.SS2.p3.7.m7.1.1.3" xref="S4.SS2.p3.7.m7.1.1.3a.cmml">main</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.7.m7.1b"><apply id="S4.SS2.p3.7.m7.1.1.cmml" xref="S4.SS2.p3.7.m7.1.1"><csymbol cd="ambiguous" id="S4.SS2.p3.7.m7.1.1.1.cmml" xref="S4.SS2.p3.7.m7.1.1">subscript</csymbol><ci id="S4.SS2.p3.7.m7.1.1.2.cmml" xref="S4.SS2.p3.7.m7.1.1.2">ℒ</ci><ci id="S4.SS2.p3.7.m7.1.1.3a.cmml" xref="S4.SS2.p3.7.m7.1.1.3"><mtext mathsize="70%" id="S4.SS2.p3.7.m7.1.1.3.cmml" xref="S4.SS2.p3.7.m7.1.1.3">main</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.7.m7.1c">\mathcal{L}_{\text{main}}</annotation></semantics></math>) and the sub-formula losses (<math id="S4.SS2.p3.8.m8.1" class="ltx_Math" alttext="\mathcal{L}_{i}" display="inline"><semantics id="S4.SS2.p3.8.m8.1a"><msub id="S4.SS2.p3.8.m8.1.1" xref="S4.SS2.p3.8.m8.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p3.8.m8.1.1.2" xref="S4.SS2.p3.8.m8.1.1.2.cmml">ℒ</mi><mi id="S4.SS2.p3.8.m8.1.1.3" xref="S4.SS2.p3.8.m8.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.8.m8.1b"><apply id="S4.SS2.p3.8.m8.1.1.cmml" xref="S4.SS2.p3.8.m8.1.1"><csymbol cd="ambiguous" id="S4.SS2.p3.8.m8.1.1.1.cmml" xref="S4.SS2.p3.8.m8.1.1">subscript</csymbol><ci id="S4.SS2.p3.8.m8.1.1.2.cmml" xref="S4.SS2.p3.8.m8.1.1.2">ℒ</ci><ci id="S4.SS2.p3.8.m8.1.1.3.cmml" xref="S4.SS2.p3.8.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.8.m8.1c">\mathcal{L}_{i}</annotation></semantics></math>), ensuring a balanced optimization that improves both formula recognition accuracy and detailed parsing.</p>
</div>
<div id="S4.SS2.p4" class="ltx_para">
<p id="S4.SS2.p4.1" class="ltx_p">Through supervised parsing of formula details at a granular level, HDNet enhances the accuracy and robustness of MER models, effectively managing the complexities inherent in mathematical expressions.</p>
</div>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">V </span><span id="S5.1.1" class="ltx_text ltx_font_smallcaps">EXPERIMENTS</span>
</h2>

<section id="S5.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S5.SS1.5.1.1" class="ltx_text">V-A</span> </span><span id="S5.SS1.6.2" class="ltx_text ltx_font_italic">Fair Evaluation Metrics</span>
</h3>

<div id="S5.SS1.p1" class="ltx_para">
<p id="S5.SS1.p1.1" class="ltx_p">Traditional evaluation methods, limited to the character level, often fail to fairly assess models when mathematical formula images can be interpreted in multiple valid ways. The predicted results and ground truth labels may differ at the character level but render identically as images due to functionally equivalent LaTeX commands.</p>
</div>
<div id="S5.SS1.p2" class="ltx_para">
<p id="S5.SS1.p2.1" class="ltx_p">To overcome this, we propose a simple and efficient evaluation strategy that considers all valid parsing options for functionally equivalent expressions, as shown in Figure <a href="#S2.F2" title="Figure 2 ‣ II Related Work ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> (right). Our method replaces both the labels and model predictions with equivalent expressions before performing character-level evaluation. This approach accommodates a wider range of valid expressions and ensures a more robust and fair evaluation of model performance in recognizing and parsing complex formulas. By handling the variability in LaTeX-based formula generation, our strategy enhances the accuracy and fairness of character-level evaluations.
The character-level evaluation metrics we use include average sample edit distance, BLEU score, and character recall. Character recall is defined as <math id="S5.SS1.p2.1.m1.1" class="ltx_Math" alttext="CR=1-\frac{\text{Edit Distance}}{\text{Number of Characters}}" display="inline"><semantics id="S5.SS1.p2.1.m1.1a"><mrow id="S5.SS1.p2.1.m1.1.1" xref="S5.SS1.p2.1.m1.1.1.cmml"><mrow id="S5.SS1.p2.1.m1.1.1.2" xref="S5.SS1.p2.1.m1.1.1.2.cmml"><mi id="S5.SS1.p2.1.m1.1.1.2.2" xref="S5.SS1.p2.1.m1.1.1.2.2.cmml">C</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p2.1.m1.1.1.2.1" xref="S5.SS1.p2.1.m1.1.1.2.1.cmml">​</mo><mi id="S5.SS1.p2.1.m1.1.1.2.3" xref="S5.SS1.p2.1.m1.1.1.2.3.cmml">R</mi></mrow><mo id="S5.SS1.p2.1.m1.1.1.1" xref="S5.SS1.p2.1.m1.1.1.1.cmml">=</mo><mrow id="S5.SS1.p2.1.m1.1.1.3" xref="S5.SS1.p2.1.m1.1.1.3.cmml"><mn id="S5.SS1.p2.1.m1.1.1.3.2" xref="S5.SS1.p2.1.m1.1.1.3.2.cmml">1</mn><mo id="S5.SS1.p2.1.m1.1.1.3.1" xref="S5.SS1.p2.1.m1.1.1.3.1.cmml">−</mo><mfrac id="S5.SS1.p2.1.m1.1.1.3.3" xref="S5.SS1.p2.1.m1.1.1.3.3.cmml"><mtext id="S5.SS1.p2.1.m1.1.1.3.3.2" xref="S5.SS1.p2.1.m1.1.1.3.3.2a.cmml">Edit Distance</mtext><mtext id="S5.SS1.p2.1.m1.1.1.3.3.3" xref="S5.SS1.p2.1.m1.1.1.3.3.3a.cmml">Number of Characters</mtext></mfrac></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.1.m1.1b"><apply id="S5.SS1.p2.1.m1.1.1.cmml" xref="S5.SS1.p2.1.m1.1.1"><eq id="S5.SS1.p2.1.m1.1.1.1.cmml" xref="S5.SS1.p2.1.m1.1.1.1"></eq><apply id="S5.SS1.p2.1.m1.1.1.2.cmml" xref="S5.SS1.p2.1.m1.1.1.2"><times id="S5.SS1.p2.1.m1.1.1.2.1.cmml" xref="S5.SS1.p2.1.m1.1.1.2.1"></times><ci id="S5.SS1.p2.1.m1.1.1.2.2.cmml" xref="S5.SS1.p2.1.m1.1.1.2.2">𝐶</ci><ci id="S5.SS1.p2.1.m1.1.1.2.3.cmml" xref="S5.SS1.p2.1.m1.1.1.2.3">𝑅</ci></apply><apply id="S5.SS1.p2.1.m1.1.1.3.cmml" xref="S5.SS1.p2.1.m1.1.1.3"><minus id="S5.SS1.p2.1.m1.1.1.3.1.cmml" xref="S5.SS1.p2.1.m1.1.1.3.1"></minus><cn type="integer" id="S5.SS1.p2.1.m1.1.1.3.2.cmml" xref="S5.SS1.p2.1.m1.1.1.3.2">1</cn><apply id="S5.SS1.p2.1.m1.1.1.3.3.cmml" xref="S5.SS1.p2.1.m1.1.1.3.3"><divide id="S5.SS1.p2.1.m1.1.1.3.3.1.cmml" xref="S5.SS1.p2.1.m1.1.1.3.3"></divide><ci id="S5.SS1.p2.1.m1.1.1.3.3.2a.cmml" xref="S5.SS1.p2.1.m1.1.1.3.3.2"><mtext mathsize="70%" id="S5.SS1.p2.1.m1.1.1.3.3.2.cmml" xref="S5.SS1.p2.1.m1.1.1.3.3.2">Edit Distance</mtext></ci><ci id="S5.SS1.p2.1.m1.1.1.3.3.3a.cmml" xref="S5.SS1.p2.1.m1.1.1.3.3.3"><mtext mathsize="70%" id="S5.SS1.p2.1.m1.1.1.3.3.3.cmml" xref="S5.SS1.p2.1.m1.1.1.3.3.3">Number of Characters</mtext></ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.1.m1.1c">CR=1-\frac{\text{Edit Distance}}{\text{Number of Characters}}</annotation></semantics></math>.</p>
</div>
<figure id="S5.T2" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table II: </span>Performance comparison of various models on the HDR-Test dataset, evaluated using Character Recall (CR), Average Edit Distance (AED), and BLEU Score (BS). NF stands for Non-Fair evaluation, and F stands for Fair evaluation. Higher CR and BS values (↑) indicate better performance, while lower AED values (↓) are preferable.</figcaption>
<table id="S5.T2.1" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S5.T2.1.1.1" class="ltx_tr">
<th id="S5.T2.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.1.1.1.1" class="ltx_text ltx_font_bold">Model</span></th>
<th id="S5.T2.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-top:1pt;padding-bottom:1pt;" colspan="2"><span id="S5.T2.1.1.1.2.1" class="ltx_text ltx_font_bold">CR (↑)</span></th>
<th id="S5.T2.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-top:1pt;padding-bottom:1pt;" colspan="2"><span id="S5.T2.1.1.1.3.1" class="ltx_text ltx_font_bold">AED (↓)</span></th>
<th id="S5.T2.1.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-top:1pt;padding-bottom:1pt;" colspan="2"><span id="S5.T2.1.1.1.4.1" class="ltx_text ltx_font_bold">BS (↑)</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S5.T2.1.2.1" class="ltx_tr">
<td id="S5.T2.1.2.1.1" class="ltx_td" style="padding-top:1pt;padding-bottom:1pt;"></td>
<th id="S5.T2.1.2.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.2.1.2.1" class="ltx_text ltx_font_bold">NF</span></th>
<th id="S5.T2.1.2.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.2.1.3.1" class="ltx_text ltx_font_bold">F</span></th>
<th id="S5.T2.1.2.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.2.1.4.1" class="ltx_text ltx_font_bold">NF</span></th>
<th id="S5.T2.1.2.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.2.1.5.1" class="ltx_text ltx_font_bold">F</span></th>
<th id="S5.T2.1.2.1.6" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.2.1.6.1" class="ltx_text ltx_font_bold">NF</span></th>
<th id="S5.T2.1.2.1.7" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.2.1.7.1" class="ltx_text ltx_font_bold">F</span></th>
</tr>
<tr id="S5.T2.1.3.2" class="ltx_tr">
<td id="S5.T2.1.3.2.1" class="ltx_td ltx_align_left ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">Pix2tex</td>
<td id="S5.T2.1.3.2.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">0.278</td>
<td id="S5.T2.1.3.2.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">0.331</td>
<td id="S5.T2.1.3.2.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">249</td>
<td id="S5.T2.1.3.2.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">229</td>
<td id="S5.T2.1.3.2.6" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">0.303</td>
<td id="S5.T2.1.3.2.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">0.326</td>
</tr>
<tr id="S5.T2.1.4.3" class="ltx_tr">
<td id="S5.T2.1.4.3.1" class="ltx_td ltx_align_left" style="padding-top:1pt;padding-bottom:1pt;">Texify</td>
<td id="S5.T2.1.4.3.2" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.502</td>
<td id="S5.T2.1.4.3.3" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.531</td>
<td id="S5.T2.1.4.3.4" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">172</td>
<td id="S5.T2.1.4.3.5" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">158</td>
<td id="S5.T2.1.4.3.6" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.458</td>
<td id="S5.T2.1.4.3.7" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.481</td>
</tr>
<tr id="S5.T2.1.5.4" class="ltx_tr">
<td id="S5.T2.1.5.4.1" class="ltx_td ltx_align_left" style="padding-top:1pt;padding-bottom:1pt;">UniMERNet</td>
<td id="S5.T2.1.5.4.2" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.574</td>
<td id="S5.T2.1.5.4.3" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.618</td>
<td id="S5.T2.1.5.4.4" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">147</td>
<td id="S5.T2.1.5.4.5" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">125</td>
<td id="S5.T2.1.5.4.6" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.559</td>
<td id="S5.T2.1.5.4.7" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.615</td>
</tr>
<tr id="S5.T2.1.6.5" class="ltx_tr">
<td id="S5.T2.1.6.5.1" class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.6.5.1.1" class="ltx_text ltx_font_bold">HDNet</span></td>
<td id="S5.T2.1.6.5.2" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.6.5.2.1" class="ltx_text ltx_font_bold">0.952</span></td>
<td id="S5.T2.1.6.5.3" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.6.5.3.1" class="ltx_text ltx_font_bold">0.968</span></td>
<td id="S5.T2.1.6.5.4" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.6.5.4.1" class="ltx_text ltx_font_bold">16</span></td>
<td id="S5.T2.1.6.5.5" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.6.5.5.1" class="ltx_text ltx_font_bold">13</span></td>
<td id="S5.T2.1.6.5.6" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.6.5.6.1" class="ltx_text ltx_font_bold">0.925</span></td>
<td id="S5.T2.1.6.5.7" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T2.1.6.5.7.1" class="ltx_text ltx_font_bold">0.931</span></td>
</tr>
</tbody>
</table>
</figure>
</section>
<section id="S5.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S5.SS2.5.1.1" class="ltx_text">V-B</span> </span><span id="S5.SS2.6.2" class="ltx_text ltx_font_italic">Implementation Details</span>
</h3>

<div id="S5.SS2.p1" class="ltx_para ltx_noindent">
<p id="S5.SS2.p1.1" class="ltx_p"><span id="S5.SS2.p1.1.1" class="ltx_text ltx_font_bold">Datasets.</span>
We evaluated multiple models on the HDR-Test dataset. Additionally, we conducted evaluations on the public datasets Im2latex-100k <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite> and UniMER-1M <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>.</p>
</div>
<div id="S5.SS2.p2" class="ltx_para ltx_noindent">
<p id="S5.SS2.p2.2" class="ltx_p"><span id="S5.SS2.p2.2.1" class="ltx_text ltx_font_bold">Experimental settings.</span>
We utilized the optical character recognition (OCR) pretrained model, TrOCR-base <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite>, with both the encoder and decoder comprising 12 Transformer layers. The batch size was set to 4. Our model’s loss function includes the main image loss and sub-image loss (Eq. <a href="#S4.E2" title="In IV-B Loss Function ‣ IV FRAMEWORK ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>), balanced by a coefficient <math id="S5.SS2.p2.1.m1.1" class="ltx_Math" alttext="\alpha=0.2" display="inline"><semantics id="S5.SS2.p2.1.m1.1a"><mrow id="S5.SS2.p2.1.m1.1.1" xref="S5.SS2.p2.1.m1.1.1.cmml"><mi id="S5.SS2.p2.1.m1.1.1.2" xref="S5.SS2.p2.1.m1.1.1.2.cmml">α</mi><mo id="S5.SS2.p2.1.m1.1.1.1" xref="S5.SS2.p2.1.m1.1.1.1.cmml">=</mo><mn id="S5.SS2.p2.1.m1.1.1.3" xref="S5.SS2.p2.1.m1.1.1.3.cmml">0.2</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.1.m1.1b"><apply id="S5.SS2.p2.1.m1.1.1.cmml" xref="S5.SS2.p2.1.m1.1.1"><eq id="S5.SS2.p2.1.m1.1.1.1.cmml" xref="S5.SS2.p2.1.m1.1.1.1"></eq><ci id="S5.SS2.p2.1.m1.1.1.2.cmml" xref="S5.SS2.p2.1.m1.1.1.2">𝛼</ci><cn type="float" id="S5.SS2.p2.1.m1.1.1.3.cmml" xref="S5.SS2.p2.1.m1.1.1.3">0.2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.1.m1.1c">\alpha=0.2</annotation></semantics></math>. The image size was set to (448, 448), with <math id="S5.SS2.p2.2.m2.1" class="ltx_Math" alttext="n=4" display="inline"><semantics id="S5.SS2.p2.2.m2.1a"><mrow id="S5.SS2.p2.2.m2.1.1" xref="S5.SS2.p2.2.m2.1.1.cmml"><mi id="S5.SS2.p2.2.m2.1.1.2" xref="S5.SS2.p2.2.m2.1.1.2.cmml">n</mi><mo id="S5.SS2.p2.2.m2.1.1.1" xref="S5.SS2.p2.2.m2.1.1.1.cmml">=</mo><mn id="S5.SS2.p2.2.m2.1.1.3" xref="S5.SS2.p2.2.m2.1.1.3.cmml">4</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.2.m2.1b"><apply id="S5.SS2.p2.2.m2.1.1.cmml" xref="S5.SS2.p2.2.m2.1.1"><eq id="S5.SS2.p2.2.m2.1.1.1.cmml" xref="S5.SS2.p2.2.m2.1.1.1"></eq><ci id="S5.SS2.p2.2.m2.1.1.2.cmml" xref="S5.SS2.p2.2.m2.1.1.2">𝑛</ci><cn type="integer" id="S5.SS2.p2.2.m2.1.1.3.cmml" xref="S5.SS2.p2.2.m2.1.1.3">4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.2.m2.1c">n=4</annotation></semantics></math> sub-image segments per sample. We used the AdamW <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite> optimizer with an initial learning rate of 1e-4 and trained all models for 100 epochs with a batch size of 32 on 8 NVIDIA A100-80G GPUs.</p>
</div>
</section>
<section id="S5.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S5.SS3.5.1.1" class="ltx_text">V-C</span> </span><span id="S5.SS3.6.2" class="ltx_text ltx_font_italic">Overall Results</span>
</h3>

<div id="S5.SS3.p1" class="ltx_para">
<p id="S5.SS3.p1.1" class="ltx_p">We compared our method with three main baseline methods, including Pix2tex <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>, Texify <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite>, and UniMERNet <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>.
As presented in Table <a href="#S5.T2" title="Table II ‣ V-A Fair Evaluation Metrics ‣ V EXPERIMENTS ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag">II</span></a>, our model (HDNet) outperforms the baseline methods across all metrics. For character recall, HDNet achieves the highest scores, with 0.952 in the non-fair setting and 0.968 in the fair setting, reflecting a more accurate recognition of individual characters compared to Pix2tex, Texify, and UniMERNet. In terms of average edit distance, HDNet exhibits the lowest values, with 16 in the non-fair setting and 13 in the fair setting, indicating fewer errors in formula reconstruction. Additionally, HDNet records the highest BLEU scores of 0.925 and 0.931 for non-fair and fair settings respectively, demonstrating superior performance in capturing the semantic content of formulas. These results highlight the effectiveness of our model in handling complex formulas, particularly in scenarios where detailed expression parsing is critical.</p>
</div>
<figure id="S5.T3" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table III: </span>
Results of different models on the <span id="S5.T3.3.1" class="ltx_text ltx_font_smallcaps">Im2latex-100k</span> and <span id="S5.T3.4.2" class="ltx_text ltx_font_smallcaps">UniMER-1M</span> datasets. CR stands for Character Recall, and Fair-CR refers to Fair Character Recall.</figcaption>
<table id="S5.T3.5" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S5.T3.5.1.1" class="ltx_tr">
<th id="S5.T3.5.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T3.5.1.1.1.1" class="ltx_text ltx_font_bold">Model</span></th>
<th id="S5.T3.5.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-top:1pt;padding-bottom:1pt;" colspan="2"><span id="S5.T3.5.1.1.2.1" class="ltx_text ltx_font_bold">Im2latex-100k</span></th>
<th id="S5.T3.5.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-top:1pt;padding-bottom:1pt;" colspan="2"><span id="S5.T3.5.1.1.3.1" class="ltx_text ltx_font_bold">UniMER-1M</span></th>
</tr>
<tr id="S5.T3.5.2.2" class="ltx_tr">
<th id="S5.T3.5.2.2.1" class="ltx_td ltx_th ltx_th_row" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th id="S5.T3.5.2.2.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T3.5.2.2.2.1" class="ltx_text ltx_font_bold">CR</span></th>
<th id="S5.T3.5.2.2.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T3.5.2.2.3.1" class="ltx_text ltx_font_bold">Fair-CR</span></th>
<th id="S5.T3.5.2.2.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T3.5.2.2.4.1" class="ltx_text ltx_font_bold">CR</span></th>
<th id="S5.T3.5.2.2.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T3.5.2.2.5.1" class="ltx_text ltx_font_bold">Fair-CR</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S5.T3.5.3.1" class="ltx_tr">
<th id="S5.T3.5.3.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">Pix2tex</th>
<td id="S5.T3.5.3.1.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">0.912</td>
<td id="S5.T3.5.3.1.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">0.913</td>
<td id="S5.T3.5.3.1.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">0.465</td>
<td id="S5.T3.5.3.1.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">0.493</td>
</tr>
<tr id="S5.T3.5.4.2" class="ltx_tr">
<th id="S5.T3.5.4.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row" style="padding-top:1pt;padding-bottom:1pt;">Texify</th>
<td id="S5.T3.5.4.2.2" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.939</td>
<td id="S5.T3.5.4.2.3" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.944</td>
<td id="S5.T3.5.4.2.4" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.708</td>
<td id="S5.T3.5.4.2.5" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.727</td>
</tr>
<tr id="S5.T3.5.5.3" class="ltx_tr">
<th id="S5.T3.5.5.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row" style="padding-top:1pt;padding-bottom:1pt;">UniMERNet</th>
<td id="S5.T3.5.5.3.2" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.942</td>
<td id="S5.T3.5.5.3.3" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.948</td>
<td id="S5.T3.5.5.3.4" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.908</td>
<td id="S5.T3.5.5.3.5" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.911</td>
</tr>
<tr id="S5.T3.5.6.4" class="ltx_tr">
<th id="S5.T3.5.6.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T3.5.6.4.1.1" class="ltx_text ltx_font_bold">HDNet</span></th>
<td id="S5.T3.5.6.4.2" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T3.5.6.4.2.1" class="ltx_text ltx_font_bold">0.979</span></td>
<td id="S5.T3.5.6.4.3" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T3.5.6.4.3.1" class="ltx_text ltx_font_bold">0.982</span></td>
<td id="S5.T3.5.6.4.4" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T3.5.6.4.4.1" class="ltx_text ltx_font_bold">0.951</span></td>
<td id="S5.T3.5.6.4.5" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T3.5.6.4.5.1" class="ltx_text ltx_font_bold">0.963</span></td>
</tr>
</tbody>
</table>
</figure>
<div id="S5.SS3.p2" class="ltx_para">
<p id="S5.SS3.p2.1" class="ltx_p">We also evaluated our model on public datasets, including Im2latex-100k <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite> and UniMER-1M <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>. As shown in Table <a href="#S5.T3" title="Table III ‣ V-C Overall Results ‣ V EXPERIMENTS ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag">III</span></a>, HDNet outperforms baseline models on both datasets. On Im2latex-100k, HDNet achieves a character recall (CR) of 0.979 and fair character recall (Fair-CR) of 0.982, surpassing UniMERNet’s 0.942 CR and 0.948 Fair-CR. Similarly, on UniMER-1M, HDNet attains 0.951 CR and 0.963 Fair-CR, outperforming UniMERNet’s 0.908 CR and 0.911 Fair-CR. These results demonstrate HDNet’s superior generalization and accuracy.</p>
</div>
</section>
<section id="S5.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S5.SS4.5.1.1" class="ltx_text">V-D</span> </span><span id="S5.SS4.6.2" class="ltx_text ltx_font_italic">Ablation Studies</span>
</h3>

<div id="S5.SS4.p1" class="ltx_para">
<p id="S5.SS4.p1.1" class="ltx_p">To demonstrate the effectiveness of the hierarchical sub-formula module, we conducted ablation experiments comparing four approaches: without cropping, full random cropping, full sub-formula cropping, and a combination of sub-formula and random cropping, as shown in Table <a href="#S5.T4" title="Table IV ‣ V-D Ablation Studies ‣ V EXPERIMENTS ‣ Enhancing Complex Formula Recognition with Hierarchical Detail-Focused Network *Corresponding author. Email: yujunhui3@360.cn" class="ltx_ref"><span class="ltx_text ltx_ref_tag">IV</span></a>.</p>
</div>
<figure id="S5.T4" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table IV: </span>Ablation study comparing different cropping methods in formula recognition on HDR-Test set.</figcaption>
<table id="S5.T4.1" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S5.T4.1.1.1" class="ltx_tr">
<th id="S5.T4.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T4.1.1.1.1.1" class="ltx_text ltx_font_bold">Method</span></th>
<th id="S5.T4.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T4.1.1.1.2.1" class="ltx_text ltx_font_bold">CR</span></th>
<th id="S5.T4.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-top:1pt;padding-bottom:1pt;"><span id="S5.T4.1.1.1.3.1" class="ltx_text ltx_font_bold">Fair-CR</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S5.T4.1.2.1" class="ltx_tr">
<th id="S5.T4.1.2.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">w/o Crop</th>
<td id="S5.T4.1.2.1.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">0.929</td>
<td id="S5.T4.1.2.1.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1pt;padding-bottom:1pt;">0.937</td>
</tr>
<tr id="S5.T4.1.3.2" class="ltx_tr">
<th id="S5.T4.1.3.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row" style="padding-top:1pt;padding-bottom:1pt;">Full Random Crop</th>
<td id="S5.T4.1.3.2.2" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.940</td>
<td id="S5.T4.1.3.2.3" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.955</td>
</tr>
<tr id="S5.T4.1.4.3" class="ltx_tr">
<th id="S5.T4.1.4.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row" style="padding-top:1pt;padding-bottom:1pt;">Full Sub-Formula Crop</th>
<td id="S5.T4.1.4.3.2" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.816</td>
<td id="S5.T4.1.4.3.3" class="ltx_td ltx_align_center" style="padding-top:1pt;padding-bottom:1pt;">0.837</td>
</tr>
<tr id="S5.T4.1.5.4" class="ltx_tr">
<th id="S5.T4.1.5.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" style="padding-top:1pt;padding-bottom:1pt;">Sub-Formula + Random Crop</th>
<td id="S5.T4.1.5.4.2" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1pt;padding-bottom:1pt;">0.952</td>
<td id="S5.T4.1.5.4.3" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1pt;padding-bottom:1pt;">0.968</td>
</tr>
</tbody>
</table>
</figure>
<div id="S5.SS4.p2" class="ltx_para">
<p id="S5.SS4.p2.1" class="ltx_p">The results show that combining sub-formula and random cropping yields the best performance. Sub-formula cropping provides accurate labels and detailed structures, while random cropping improves adaptability during inference without predefined sub-formulas. Full sub-formula cropping performs the worst due to a mismatch between training, where sub-formulas are used, and inference, where they cannot be extracted.</p>
</div>
</section>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">VI </span><span id="S6.1.1" class="ltx_text ltx_font_smallcaps">Conclusion</span>
</h2>

<div id="S6.p1" class="ltx_para">
<p id="S6.p1.1" class="ltx_p">In this paper, we propose a general formula subgraph framework that enhances model focus on the details of mathematical expressions. We also introduce the HFD-100M dataset, a valuable resource for future MER research. Additionally, we refine existing evaluation methods to ensure more equitable comparisons between models.</p>
</div>
<div id="S6.p2" class="ltx_para ltx_noindent">
<p id="S6.p2.1" class="ltx_p"><span id="S6.p2.1.1" class="ltx_text ltx_font_bold">Limitations.</span>
Our model is primarily designed for complex formula structures, so the improvement on non-complex structures is minimal, as existing methods already perform well on simpler formulas.</p>
</div>
</section>
<section id="Sx1" class="ltx_section">
<h2 class="ltx_title ltx_font_smallcaps ltx_title_section">Acknowledgement</h2>

<div id="Sx1.p1" class="ltx_para">
<p id="Sx1.p1.1" class="ltx_p">The authors thank their colleagues for their support.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Kam-Fai Chan and Dit-Yan Yeung,

</span>
<span class="ltx_bibblock">“Mathematical expression recognition: a survey,”

</span>
<span class="ltx_bibblock"><span id="bib.bib1.1.1" class="ltx_text ltx_font_italic">Int. J. Document Anal. Recognit.</span>, vol. 3, no. 1, pp. 3–15, 2000.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
David R Wilkins,

</span>
<span class="ltx_bibblock">“Getting started with latex,”

</span>
<span class="ltx_bibblock"><span id="bib.bib2.1.1" class="ltx_text ltx_font_italic">Copyright David R. Wilkins</span>, vol. 9, 1995.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Bin Wang, Zhuangcheng Gu, Chao Xu, Bo Zhang, Botian Shi, and Conghui He,

</span>
<span class="ltx_bibblock">“Unimernet: A universal network for real-world mathematical expression recognition,”

</span>
<span class="ltx_bibblock"><span id="bib.bib3.1.1" class="ltx_text ltx_font_italic">CoRR</span>, vol. abs/2404.15254, 2024.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
OleehyO,

</span>
<span class="ltx_bibblock">“Texteller: A tool for automatic latex formula generation,” 2024,

</span>
<span class="ltx_bibblock">Accessed: 2024-09-09.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Vinay Kukreja and Sakshi,

</span>
<span class="ltx_bibblock">“Machine learning models for mathematical symbol recognition: A stem to stern literature analysis,”

</span>
<span class="ltx_bibblock"><span id="bib.bib5.1.1" class="ltx_text ltx_font_italic">Multim. Tools Appl.</span>, vol. 81, no. 20, pp. 28651–28687, 2022.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Kam-Fai Chan and Dit-Yan Yeung,

</span>
<span class="ltx_bibblock">“Error detection, error correction and performance evaluation in on-line mathematical expression recognition,”

</span>
<span class="ltx_bibblock"><span id="bib.bib6.1.1" class="ltx_text ltx_font_italic">Pattern Recognit.</span>, vol. 34, no. 8, pp. 1671–1684, 2001.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
A Vaswani,

</span>
<span class="ltx_bibblock">“Attention is all you need,”

</span>
<span class="ltx_bibblock"><span id="bib.bib7.1.1" class="ltx_text ltx_font_italic">Advances in Neural Information Processing Systems</span>, 2017.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Mahshad Mahdavi, Richard Zanibbi, Harold Mouchère, Christian Viard-Gaudin, and Utpal Garain,

</span>
<span class="ltx_bibblock">“ICDAR 2019 CROHME + TFD: competition on recognition of handwritten mathematical expressions and typeset formula detection,”

</span>
<span class="ltx_bibblock">in <span id="bib.bib8.1.1" class="ltx_text ltx_font_italic">2019 International Conference on Document Analysis and Recognition, ICDAR 2019, Sydney, Australia, September 20-25, 2019</span>. 2019, pp. 1533–1538, IEEE.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Vik Paruchuri,

</span>
<span class="ltx_bibblock">“Texify: Convert excel or csv to latex tables,” 2024,

</span>
<span class="ltx_bibblock">Accessed: 2024-09-09.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Bohan Li, Ye Yuan, Dingkang Liang, Xiao Liu, Zhilong Ji, Jinfeng Bai, Wenyu Liu, and Xiang Bai,

</span>
<span class="ltx_bibblock">“When counting meets HMER: counting-aware network for handwritten mathematical expression recognition,”

</span>
<span class="ltx_bibblock">in <span id="bib.bib10.1.1" class="ltx_text ltx_font_italic">Computer Vision - ECCV 2022 - 17th European Conference, Tel Aviv, Israel, October 23-27, 2022, Proceedings, Part XXVIII</span>, Shai Avidan, Gabriel J. Brostow, Moustapha Cissé, Giovanni Maria Farinella, and Tal Hassner, Eds. 2022, vol. 13688 of <span id="bib.bib10.2.2" class="ltx_text ltx_font_italic">Lecture Notes in Computer Science</span>, pp. 197–214, Springer.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Anh Duc Le, Bipin Indurkhya, and Masaki Nakagawa,

</span>
<span class="ltx_bibblock">“Pattern generation strategies for improving recognition of handwritten mathematical expressions,”

</span>
<span class="ltx_bibblock"><span id="bib.bib11.1.1" class="ltx_text ltx_font_italic">Pattern Recognit. Lett.</span>, vol. 128, pp. 255–262, 2019.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Xiaohang Bian, Bo Qin, Xiaozhe Xin, Jianwu Li, Xuefeng Su, and Yanfeng Wang,

</span>
<span class="ltx_bibblock">“Handwritten mathematical expression recognition via attention aggregation based bi-directional mutual learning,”

</span>
<span class="ltx_bibblock">in <span id="bib.bib12.1.1" class="ltx_text ltx_font_italic">Thirty-Sixth AAAI Conference on Artificial Intelligence, AAAI 2022, Thirty-Fourth Conference on Innovative Applications of Artificial Intelligence, IAAI 2022, The Twelveth Symposium on Educational Advances in Artificial Intelligence, EAAI 2022 Virtual Event, February 22 - March 1, 2022</span>. 2022, pp. 113–121, AAAI Press.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Zuoyu Yan, Xiaode Zhang, Liangcai Gao, Ke Yuan, and Zhi Tang,

</span>
<span class="ltx_bibblock">“Convmath: A convolutional sequence network for mathematical expression recognition,”

</span>
<span class="ltx_bibblock">in <span id="bib.bib13.1.1" class="ltx_text ltx_font_italic">25th International Conference on Pattern Recognition, ICPR 2020, Virtual Event / Milan, Italy, January 10-15, 2021</span>. 2020, pp. 4566–4572, IEEE.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Jianshu Zhang, Jun Du, Shiliang Zhang, Dan Liu, Yulong Hu, Jin-Shui Hu, Si Wei, and Li-Rong Dai,

</span>
<span class="ltx_bibblock">“Watch, attend and parse: An end-to-end neural network based approach to handwritten mathematical expression recognition,”

</span>
<span class="ltx_bibblock"><span id="bib.bib14.1.1" class="ltx_text ltx_font_italic">Pattern Recognit.</span>, vol. 71, pp. 196–206, 2017.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Zhe Li, Lianwen Jin, Songxuan Lai, and Yecheng Zhu,

</span>
<span class="ltx_bibblock">“Improving attention-based handwritten mathematical expression recognition with scale augmentation and drop attention,”

</span>
<span class="ltx_bibblock">in <span id="bib.bib15.1.1" class="ltx_text ltx_font_italic">17th International Conference on Frontiers in Handwriting Recognition, ICFHR 2020, Dortmund, Germany, September 8-10, 2020</span>. 2020, pp. 175–180, IEEE.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Haoran Wei, Lingyu Kong, Jinyue Chen, Liang Zhao, Zheng Ge, Jinrong Yang, Jianjian Sun, Chunrui Han, and Xiangyu Zhang,

</span>
<span class="ltx_bibblock">“Vary: Scaling up the vision vocabulary for large vision-language models,”

</span>
<span class="ltx_bibblock"><span id="bib.bib16.1.1" class="ltx_text ltx_font_italic">CoRR</span>, vol. abs/2312.06109, 2023.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Alexey Dosovitskiy, Lucas Beyer, Alexander Kolesnikov, Dirk Weissenborn, Xiaohua Zhai, Thomas Unterthiner, Mostafa Dehghani, Matthias Minderer, Georg Heigold, Sylvain Gelly, Jakob Uszkoreit, and Neil Houlsby,

</span>
<span class="ltx_bibblock">“An image is worth 16x16 words: Transformers for image recognition at scale,”

</span>
<span class="ltx_bibblock">in <span id="bib.bib17.1.1" class="ltx_text ltx_font_italic">9th International Conference on Learning Representations, ICLR 2021, Virtual Event, Austria, May 3-7, 2021</span>. 2021, OpenReview.net.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Yuntian Deng, Anssi Kanervisto, Jeffrey Ling, and Alexander M. Rush,

</span>
<span class="ltx_bibblock">“Image-to-markup generation with coarse-to-fine attention,”

</span>
<span class="ltx_bibblock">in <span id="bib.bib18.1.1" class="ltx_text ltx_font_italic">Proceedings of the 34th International Conference on Machine Learning, ICML 2017, Sydney, NSW, Australia, 6-11 August 2017</span>, Doina Precup and Yee Whye Teh, Eds. 2017, vol. 70 of <span id="bib.bib18.2.2" class="ltx_text ltx_font_italic">Proceedings of Machine Learning Research</span>, pp. 980–989, PMLR.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Minghao Li, Tengchao Lv, Jingye Chen, Lei Cui, Yijuan Lu, Dinei A. F. Florêncio, Cha Zhang, Zhoujun Li, and Furu Wei,

</span>
<span class="ltx_bibblock">“Trocr: Transformer-based optical character recognition with pre-trained models,”

</span>
<span class="ltx_bibblock">in <span id="bib.bib19.1.1" class="ltx_text ltx_font_italic">Thirty-Seventh AAAI Conference on Artificial Intelligence, AAAI 2023, Thirty-Fifth Conference on Innovative Applications of Artificial Intelligence, IAAI 2023, Thirteenth Symposium on Educational Advances in Artificial Intelligence, EAAI 2023, Washington, DC, USA, February 7-14, 2023</span>, Brian Williams, Yiling Chen, and Jennifer Neville, Eds. 2023, pp. 13094–13102, AAAI Press.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Ilya Loshchilov and Frank Hutter,

</span>
<span class="ltx_bibblock">“Decoupled weight decay regularization,”

</span>
<span class="ltx_bibblock">in <span id="bib.bib20.1.1" class="ltx_text ltx_font_italic">7th International Conference on Learning Representations, ICLR 2019, New Orleans, LA, USA, May 6-9, 2019</span>. 2019, OpenReview.net.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2409.11676" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2409.11677" class="ar5iv-text-button ar5iv-severity-ok">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2409.11677">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2409.11677" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2409.11679" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Sat Oct  5 21:36:56 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
