<!DOCTYPE html><html prefix="dcterms: http://purl.org/dc/terms/" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2406.16107] Decoder-only Architecture for Streaming End-to-end Speech Recognition</title><meta property="og:description" content="Decoder-only language models (LMs) have been successfully adopted for speech-processing tasks including automatic speech recognition (ASR). The LMs have ample expressiveness and perform efficiently. This efficiency is …">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Decoder-only Architecture for Streaming End-to-end Speech Recognition">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="Decoder-only Architecture for Streaming End-to-end Speech Recognition">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2406.16107">

<!--Generated on Fri Jul  5 18:38:16 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<div id="p1" class="ltx_para">
<span id="p1.1" class="ltx_ERROR undefined">\interspeechcameraready</span><span id="p1.2" class="ltx_ERROR undefined">\name</span>
<p id="p1.3" class="ltx_p">[affiliation=1]EmiruTsunoo
<span id="p1.3.1" class="ltx_ERROR undefined">\name</span>[affiliation=1]HayatoFutami
<span id="p1.3.2" class="ltx_ERROR undefined">\name</span>[affiliation=1]YosukeKashiwagi
<span id="p1.3.3" class="ltx_ERROR undefined">\name</span>[affiliation=2]SiddhantArora
<span id="p1.3.4" class="ltx_ERROR undefined">\name</span>[affiliation=2]ShinjiWatanabe




</p>
</div>
<h1 class="ltx_title ltx_title_document">Decoder-only Architecture for Streaming End-to-end Speech Recognition</h1>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id5.id1" class="ltx_p">Decoder-only language models (LMs) have been successfully adopted for speech-processing tasks including automatic speech recognition (ASR). The LMs have ample expressiveness and perform efficiently. This efficiency is a suitable characteristic for streaming applications of ASR. In this work, we propose to use a decoder-only architecture for blockwise streaming ASR. In our approach, speech features are compressed using CTC output and context embedding using blockwise speech subnetwork, and are sequentially provided as prompts to the decoder. The decoder estimates the output tokens promptly at each block. To this end, we also propose a novel training scheme using random-length prefix prompts to make the model robust to the truncated prompts caused by blockwise processing. An experimental comparison shows that our proposed decoder-only streaming ASR achieves 8% relative word error rate reduction in the LibriSpeech test-other set while being twice as fast as the baseline model.</p>
</div>
<div class="ltx_classification">
<h6 class="ltx_title ltx_title_classification">keywords: </h6>speech recognition, streaming ASR, decoder-only ASR, transformer, CTC prompts
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">Streaming-style or online automatic speech recognition (ASR) is required in many real-world use cases, such as real-time transcription of broadcast contents.
Many end-to-end approaches has established for such an application, including blockwise processing encoders <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>, <a href="#bib.bib2" title="" class="ltx_ref">2</a>, <a href="#bib.bib3" title="" class="ltx_ref">3</a>, <a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite> combined with connectionist temporal classification (CTC) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>, <a href="#bib.bib6" title="" class="ltx_ref">6</a>, <a href="#bib.bib7" title="" class="ltx_ref">7</a>, <a href="#bib.bib8" title="" class="ltx_ref">8</a>]</cite> or transducers <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>, <a href="#bib.bib10" title="" class="ltx_ref">10</a>, <a href="#bib.bib11" title="" class="ltx_ref">11</a>]</cite>.
Some studies use additional modules to align the sequential process of encoders with the attention-based transformer decoders <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib13" title="" class="ltx_ref">13</a>, <a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite>, and the decoders are also used for score fusion or rescoring in the streaming scenario <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>, <a href="#bib.bib16" title="" class="ltx_ref">16</a>, <a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite>.
Although the attention decoders have a strong ability to model label sequences, the source–target attention layer is computationally costly because it attends on all the encoded features, which is generally longer than the label sequence.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">Inspired by the recent advancement of decoder-only language models (LMs) such as GPT-3 <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite> and PaLM <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>, the decoder-only LMs are adapted for speech-processing tasks <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>, <a href="#bib.bib24" title="" class="ltx_ref">24</a>, <a href="#bib.bib25" title="" class="ltx_ref">25</a>, <a href="#bib.bib26" title="" class="ltx_ref">26</a>, <a href="#bib.bib27" title="" class="ltx_ref">27</a>, <a href="#bib.bib28" title="" class="ltx_ref">28</a>]</cite>.
Instead of using source–target attention layer, to bridge the audio–text modalities, audio information is alternately injected into the LLMs as prompts, which are discrete audio units <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>, <a href="#bib.bib24" title="" class="ltx_ref">24</a>]</cite> or continuous representations injected directly into the linguistic embedding space <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib25" title="" class="ltx_ref">25</a>, <a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>.
We previously demonstrated that a relatively small decoder trained with text-only data can achieve not only strong ASR performance but also computational efficiency <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib29" title="" class="ltx_ref">29</a>]</cite>.
Such a characteristic is favorable for the streaming scenario.
However, there have not been any investigations in deploying decoder-only models for streaming ASR.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">This study aims to use powerful yet efficient decoder-only architecture for blockwise streaming ASR.
Speech utterances are processed in a blockwise conformer-based speech subnetwork, and each block produces prompts that represent acoustic information.
The prompts are considerably compressed by removing unnecessary frames with the auxiliary CTC greedy search.
The speech subnetwork introduces context embedding that is inherited from previous blocks and represents past context information.
This context embedding is also provided to the decoder as additional prompts.
The decoder-only architecture estimates transcriptions immediately after the chunk of prompts is given.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">During training, however, it is difficult to prepare a partial transcription corresponding to the chunk of prompts without accurate forced alignment.
Although Sharma <span id="S1.p4.1.1" class="ltx_text ltx_font_italic">et al.</span> train the blockwise model using the entire transcription without alignments by introducing chain rule of probability <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib30" title="" class="ltx_ref">30</a>]</cite>, none has explored the prompt alignment problem yet to the best of our knowledge.
Thus, we also propose a new training method that mitigates this training–inference mismatch.
To simulate the blockwise inference scenario, we select a random-length prefix of prompts to train the decoder.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p">The main contributions of this study are as follows:</p>
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.p1.1" class="ltx_p">To the best of our knowledge, we are first to propose combining a decoder-only architecture with a blockwise speech subnetwork.</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p id="S1.I1.i2.p1.1" class="ltx_p">We propose to mitigate the mismatch between streaming inference and batch training by randomly selecting a prefix of prompts for training.</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p id="S1.I1.i3.p1.1" class="ltx_p">The proposed approach achieves higher ASR accuracy than streaming CTC/transducer models with only a small increase in computational cost, and even higher accuracy than ordinary encoder–decoder approach with faster inference.</p>
</div>
</li>
</ul>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Streamable decoder-only architecture</h2>

<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Decoder-only architecture for ASR</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.14" class="ltx_p">ASR is a task to predict the most probable <math id="S2.SS1.p1.1.m1.1" class="ltx_Math" alttext="I" display="inline"><semantics id="S2.SS1.p1.1.m1.1a"><mi id="S2.SS1.p1.1.m1.1.1" xref="S2.SS1.p1.1.m1.1.1.cmml">I</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.1.m1.1b"><ci id="S2.SS1.p1.1.m1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1">𝐼</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.1.m1.1c">I</annotation></semantics></math>-length label sequence <math id="S2.SS1.p1.2.m2.1" class="ltx_Math" alttext="Y^{I}" display="inline"><semantics id="S2.SS1.p1.2.m2.1a"><msup id="S2.SS1.p1.2.m2.1.1" xref="S2.SS1.p1.2.m2.1.1.cmml"><mi id="S2.SS1.p1.2.m2.1.1.2" xref="S2.SS1.p1.2.m2.1.1.2.cmml">Y</mi><mi id="S2.SS1.p1.2.m2.1.1.3" xref="S2.SS1.p1.2.m2.1.1.3.cmml">I</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.2.m2.1b"><apply id="S2.SS1.p1.2.m2.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.2.m2.1.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1">superscript</csymbol><ci id="S2.SS1.p1.2.m2.1.1.2.cmml" xref="S2.SS1.p1.2.m2.1.1.2">𝑌</ci><ci id="S2.SS1.p1.2.m2.1.1.3.cmml" xref="S2.SS1.p1.2.m2.1.1.3">𝐼</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.2.m2.1c">Y^{I}</annotation></semantics></math> given a <math id="S2.SS1.p1.3.m3.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S2.SS1.p1.3.m3.1a"><mi id="S2.SS1.p1.3.m3.1.1" xref="S2.SS1.p1.3.m3.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.3.m3.1b"><ci id="S2.SS1.p1.3.m3.1.1.cmml" xref="S2.SS1.p1.3.m3.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.3.m3.1c">T</annotation></semantics></math>-length input audio frame sequence <math id="S2.SS1.p1.4.m4.1" class="ltx_Math" alttext="{X}^{T}" display="inline"><semantics id="S2.SS1.p1.4.m4.1a"><msup id="S2.SS1.p1.4.m4.1.1" xref="S2.SS1.p1.4.m4.1.1.cmml"><mi id="S2.SS1.p1.4.m4.1.1.2" xref="S2.SS1.p1.4.m4.1.1.2.cmml">X</mi><mi id="S2.SS1.p1.4.m4.1.1.3" xref="S2.SS1.p1.4.m4.1.1.3.cmml">T</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.4.m4.1b"><apply id="S2.SS1.p1.4.m4.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.4.m4.1.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1">superscript</csymbol><ci id="S2.SS1.p1.4.m4.1.1.2.cmml" xref="S2.SS1.p1.4.m4.1.1.2">𝑋</ci><ci id="S2.SS1.p1.4.m4.1.1.3.cmml" xref="S2.SS1.p1.4.m4.1.1.3">𝑇</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.4.m4.1c">{X}^{T}</annotation></semantics></math>.
In decoder-only architectures, instead of directly using the audio input <math id="S2.SS1.p1.5.m5.1" class="ltx_Math" alttext="{X}^{T}" display="inline"><semantics id="S2.SS1.p1.5.m5.1a"><msup id="S2.SS1.p1.5.m5.1.1" xref="S2.SS1.p1.5.m5.1.1.cmml"><mi id="S2.SS1.p1.5.m5.1.1.2" xref="S2.SS1.p1.5.m5.1.1.2.cmml">X</mi><mi id="S2.SS1.p1.5.m5.1.1.3" xref="S2.SS1.p1.5.m5.1.1.3.cmml">T</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.5.m5.1b"><apply id="S2.SS1.p1.5.m5.1.1.cmml" xref="S2.SS1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.5.m5.1.1.1.cmml" xref="S2.SS1.p1.5.m5.1.1">superscript</csymbol><ci id="S2.SS1.p1.5.m5.1.1.2.cmml" xref="S2.SS1.p1.5.m5.1.1.2">𝑋</ci><ci id="S2.SS1.p1.5.m5.1.1.3.cmml" xref="S2.SS1.p1.5.m5.1.1.3">𝑇</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.5.m5.1c">{X}^{T}</annotation></semantics></math> in the decoder, it is generally approximated by <math id="S2.SS1.p1.6.m6.1" class="ltx_Math" alttext="J" display="inline"><semantics id="S2.SS1.p1.6.m6.1a"><mi id="S2.SS1.p1.6.m6.1.1" xref="S2.SS1.p1.6.m6.1.1.cmml">J</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.6.m6.1b"><ci id="S2.SS1.p1.6.m6.1.1.cmml" xref="S2.SS1.p1.6.m6.1.1">𝐽</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.6.m6.1c">J</annotation></semantics></math>-length compact audio representation <math id="S2.SS1.p1.7.m7.1" class="ltx_Math" alttext="U^{J}" display="inline"><semantics id="S2.SS1.p1.7.m7.1a"><msup id="S2.SS1.p1.7.m7.1.1" xref="S2.SS1.p1.7.m7.1.1.cmml"><mi id="S2.SS1.p1.7.m7.1.1.2" xref="S2.SS1.p1.7.m7.1.1.2.cmml">U</mi><mi id="S2.SS1.p1.7.m7.1.1.3" xref="S2.SS1.p1.7.m7.1.1.3.cmml">J</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.7.m7.1b"><apply id="S2.SS1.p1.7.m7.1.1.cmml" xref="S2.SS1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.7.m7.1.1.1.cmml" xref="S2.SS1.p1.7.m7.1.1">superscript</csymbol><ci id="S2.SS1.p1.7.m7.1.1.2.cmml" xref="S2.SS1.p1.7.m7.1.1.2">𝑈</ci><ci id="S2.SS1.p1.7.m7.1.1.3.cmml" xref="S2.SS1.p1.7.m7.1.1.3">𝐽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.7.m7.1c">U^{J}</annotation></semantics></math> as prompts (<math id="S2.SS1.p1.8.m8.1" class="ltx_Math" alttext="J\ll T" display="inline"><semantics id="S2.SS1.p1.8.m8.1a"><mrow id="S2.SS1.p1.8.m8.1.1" xref="S2.SS1.p1.8.m8.1.1.cmml"><mi id="S2.SS1.p1.8.m8.1.1.2" xref="S2.SS1.p1.8.m8.1.1.2.cmml">J</mi><mo id="S2.SS1.p1.8.m8.1.1.1" xref="S2.SS1.p1.8.m8.1.1.1.cmml">≪</mo><mi id="S2.SS1.p1.8.m8.1.1.3" xref="S2.SS1.p1.8.m8.1.1.3.cmml">T</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.8.m8.1b"><apply id="S2.SS1.p1.8.m8.1.1.cmml" xref="S2.SS1.p1.8.m8.1.1"><csymbol cd="latexml" id="S2.SS1.p1.8.m8.1.1.1.cmml" xref="S2.SS1.p1.8.m8.1.1.1">much-less-than</csymbol><ci id="S2.SS1.p1.8.m8.1.1.2.cmml" xref="S2.SS1.p1.8.m8.1.1.2">𝐽</ci><ci id="S2.SS1.p1.8.m8.1.1.3.cmml" xref="S2.SS1.p1.8.m8.1.1.3">𝑇</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.8.m8.1c">J\ll T</annotation></semantics></math>) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>, <a href="#bib.bib24" title="" class="ltx_ref">24</a>, <a href="#bib.bib25" title="" class="ltx_ref">25</a>, <a href="#bib.bib26" title="" class="ltx_ref">26</a>, <a href="#bib.bib29" title="" class="ltx_ref">29</a>]</cite>.
Prompts <math id="S2.SS1.p1.9.m9.1" class="ltx_Math" alttext="U^{J}" display="inline"><semantics id="S2.SS1.p1.9.m9.1a"><msup id="S2.SS1.p1.9.m9.1.1" xref="S2.SS1.p1.9.m9.1.1.cmml"><mi id="S2.SS1.p1.9.m9.1.1.2" xref="S2.SS1.p1.9.m9.1.1.2.cmml">U</mi><mi id="S2.SS1.p1.9.m9.1.1.3" xref="S2.SS1.p1.9.m9.1.1.3.cmml">J</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.9.m9.1b"><apply id="S2.SS1.p1.9.m9.1.1.cmml" xref="S2.SS1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.9.m9.1.1.1.cmml" xref="S2.SS1.p1.9.m9.1.1">superscript</csymbol><ci id="S2.SS1.p1.9.m9.1.1.2.cmml" xref="S2.SS1.p1.9.m9.1.1.2">𝑈</ci><ci id="S2.SS1.p1.9.m9.1.1.3.cmml" xref="S2.SS1.p1.9.m9.1.1.3">𝐽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.9.m9.1c">U^{J}</annotation></semantics></math> are generated using a speech subnetwork described in Sec. <a href="#S2.SS2" title="2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2</span></a> from the input <math id="S2.SS1.p1.10.m10.1" class="ltx_Math" alttext="{X}^{T}" display="inline"><semantics id="S2.SS1.p1.10.m10.1a"><msup id="S2.SS1.p1.10.m10.1.1" xref="S2.SS1.p1.10.m10.1.1.cmml"><mi id="S2.SS1.p1.10.m10.1.1.2" xref="S2.SS1.p1.10.m10.1.1.2.cmml">X</mi><mi id="S2.SS1.p1.10.m10.1.1.3" xref="S2.SS1.p1.10.m10.1.1.3.cmml">T</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.10.m10.1b"><apply id="S2.SS1.p1.10.m10.1.1.cmml" xref="S2.SS1.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.10.m10.1.1.1.cmml" xref="S2.SS1.p1.10.m10.1.1">superscript</csymbol><ci id="S2.SS1.p1.10.m10.1.1.2.cmml" xref="S2.SS1.p1.10.m10.1.1.2">𝑋</ci><ci id="S2.SS1.p1.10.m10.1.1.3.cmml" xref="S2.SS1.p1.10.m10.1.1.3">𝑇</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.10.m10.1c">{X}^{T}</annotation></semantics></math>.
The architecture is illustrated in the upper part of Fig. <a href="#S2.F1" title="Figure 1 ‣ 2.1 Decoder-only architecture for ASR ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.
The compressed audio prompt <math id="S2.SS1.p1.11.m11.1" class="ltx_Math" alttext="U^{J}" display="inline"><semantics id="S2.SS1.p1.11.m11.1a"><msup id="S2.SS1.p1.11.m11.1.1" xref="S2.SS1.p1.11.m11.1.1.cmml"><mi id="S2.SS1.p1.11.m11.1.1.2" xref="S2.SS1.p1.11.m11.1.1.2.cmml">U</mi><mi id="S2.SS1.p1.11.m11.1.1.3" xref="S2.SS1.p1.11.m11.1.1.3.cmml">J</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.11.m11.1b"><apply id="S2.SS1.p1.11.m11.1.1.cmml" xref="S2.SS1.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.11.m11.1.1.1.cmml" xref="S2.SS1.p1.11.m11.1.1">superscript</csymbol><ci id="S2.SS1.p1.11.m11.1.1.2.cmml" xref="S2.SS1.p1.11.m11.1.1.2">𝑈</ci><ci id="S2.SS1.p1.11.m11.1.1.3.cmml" xref="S2.SS1.p1.11.m11.1.1.3">𝐽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.11.m11.1c">U^{J}</annotation></semantics></math> is directly injected into the continuous embedding space of the decoder.
The decoder, then, autoregressively predicts the next linguistic token <math id="S2.SS1.p1.12.m12.1" class="ltx_Math" alttext="y_{i}" display="inline"><semantics id="S2.SS1.p1.12.m12.1a"><msub id="S2.SS1.p1.12.m12.1.1" xref="S2.SS1.p1.12.m12.1.1.cmml"><mi id="S2.SS1.p1.12.m12.1.1.2" xref="S2.SS1.p1.12.m12.1.1.2.cmml">y</mi><mi id="S2.SS1.p1.12.m12.1.1.3" xref="S2.SS1.p1.12.m12.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.12.m12.1b"><apply id="S2.SS1.p1.12.m12.1.1.cmml" xref="S2.SS1.p1.12.m12.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.12.m12.1.1.1.cmml" xref="S2.SS1.p1.12.m12.1.1">subscript</csymbol><ci id="S2.SS1.p1.12.m12.1.1.2.cmml" xref="S2.SS1.p1.12.m12.1.1.2">𝑦</ci><ci id="S2.SS1.p1.12.m12.1.1.3.cmml" xref="S2.SS1.p1.12.m12.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.12.m12.1c">y_{i}</annotation></semantics></math> given the audio prompts <math id="S2.SS1.p1.13.m13.1" class="ltx_Math" alttext="U^{J}" display="inline"><semantics id="S2.SS1.p1.13.m13.1a"><msup id="S2.SS1.p1.13.m13.1.1" xref="S2.SS1.p1.13.m13.1.1.cmml"><mi id="S2.SS1.p1.13.m13.1.1.2" xref="S2.SS1.p1.13.m13.1.1.2.cmml">U</mi><mi id="S2.SS1.p1.13.m13.1.1.3" xref="S2.SS1.p1.13.m13.1.1.3.cmml">J</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.13.m13.1b"><apply id="S2.SS1.p1.13.m13.1.1.cmml" xref="S2.SS1.p1.13.m13.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.13.m13.1.1.1.cmml" xref="S2.SS1.p1.13.m13.1.1">superscript</csymbol><ci id="S2.SS1.p1.13.m13.1.1.2.cmml" xref="S2.SS1.p1.13.m13.1.1.2">𝑈</ci><ci id="S2.SS1.p1.13.m13.1.1.3.cmml" xref="S2.SS1.p1.13.m13.1.1.3">𝐽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.13.m13.1c">U^{J}</annotation></semantics></math>, and the previous outputs <math id="S2.SS1.p1.14.m14.1" class="ltx_Math" alttext="Y^{(i-1)}" display="inline"><semantics id="S2.SS1.p1.14.m14.1a"><msup id="S2.SS1.p1.14.m14.1.2" xref="S2.SS1.p1.14.m14.1.2.cmml"><mi id="S2.SS1.p1.14.m14.1.2.2" xref="S2.SS1.p1.14.m14.1.2.2.cmml">Y</mi><mrow id="S2.SS1.p1.14.m14.1.1.1.1" xref="S2.SS1.p1.14.m14.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS1.p1.14.m14.1.1.1.1.2" xref="S2.SS1.p1.14.m14.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS1.p1.14.m14.1.1.1.1.1" xref="S2.SS1.p1.14.m14.1.1.1.1.1.cmml"><mi id="S2.SS1.p1.14.m14.1.1.1.1.1.2" xref="S2.SS1.p1.14.m14.1.1.1.1.1.2.cmml">i</mi><mo id="S2.SS1.p1.14.m14.1.1.1.1.1.1" xref="S2.SS1.p1.14.m14.1.1.1.1.1.1.cmml">−</mo><mn id="S2.SS1.p1.14.m14.1.1.1.1.1.3" xref="S2.SS1.p1.14.m14.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS1.p1.14.m14.1.1.1.1.3" xref="S2.SS1.p1.14.m14.1.1.1.1.1.cmml">)</mo></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.14.m14.1b"><apply id="S2.SS1.p1.14.m14.1.2.cmml" xref="S2.SS1.p1.14.m14.1.2"><csymbol cd="ambiguous" id="S2.SS1.p1.14.m14.1.2.1.cmml" xref="S2.SS1.p1.14.m14.1.2">superscript</csymbol><ci id="S2.SS1.p1.14.m14.1.2.2.cmml" xref="S2.SS1.p1.14.m14.1.2.2">𝑌</ci><apply id="S2.SS1.p1.14.m14.1.1.1.1.1.cmml" xref="S2.SS1.p1.14.m14.1.1.1.1"><minus id="S2.SS1.p1.14.m14.1.1.1.1.1.1.cmml" xref="S2.SS1.p1.14.m14.1.1.1.1.1.1"></minus><ci id="S2.SS1.p1.14.m14.1.1.1.1.1.2.cmml" xref="S2.SS1.p1.14.m14.1.1.1.1.1.2">𝑖</ci><cn type="integer" id="S2.SS1.p1.14.m14.1.1.1.1.1.3.cmml" xref="S2.SS1.p1.14.m14.1.1.1.1.1.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.14.m14.1c">Y^{(i-1)}</annotation></semantics></math> as follows:</p>
<table id="S5.EGx1" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S2.E1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.E1.m1.1" class="ltx_Math" alttext="\displaystyle\vspace{-0.3cm}p_{\mathrm{dec}}(Y^{i})" display="inline"><semantics id="S2.E1.m1.1a"><mrow id="S2.E1.m1.1.1" xref="S2.E1.m1.1.1.cmml"><msub id="S2.E1.m1.1.1.3" xref="S2.E1.m1.1.1.3.cmml"><mi id="S2.E1.m1.1.1.3.2" xref="S2.E1.m1.1.1.3.2.cmml">p</mi><mi id="S2.E1.m1.1.1.3.3" xref="S2.E1.m1.1.1.3.3.cmml">dec</mi></msub><mo lspace="0em" rspace="0em" id="S2.E1.m1.1.1.2" xref="S2.E1.m1.1.1.2.cmml">​</mo><mrow id="S2.E1.m1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E1.m1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.cmml">(</mo><msup id="S2.E1.m1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.cmml"><mi id="S2.E1.m1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.2.cmml">Y</mi><mi id="S2.E1.m1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.3.cmml">i</mi></msup><mo stretchy="false" id="S2.E1.m1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.1b"><apply id="S2.E1.m1.1.1.cmml" xref="S2.E1.m1.1.1"><times id="S2.E1.m1.1.1.2.cmml" xref="S2.E1.m1.1.1.2"></times><apply id="S2.E1.m1.1.1.3.cmml" xref="S2.E1.m1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.3.1.cmml" xref="S2.E1.m1.1.1.3">subscript</csymbol><ci id="S2.E1.m1.1.1.3.2.cmml" xref="S2.E1.m1.1.1.3.2">𝑝</ci><ci id="S2.E1.m1.1.1.3.3.cmml" xref="S2.E1.m1.1.1.3.3">dec</ci></apply><apply id="S2.E1.m1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1">superscript</csymbol><ci id="S2.E1.m1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.1.2">𝑌</ci><ci id="S2.E1.m1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.1c">\displaystyle\vspace{-0.3cm}p_{\mathrm{dec}}(Y^{i})</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S2.E1.m2.2" class="ltx_Math" alttext="\displaystyle=\prod_{k=1}^{i}p_{\mathrm{dec}}(y_{k}|U^{J},Y^{(k-1)})," display="inline"><semantics id="S2.E1.m2.2a"><mrow id="S2.E1.m2.2.2.1" xref="S2.E1.m2.2.2.1.1.cmml"><mrow id="S2.E1.m2.2.2.1.1" xref="S2.E1.m2.2.2.1.1.cmml"><mi id="S2.E1.m2.2.2.1.1.3" xref="S2.E1.m2.2.2.1.1.3.cmml"></mi><mo id="S2.E1.m2.2.2.1.1.2" xref="S2.E1.m2.2.2.1.1.2.cmml">=</mo><mrow id="S2.E1.m2.2.2.1.1.1" xref="S2.E1.m2.2.2.1.1.1.cmml"><mstyle displaystyle="true" id="S2.E1.m2.2.2.1.1.1.2" xref="S2.E1.m2.2.2.1.1.1.2.cmml"><munderover id="S2.E1.m2.2.2.1.1.1.2a" xref="S2.E1.m2.2.2.1.1.1.2.cmml"><mo movablelimits="false" id="S2.E1.m2.2.2.1.1.1.2.2.2" xref="S2.E1.m2.2.2.1.1.1.2.2.2.cmml">∏</mo><mrow id="S2.E1.m2.2.2.1.1.1.2.2.3" xref="S2.E1.m2.2.2.1.1.1.2.2.3.cmml"><mi id="S2.E1.m2.2.2.1.1.1.2.2.3.2" xref="S2.E1.m2.2.2.1.1.1.2.2.3.2.cmml">k</mi><mo id="S2.E1.m2.2.2.1.1.1.2.2.3.1" xref="S2.E1.m2.2.2.1.1.1.2.2.3.1.cmml">=</mo><mn id="S2.E1.m2.2.2.1.1.1.2.2.3.3" xref="S2.E1.m2.2.2.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S2.E1.m2.2.2.1.1.1.2.3" xref="S2.E1.m2.2.2.1.1.1.2.3.cmml">i</mi></munderover></mstyle><mrow id="S2.E1.m2.2.2.1.1.1.1" xref="S2.E1.m2.2.2.1.1.1.1.cmml"><msub id="S2.E1.m2.2.2.1.1.1.1.3" xref="S2.E1.m2.2.2.1.1.1.1.3.cmml"><mi id="S2.E1.m2.2.2.1.1.1.1.3.2" xref="S2.E1.m2.2.2.1.1.1.1.3.2.cmml">p</mi><mi id="S2.E1.m2.2.2.1.1.1.1.3.3" xref="S2.E1.m2.2.2.1.1.1.1.3.3.cmml">dec</mi></msub><mo lspace="0em" rspace="0em" id="S2.E1.m2.2.2.1.1.1.1.2" xref="S2.E1.m2.2.2.1.1.1.1.2.cmml">​</mo><mrow id="S2.E1.m2.2.2.1.1.1.1.1.1" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E1.m2.2.2.1.1.1.1.1.1.2" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E1.m2.2.2.1.1.1.1.1.1.1" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.cmml"><msub id="S2.E1.m2.2.2.1.1.1.1.1.1.1.4" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.cmml"><mi id="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.2" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.2.cmml">y</mi><mi id="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.3" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.3.cmml">k</mi></msub><mo fence="false" id="S2.E1.m2.2.2.1.1.1.1.1.1.1.3" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.3.cmml">|</mo><mrow id="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.3.cmml"><msup id="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.2" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.2.cmml">U</mi><mi id="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.3" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.3.cmml">J</mi></msup><mo id="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.3" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.3.cmml">,</mo><msup id="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.2" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.2.cmml"><mi id="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.2.2" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.2.2.cmml">Y</mi><mrow id="S2.E1.m2.1.1.1.1" xref="S2.E1.m2.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E1.m2.1.1.1.1.2" xref="S2.E1.m2.1.1.1.1.1.cmml">(</mo><mrow id="S2.E1.m2.1.1.1.1.1" xref="S2.E1.m2.1.1.1.1.1.cmml"><mi id="S2.E1.m2.1.1.1.1.1.2" xref="S2.E1.m2.1.1.1.1.1.2.cmml">k</mi><mo id="S2.E1.m2.1.1.1.1.1.1" xref="S2.E1.m2.1.1.1.1.1.1.cmml">−</mo><mn id="S2.E1.m2.1.1.1.1.1.3" xref="S2.E1.m2.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.E1.m2.1.1.1.1.3" xref="S2.E1.m2.1.1.1.1.1.cmml">)</mo></mrow></msup></mrow></mrow><mo stretchy="false" id="S2.E1.m2.2.2.1.1.1.1.1.1.3" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S2.E1.m2.2.2.1.2" xref="S2.E1.m2.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m2.2b"><apply id="S2.E1.m2.2.2.1.1.cmml" xref="S2.E1.m2.2.2.1"><eq id="S2.E1.m2.2.2.1.1.2.cmml" xref="S2.E1.m2.2.2.1.1.2"></eq><csymbol cd="latexml" id="S2.E1.m2.2.2.1.1.3.cmml" xref="S2.E1.m2.2.2.1.1.3">absent</csymbol><apply id="S2.E1.m2.2.2.1.1.1.cmml" xref="S2.E1.m2.2.2.1.1.1"><apply id="S2.E1.m2.2.2.1.1.1.2.cmml" xref="S2.E1.m2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S2.E1.m2.2.2.1.1.1.2.1.cmml" xref="S2.E1.m2.2.2.1.1.1.2">superscript</csymbol><apply id="S2.E1.m2.2.2.1.1.1.2.2.cmml" xref="S2.E1.m2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S2.E1.m2.2.2.1.1.1.2.2.1.cmml" xref="S2.E1.m2.2.2.1.1.1.2">subscript</csymbol><csymbol cd="latexml" id="S2.E1.m2.2.2.1.1.1.2.2.2.cmml" xref="S2.E1.m2.2.2.1.1.1.2.2.2">product</csymbol><apply id="S2.E1.m2.2.2.1.1.1.2.2.3.cmml" xref="S2.E1.m2.2.2.1.1.1.2.2.3"><eq id="S2.E1.m2.2.2.1.1.1.2.2.3.1.cmml" xref="S2.E1.m2.2.2.1.1.1.2.2.3.1"></eq><ci id="S2.E1.m2.2.2.1.1.1.2.2.3.2.cmml" xref="S2.E1.m2.2.2.1.1.1.2.2.3.2">𝑘</ci><cn type="integer" id="S2.E1.m2.2.2.1.1.1.2.2.3.3.cmml" xref="S2.E1.m2.2.2.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="S2.E1.m2.2.2.1.1.1.2.3.cmml" xref="S2.E1.m2.2.2.1.1.1.2.3">𝑖</ci></apply><apply id="S2.E1.m2.2.2.1.1.1.1.cmml" xref="S2.E1.m2.2.2.1.1.1.1"><times id="S2.E1.m2.2.2.1.1.1.1.2.cmml" xref="S2.E1.m2.2.2.1.1.1.1.2"></times><apply id="S2.E1.m2.2.2.1.1.1.1.3.cmml" xref="S2.E1.m2.2.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m2.2.2.1.1.1.1.3.1.cmml" xref="S2.E1.m2.2.2.1.1.1.1.3">subscript</csymbol><ci id="S2.E1.m2.2.2.1.1.1.1.3.2.cmml" xref="S2.E1.m2.2.2.1.1.1.1.3.2">𝑝</ci><ci id="S2.E1.m2.2.2.1.1.1.1.3.3.cmml" xref="S2.E1.m2.2.2.1.1.1.1.3.3">dec</ci></apply><apply id="S2.E1.m2.2.2.1.1.1.1.1.1.1.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1"><csymbol cd="latexml" id="S2.E1.m2.2.2.1.1.1.1.1.1.1.3.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.3">conditional</csymbol><apply id="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.1.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.4">subscript</csymbol><ci id="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.2.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.2">𝑦</ci><ci id="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.3.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.4.3">𝑘</ci></apply><list id="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.3.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2"><apply id="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.2">𝑈</ci><ci id="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.1.1.1.3">𝐽</ci></apply><apply id="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.2.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.2.1.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.2">superscript</csymbol><ci id="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.2.2.cmml" xref="S2.E1.m2.2.2.1.1.1.1.1.1.1.2.2.2.2">𝑌</ci><apply id="S2.E1.m2.1.1.1.1.1.cmml" xref="S2.E1.m2.1.1.1.1"><minus id="S2.E1.m2.1.1.1.1.1.1.cmml" xref="S2.E1.m2.1.1.1.1.1.1"></minus><ci id="S2.E1.m2.1.1.1.1.1.2.cmml" xref="S2.E1.m2.1.1.1.1.1.2">𝑘</ci><cn type="integer" id="S2.E1.m2.1.1.1.1.1.3.cmml" xref="S2.E1.m2.1.1.1.1.1.3">1</cn></apply></apply></list></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m2.2c">\displaystyle=\prod_{k=1}^{i}p_{\mathrm{dec}}(y_{k}|U^{J},Y^{(k-1)}),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p id="S2.SS1.p1.18" class="ltx_p">where <math id="S2.SS1.p1.15.m1.1" class="ltx_Math" alttext="y_{0}" display="inline"><semantics id="S2.SS1.p1.15.m1.1a"><msub id="S2.SS1.p1.15.m1.1.1" xref="S2.SS1.p1.15.m1.1.1.cmml"><mi id="S2.SS1.p1.15.m1.1.1.2" xref="S2.SS1.p1.15.m1.1.1.2.cmml">y</mi><mn id="S2.SS1.p1.15.m1.1.1.3" xref="S2.SS1.p1.15.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.15.m1.1b"><apply id="S2.SS1.p1.15.m1.1.1.cmml" xref="S2.SS1.p1.15.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.15.m1.1.1.1.cmml" xref="S2.SS1.p1.15.m1.1.1">subscript</csymbol><ci id="S2.SS1.p1.15.m1.1.1.2.cmml" xref="S2.SS1.p1.15.m1.1.1.2">𝑦</ci><cn type="integer" id="S2.SS1.p1.15.m1.1.1.3.cmml" xref="S2.SS1.p1.15.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.15.m1.1c">y_{0}</annotation></semantics></math> and <math id="S2.SS1.p1.16.m2.1" class="ltx_Math" alttext="{\mathbf{u}}_{0}" display="inline"><semantics id="S2.SS1.p1.16.m2.1a"><msub id="S2.SS1.p1.16.m2.1.1" xref="S2.SS1.p1.16.m2.1.1.cmml"><mi id="S2.SS1.p1.16.m2.1.1.2" xref="S2.SS1.p1.16.m2.1.1.2.cmml">𝐮</mi><mn id="S2.SS1.p1.16.m2.1.1.3" xref="S2.SS1.p1.16.m2.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.16.m2.1b"><apply id="S2.SS1.p1.16.m2.1.1.cmml" xref="S2.SS1.p1.16.m2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.16.m2.1.1.1.cmml" xref="S2.SS1.p1.16.m2.1.1">subscript</csymbol><ci id="S2.SS1.p1.16.m2.1.1.2.cmml" xref="S2.SS1.p1.16.m2.1.1.2">𝐮</ci><cn type="integer" id="S2.SS1.p1.16.m2.1.1.3.cmml" xref="S2.SS1.p1.16.m2.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.16.m2.1c">{\mathbf{u}}_{0}</annotation></semantics></math> are a start-of-sequence token, <math id="S2.SS1.p1.17.m3.1" class="ltx_Math" alttext="\langle" display="inline"><semantics id="S2.SS1.p1.17.m3.1a"><mo stretchy="false" id="S2.SS1.p1.17.m3.1.1" xref="S2.SS1.p1.17.m3.1.1.cmml">⟨</mo><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.17.m3.1b"><ci id="S2.SS1.p1.17.m3.1.1.cmml" xref="S2.SS1.p1.17.m3.1.1">⟨</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.17.m3.1c">\langle</annotation></semantics></math>sos<math id="S2.SS1.p1.18.m4.1" class="ltx_Math" alttext="\rangle" display="inline"><semantics id="S2.SS1.p1.18.m4.1a"><mo stretchy="false" id="S2.SS1.p1.18.m4.1.1" xref="S2.SS1.p1.18.m4.1.1.cmml">⟩</mo><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.18.m4.1b"><ci id="S2.SS1.p1.18.m4.1.1.cmml" xref="S2.SS1.p1.18.m4.1.1">⟩</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.18.m4.1c">\rangle</annotation></semantics></math>, and its embedding vector, respectively.</p>
</div>
<figure id="S2.F1" class="ltx_figure"><img src="/html/2406.16107/assets/x1.png" id="S2.F1.g1" class="ltx_graphics ltx_img_landscape" width="507" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Decoder-only architecture for ASR. CTC greedy search outputs are used for filtering out speech frames to generate prompts for the decoder.</figcaption>
</figure>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Blockwise processing of prompt generation</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.9" class="ltx_p">In streaming ASR, blockwise processing is widely used <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>, <a href="#bib.bib3" title="" class="ltx_ref">3</a>, <a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>.
The speech subnetwork produces the prompts on-the-fly in each block.
Let <math id="S2.SS2.p1.1.m1.1" class="ltx_Math" alttext="B" display="inline"><semantics id="S2.SS2.p1.1.m1.1a"><mi id="S2.SS2.p1.1.m1.1.1" xref="S2.SS2.p1.1.m1.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.1.m1.1b"><ci id="S2.SS2.p1.1.m1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.1.m1.1c">B</annotation></semantics></math> represent the total number of blocks, <math id="S2.SS2.p1.2.m2.1" class="ltx_Math" alttext="T_{b}" display="inline"><semantics id="S2.SS2.p1.2.m2.1a"><msub id="S2.SS2.p1.2.m2.1.1" xref="S2.SS2.p1.2.m2.1.1.cmml"><mi id="S2.SS2.p1.2.m2.1.1.2" xref="S2.SS2.p1.2.m2.1.1.2.cmml">T</mi><mi id="S2.SS2.p1.2.m2.1.1.3" xref="S2.SS2.p1.2.m2.1.1.3.cmml">b</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.2.m2.1b"><apply id="S2.SS2.p1.2.m2.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.2.m2.1.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.p1.2.m2.1.1.2.cmml" xref="S2.SS2.p1.2.m2.1.1.2">𝑇</ci><ci id="S2.SS2.p1.2.m2.1.1.3.cmml" xref="S2.SS2.p1.2.m2.1.1.3">𝑏</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.2.m2.1c">T_{b}</annotation></semantics></math> denote the last frame of the <math id="S2.SS2.p1.3.m3.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S2.SS2.p1.3.m3.1a"><mi id="S2.SS2.p1.3.m3.1.1" xref="S2.SS2.p1.3.m3.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.3.m3.1b"><ci id="S2.SS2.p1.3.m3.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.3.m3.1c">b</annotation></semantics></math>-th block,and <math id="S2.SS2.p1.4.m4.1" class="ltx_Math" alttext="J_{b}" display="inline"><semantics id="S2.SS2.p1.4.m4.1a"><msub id="S2.SS2.p1.4.m4.1.1" xref="S2.SS2.p1.4.m4.1.1.cmml"><mi id="S2.SS2.p1.4.m4.1.1.2" xref="S2.SS2.p1.4.m4.1.1.2.cmml">J</mi><mi id="S2.SS2.p1.4.m4.1.1.3" xref="S2.SS2.p1.4.m4.1.1.3.cmml">b</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.4.m4.1b"><apply id="S2.SS2.p1.4.m4.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.4.m4.1.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1">subscript</csymbol><ci id="S2.SS2.p1.4.m4.1.1.2.cmml" xref="S2.SS2.p1.4.m4.1.1.2">𝐽</ci><ci id="S2.SS2.p1.4.m4.1.1.3.cmml" xref="S2.SS2.p1.4.m4.1.1.3">𝑏</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.4.m4.1c">J_{b}</annotation></semantics></math> signify the final index of the audio prompt for block <math id="S2.SS2.p1.5.m5.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S2.SS2.p1.5.m5.1a"><mi id="S2.SS2.p1.5.m5.1.1" xref="S2.SS2.p1.5.m5.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.5.m5.1b"><ci id="S2.SS2.p1.5.m5.1.1.cmml" xref="S2.SS2.p1.5.m5.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.5.m5.1c">b</annotation></semantics></math>.
Consequently, the chunk of audio prompt <math id="S2.SS2.p1.6.m6.3" class="ltx_Math" alttext="U^{j\in b}=\{{\mathbf{u}}_{j}|J_{(b-1)}&lt;j\leq J_{b}\}" display="inline"><semantics id="S2.SS2.p1.6.m6.3a"><mrow id="S2.SS2.p1.6.m6.3.3" xref="S2.SS2.p1.6.m6.3.3.cmml"><msup id="S2.SS2.p1.6.m6.3.3.4" xref="S2.SS2.p1.6.m6.3.3.4.cmml"><mi id="S2.SS2.p1.6.m6.3.3.4.2" xref="S2.SS2.p1.6.m6.3.3.4.2.cmml">U</mi><mrow id="S2.SS2.p1.6.m6.3.3.4.3" xref="S2.SS2.p1.6.m6.3.3.4.3.cmml"><mi id="S2.SS2.p1.6.m6.3.3.4.3.2" xref="S2.SS2.p1.6.m6.3.3.4.3.2.cmml">j</mi><mo id="S2.SS2.p1.6.m6.3.3.4.3.1" xref="S2.SS2.p1.6.m6.3.3.4.3.1.cmml">∈</mo><mi id="S2.SS2.p1.6.m6.3.3.4.3.3" xref="S2.SS2.p1.6.m6.3.3.4.3.3.cmml">b</mi></mrow></msup><mo id="S2.SS2.p1.6.m6.3.3.3" xref="S2.SS2.p1.6.m6.3.3.3.cmml">=</mo><mrow id="S2.SS2.p1.6.m6.3.3.2.2" xref="S2.SS2.p1.6.m6.3.3.2.3.cmml"><mo stretchy="false" id="S2.SS2.p1.6.m6.3.3.2.2.3" xref="S2.SS2.p1.6.m6.3.3.2.3.1.cmml">{</mo><msub id="S2.SS2.p1.6.m6.2.2.1.1.1" xref="S2.SS2.p1.6.m6.2.2.1.1.1.cmml"><mi id="S2.SS2.p1.6.m6.2.2.1.1.1.2" xref="S2.SS2.p1.6.m6.2.2.1.1.1.2.cmml">𝐮</mi><mi id="S2.SS2.p1.6.m6.2.2.1.1.1.3" xref="S2.SS2.p1.6.m6.2.2.1.1.1.3.cmml">j</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS2.p1.6.m6.3.3.2.2.4" xref="S2.SS2.p1.6.m6.3.3.2.3.1.cmml">|</mo><mrow id="S2.SS2.p1.6.m6.3.3.2.2.2" xref="S2.SS2.p1.6.m6.3.3.2.2.2.cmml"><msub id="S2.SS2.p1.6.m6.3.3.2.2.2.2" xref="S2.SS2.p1.6.m6.3.3.2.2.2.2.cmml"><mi id="S2.SS2.p1.6.m6.3.3.2.2.2.2.2" xref="S2.SS2.p1.6.m6.3.3.2.2.2.2.2.cmml">J</mi><mrow id="S2.SS2.p1.6.m6.1.1.1.1" xref="S2.SS2.p1.6.m6.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS2.p1.6.m6.1.1.1.1.2" xref="S2.SS2.p1.6.m6.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p1.6.m6.1.1.1.1.1" xref="S2.SS2.p1.6.m6.1.1.1.1.1.cmml"><mi id="S2.SS2.p1.6.m6.1.1.1.1.1.2" xref="S2.SS2.p1.6.m6.1.1.1.1.1.2.cmml">b</mi><mo id="S2.SS2.p1.6.m6.1.1.1.1.1.1" xref="S2.SS2.p1.6.m6.1.1.1.1.1.1.cmml">−</mo><mn id="S2.SS2.p1.6.m6.1.1.1.1.1.3" xref="S2.SS2.p1.6.m6.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS2.p1.6.m6.1.1.1.1.3" xref="S2.SS2.p1.6.m6.1.1.1.1.1.cmml">)</mo></mrow></msub><mo id="S2.SS2.p1.6.m6.3.3.2.2.2.3" xref="S2.SS2.p1.6.m6.3.3.2.2.2.3.cmml">&lt;</mo><mi id="S2.SS2.p1.6.m6.3.3.2.2.2.4" xref="S2.SS2.p1.6.m6.3.3.2.2.2.4.cmml">j</mi><mo id="S2.SS2.p1.6.m6.3.3.2.2.2.5" xref="S2.SS2.p1.6.m6.3.3.2.2.2.5.cmml">≤</mo><msub id="S2.SS2.p1.6.m6.3.3.2.2.2.6" xref="S2.SS2.p1.6.m6.3.3.2.2.2.6.cmml"><mi id="S2.SS2.p1.6.m6.3.3.2.2.2.6.2" xref="S2.SS2.p1.6.m6.3.3.2.2.2.6.2.cmml">J</mi><mi id="S2.SS2.p1.6.m6.3.3.2.2.2.6.3" xref="S2.SS2.p1.6.m6.3.3.2.2.2.6.3.cmml">b</mi></msub></mrow><mo stretchy="false" id="S2.SS2.p1.6.m6.3.3.2.2.5" xref="S2.SS2.p1.6.m6.3.3.2.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.6.m6.3b"><apply id="S2.SS2.p1.6.m6.3.3.cmml" xref="S2.SS2.p1.6.m6.3.3"><eq id="S2.SS2.p1.6.m6.3.3.3.cmml" xref="S2.SS2.p1.6.m6.3.3.3"></eq><apply id="S2.SS2.p1.6.m6.3.3.4.cmml" xref="S2.SS2.p1.6.m6.3.3.4"><csymbol cd="ambiguous" id="S2.SS2.p1.6.m6.3.3.4.1.cmml" xref="S2.SS2.p1.6.m6.3.3.4">superscript</csymbol><ci id="S2.SS2.p1.6.m6.3.3.4.2.cmml" xref="S2.SS2.p1.6.m6.3.3.4.2">𝑈</ci><apply id="S2.SS2.p1.6.m6.3.3.4.3.cmml" xref="S2.SS2.p1.6.m6.3.3.4.3"><in id="S2.SS2.p1.6.m6.3.3.4.3.1.cmml" xref="S2.SS2.p1.6.m6.3.3.4.3.1"></in><ci id="S2.SS2.p1.6.m6.3.3.4.3.2.cmml" xref="S2.SS2.p1.6.m6.3.3.4.3.2">𝑗</ci><ci id="S2.SS2.p1.6.m6.3.3.4.3.3.cmml" xref="S2.SS2.p1.6.m6.3.3.4.3.3">𝑏</ci></apply></apply><apply id="S2.SS2.p1.6.m6.3.3.2.3.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2"><csymbol cd="latexml" id="S2.SS2.p1.6.m6.3.3.2.3.1.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.3">conditional-set</csymbol><apply id="S2.SS2.p1.6.m6.2.2.1.1.1.cmml" xref="S2.SS2.p1.6.m6.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.6.m6.2.2.1.1.1.1.cmml" xref="S2.SS2.p1.6.m6.2.2.1.1.1">subscript</csymbol><ci id="S2.SS2.p1.6.m6.2.2.1.1.1.2.cmml" xref="S2.SS2.p1.6.m6.2.2.1.1.1.2">𝐮</ci><ci id="S2.SS2.p1.6.m6.2.2.1.1.1.3.cmml" xref="S2.SS2.p1.6.m6.2.2.1.1.1.3">𝑗</ci></apply><apply id="S2.SS2.p1.6.m6.3.3.2.2.2.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2"><and id="S2.SS2.p1.6.m6.3.3.2.2.2a.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2"></and><apply id="S2.SS2.p1.6.m6.3.3.2.2.2b.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2"><lt id="S2.SS2.p1.6.m6.3.3.2.2.2.3.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2.3"></lt><apply id="S2.SS2.p1.6.m6.3.3.2.2.2.2.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.p1.6.m6.3.3.2.2.2.2.1.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2.2">subscript</csymbol><ci id="S2.SS2.p1.6.m6.3.3.2.2.2.2.2.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2.2.2">𝐽</ci><apply id="S2.SS2.p1.6.m6.1.1.1.1.1.cmml" xref="S2.SS2.p1.6.m6.1.1.1.1"><minus id="S2.SS2.p1.6.m6.1.1.1.1.1.1.cmml" xref="S2.SS2.p1.6.m6.1.1.1.1.1.1"></minus><ci id="S2.SS2.p1.6.m6.1.1.1.1.1.2.cmml" xref="S2.SS2.p1.6.m6.1.1.1.1.1.2">𝑏</ci><cn type="integer" id="S2.SS2.p1.6.m6.1.1.1.1.1.3.cmml" xref="S2.SS2.p1.6.m6.1.1.1.1.1.3">1</cn></apply></apply><ci id="S2.SS2.p1.6.m6.3.3.2.2.2.4.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2.4">𝑗</ci></apply><apply id="S2.SS2.p1.6.m6.3.3.2.2.2c.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2"><leq id="S2.SS2.p1.6.m6.3.3.2.2.2.5.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2.5"></leq><share href="#S2.SS2.p1.6.m6.3.3.2.2.2.4.cmml" id="S2.SS2.p1.6.m6.3.3.2.2.2d.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2"></share><apply id="S2.SS2.p1.6.m6.3.3.2.2.2.6.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2.6"><csymbol cd="ambiguous" id="S2.SS2.p1.6.m6.3.3.2.2.2.6.1.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2.6">subscript</csymbol><ci id="S2.SS2.p1.6.m6.3.3.2.2.2.6.2.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2.6.2">𝐽</ci><ci id="S2.SS2.p1.6.m6.3.3.2.2.2.6.3.cmml" xref="S2.SS2.p1.6.m6.3.3.2.2.2.6.3">𝑏</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.6.m6.3c">U^{j\in b}=\{{\mathbf{u}}_{j}|J_{(b-1)}&lt;j\leq J_{b}\}</annotation></semantics></math> is generated by the speech subnetwork from speech input <math id="S2.SS2.p1.7.m7.3" class="ltx_Math" alttext="X^{t\in b}=\{{\mathbf{x}}_{t}|T_{(b-1)}&lt;t\leq T_{b}\}" display="inline"><semantics id="S2.SS2.p1.7.m7.3a"><mrow id="S2.SS2.p1.7.m7.3.3" xref="S2.SS2.p1.7.m7.3.3.cmml"><msup id="S2.SS2.p1.7.m7.3.3.4" xref="S2.SS2.p1.7.m7.3.3.4.cmml"><mi id="S2.SS2.p1.7.m7.3.3.4.2" xref="S2.SS2.p1.7.m7.3.3.4.2.cmml">X</mi><mrow id="S2.SS2.p1.7.m7.3.3.4.3" xref="S2.SS2.p1.7.m7.3.3.4.3.cmml"><mi id="S2.SS2.p1.7.m7.3.3.4.3.2" xref="S2.SS2.p1.7.m7.3.3.4.3.2.cmml">t</mi><mo id="S2.SS2.p1.7.m7.3.3.4.3.1" xref="S2.SS2.p1.7.m7.3.3.4.3.1.cmml">∈</mo><mi id="S2.SS2.p1.7.m7.3.3.4.3.3" xref="S2.SS2.p1.7.m7.3.3.4.3.3.cmml">b</mi></mrow></msup><mo id="S2.SS2.p1.7.m7.3.3.3" xref="S2.SS2.p1.7.m7.3.3.3.cmml">=</mo><mrow id="S2.SS2.p1.7.m7.3.3.2.2" xref="S2.SS2.p1.7.m7.3.3.2.3.cmml"><mo stretchy="false" id="S2.SS2.p1.7.m7.3.3.2.2.3" xref="S2.SS2.p1.7.m7.3.3.2.3.1.cmml">{</mo><msub id="S2.SS2.p1.7.m7.2.2.1.1.1" xref="S2.SS2.p1.7.m7.2.2.1.1.1.cmml"><mi id="S2.SS2.p1.7.m7.2.2.1.1.1.2" xref="S2.SS2.p1.7.m7.2.2.1.1.1.2.cmml">𝐱</mi><mi id="S2.SS2.p1.7.m7.2.2.1.1.1.3" xref="S2.SS2.p1.7.m7.2.2.1.1.1.3.cmml">t</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS2.p1.7.m7.3.3.2.2.4" xref="S2.SS2.p1.7.m7.3.3.2.3.1.cmml">|</mo><mrow id="S2.SS2.p1.7.m7.3.3.2.2.2" xref="S2.SS2.p1.7.m7.3.3.2.2.2.cmml"><msub id="S2.SS2.p1.7.m7.3.3.2.2.2.2" xref="S2.SS2.p1.7.m7.3.3.2.2.2.2.cmml"><mi id="S2.SS2.p1.7.m7.3.3.2.2.2.2.2" xref="S2.SS2.p1.7.m7.3.3.2.2.2.2.2.cmml">T</mi><mrow id="S2.SS2.p1.7.m7.1.1.1.1" xref="S2.SS2.p1.7.m7.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS2.p1.7.m7.1.1.1.1.2" xref="S2.SS2.p1.7.m7.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p1.7.m7.1.1.1.1.1" xref="S2.SS2.p1.7.m7.1.1.1.1.1.cmml"><mi id="S2.SS2.p1.7.m7.1.1.1.1.1.2" xref="S2.SS2.p1.7.m7.1.1.1.1.1.2.cmml">b</mi><mo id="S2.SS2.p1.7.m7.1.1.1.1.1.1" xref="S2.SS2.p1.7.m7.1.1.1.1.1.1.cmml">−</mo><mn id="S2.SS2.p1.7.m7.1.1.1.1.1.3" xref="S2.SS2.p1.7.m7.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS2.p1.7.m7.1.1.1.1.3" xref="S2.SS2.p1.7.m7.1.1.1.1.1.cmml">)</mo></mrow></msub><mo id="S2.SS2.p1.7.m7.3.3.2.2.2.3" xref="S2.SS2.p1.7.m7.3.3.2.2.2.3.cmml">&lt;</mo><mi id="S2.SS2.p1.7.m7.3.3.2.2.2.4" xref="S2.SS2.p1.7.m7.3.3.2.2.2.4.cmml">t</mi><mo id="S2.SS2.p1.7.m7.3.3.2.2.2.5" xref="S2.SS2.p1.7.m7.3.3.2.2.2.5.cmml">≤</mo><msub id="S2.SS2.p1.7.m7.3.3.2.2.2.6" xref="S2.SS2.p1.7.m7.3.3.2.2.2.6.cmml"><mi id="S2.SS2.p1.7.m7.3.3.2.2.2.6.2" xref="S2.SS2.p1.7.m7.3.3.2.2.2.6.2.cmml">T</mi><mi id="S2.SS2.p1.7.m7.3.3.2.2.2.6.3" xref="S2.SS2.p1.7.m7.3.3.2.2.2.6.3.cmml">b</mi></msub></mrow><mo stretchy="false" id="S2.SS2.p1.7.m7.3.3.2.2.5" xref="S2.SS2.p1.7.m7.3.3.2.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.7.m7.3b"><apply id="S2.SS2.p1.7.m7.3.3.cmml" xref="S2.SS2.p1.7.m7.3.3"><eq id="S2.SS2.p1.7.m7.3.3.3.cmml" xref="S2.SS2.p1.7.m7.3.3.3"></eq><apply id="S2.SS2.p1.7.m7.3.3.4.cmml" xref="S2.SS2.p1.7.m7.3.3.4"><csymbol cd="ambiguous" id="S2.SS2.p1.7.m7.3.3.4.1.cmml" xref="S2.SS2.p1.7.m7.3.3.4">superscript</csymbol><ci id="S2.SS2.p1.7.m7.3.3.4.2.cmml" xref="S2.SS2.p1.7.m7.3.3.4.2">𝑋</ci><apply id="S2.SS2.p1.7.m7.3.3.4.3.cmml" xref="S2.SS2.p1.7.m7.3.3.4.3"><in id="S2.SS2.p1.7.m7.3.3.4.3.1.cmml" xref="S2.SS2.p1.7.m7.3.3.4.3.1"></in><ci id="S2.SS2.p1.7.m7.3.3.4.3.2.cmml" xref="S2.SS2.p1.7.m7.3.3.4.3.2">𝑡</ci><ci id="S2.SS2.p1.7.m7.3.3.4.3.3.cmml" xref="S2.SS2.p1.7.m7.3.3.4.3.3">𝑏</ci></apply></apply><apply id="S2.SS2.p1.7.m7.3.3.2.3.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2"><csymbol cd="latexml" id="S2.SS2.p1.7.m7.3.3.2.3.1.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.3">conditional-set</csymbol><apply id="S2.SS2.p1.7.m7.2.2.1.1.1.cmml" xref="S2.SS2.p1.7.m7.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.7.m7.2.2.1.1.1.1.cmml" xref="S2.SS2.p1.7.m7.2.2.1.1.1">subscript</csymbol><ci id="S2.SS2.p1.7.m7.2.2.1.1.1.2.cmml" xref="S2.SS2.p1.7.m7.2.2.1.1.1.2">𝐱</ci><ci id="S2.SS2.p1.7.m7.2.2.1.1.1.3.cmml" xref="S2.SS2.p1.7.m7.2.2.1.1.1.3">𝑡</ci></apply><apply id="S2.SS2.p1.7.m7.3.3.2.2.2.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2"><and id="S2.SS2.p1.7.m7.3.3.2.2.2a.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2"></and><apply id="S2.SS2.p1.7.m7.3.3.2.2.2b.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2"><lt id="S2.SS2.p1.7.m7.3.3.2.2.2.3.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2.3"></lt><apply id="S2.SS2.p1.7.m7.3.3.2.2.2.2.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.p1.7.m7.3.3.2.2.2.2.1.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2.2">subscript</csymbol><ci id="S2.SS2.p1.7.m7.3.3.2.2.2.2.2.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2.2.2">𝑇</ci><apply id="S2.SS2.p1.7.m7.1.1.1.1.1.cmml" xref="S2.SS2.p1.7.m7.1.1.1.1"><minus id="S2.SS2.p1.7.m7.1.1.1.1.1.1.cmml" xref="S2.SS2.p1.7.m7.1.1.1.1.1.1"></minus><ci id="S2.SS2.p1.7.m7.1.1.1.1.1.2.cmml" xref="S2.SS2.p1.7.m7.1.1.1.1.1.2">𝑏</ci><cn type="integer" id="S2.SS2.p1.7.m7.1.1.1.1.1.3.cmml" xref="S2.SS2.p1.7.m7.1.1.1.1.1.3">1</cn></apply></apply><ci id="S2.SS2.p1.7.m7.3.3.2.2.2.4.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2.4">𝑡</ci></apply><apply id="S2.SS2.p1.7.m7.3.3.2.2.2c.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2"><leq id="S2.SS2.p1.7.m7.3.3.2.2.2.5.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2.5"></leq><share href="#S2.SS2.p1.7.m7.3.3.2.2.2.4.cmml" id="S2.SS2.p1.7.m7.3.3.2.2.2d.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2"></share><apply id="S2.SS2.p1.7.m7.3.3.2.2.2.6.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2.6"><csymbol cd="ambiguous" id="S2.SS2.p1.7.m7.3.3.2.2.2.6.1.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2.6">subscript</csymbol><ci id="S2.SS2.p1.7.m7.3.3.2.2.2.6.2.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2.6.2">𝑇</ci><ci id="S2.SS2.p1.7.m7.3.3.2.2.2.6.3.cmml" xref="S2.SS2.p1.7.m7.3.3.2.2.2.6.3">𝑏</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.7.m7.3c">X^{t\in b}=\{{\mathbf{x}}_{t}|T_{(b-1)}&lt;t\leq T_{b}\}</annotation></semantics></math> for the <math id="S2.SS2.p1.8.m8.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S2.SS2.p1.8.m8.1a"><mi id="S2.SS2.p1.8.m8.1.1" xref="S2.SS2.p1.8.m8.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.8.m8.1b"><ci id="S2.SS2.p1.8.m8.1.1.cmml" xref="S2.SS2.p1.8.m8.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.8.m8.1c">b</annotation></semantics></math>-th block.
Thus, when the prompts are used for streaming ASR, the full audio prompt <math id="S2.SS2.p1.9.m9.1" class="ltx_Math" alttext="U^{J}" display="inline"><semantics id="S2.SS2.p1.9.m9.1a"><msup id="S2.SS2.p1.9.m9.1.1" xref="S2.SS2.p1.9.m9.1.1.cmml"><mi id="S2.SS2.p1.9.m9.1.1.2" xref="S2.SS2.p1.9.m9.1.1.2.cmml">U</mi><mi id="S2.SS2.p1.9.m9.1.1.3" xref="S2.SS2.p1.9.m9.1.1.3.cmml">J</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.9.m9.1b"><apply id="S2.SS2.p1.9.m9.1.1.cmml" xref="S2.SS2.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.9.m9.1.1.1.cmml" xref="S2.SS2.p1.9.m9.1.1">superscript</csymbol><ci id="S2.SS2.p1.9.m9.1.1.2.cmml" xref="S2.SS2.p1.9.m9.1.1.2">𝑈</ci><ci id="S2.SS2.p1.9.m9.1.1.3.cmml" xref="S2.SS2.p1.9.m9.1.1.3">𝐽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.9.m9.1c">U^{J}</annotation></semantics></math> cannot be provided from the beginning.
Therefore, we propose a novel procedure that sequentially provides prompts in a blockwise manner.</p>
</div>
<div id="S2.SS2.p2" class="ltx_para">
<p id="S2.SS2.p2.4" class="ltx_p">At the <math id="S2.SS2.p2.1.m1.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S2.SS2.p2.1.m1.1a"><mi id="S2.SS2.p2.1.m1.1.1" xref="S2.SS2.p2.1.m1.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.1.m1.1b"><ci id="S2.SS2.p2.1.m1.1.1.cmml" xref="S2.SS2.p2.1.m1.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.1.m1.1c">b</annotation></semantics></math>-th block, the prompts are only created up to <math id="S2.SS2.p2.2.m2.1" class="ltx_Math" alttext="U^{J_{b}}" display="inline"><semantics id="S2.SS2.p2.2.m2.1a"><msup id="S2.SS2.p2.2.m2.1.1" xref="S2.SS2.p2.2.m2.1.1.cmml"><mi id="S2.SS2.p2.2.m2.1.1.2" xref="S2.SS2.p2.2.m2.1.1.2.cmml">U</mi><msub id="S2.SS2.p2.2.m2.1.1.3" xref="S2.SS2.p2.2.m2.1.1.3.cmml"><mi id="S2.SS2.p2.2.m2.1.1.3.2" xref="S2.SS2.p2.2.m2.1.1.3.2.cmml">J</mi><mi id="S2.SS2.p2.2.m2.1.1.3.3" xref="S2.SS2.p2.2.m2.1.1.3.3.cmml">b</mi></msub></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.2.m2.1b"><apply id="S2.SS2.p2.2.m2.1.1.cmml" xref="S2.SS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.2.m2.1.1.1.cmml" xref="S2.SS2.p2.2.m2.1.1">superscript</csymbol><ci id="S2.SS2.p2.2.m2.1.1.2.cmml" xref="S2.SS2.p2.2.m2.1.1.2">𝑈</ci><apply id="S2.SS2.p2.2.m2.1.1.3.cmml" xref="S2.SS2.p2.2.m2.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.p2.2.m2.1.1.3.1.cmml" xref="S2.SS2.p2.2.m2.1.1.3">subscript</csymbol><ci id="S2.SS2.p2.2.m2.1.1.3.2.cmml" xref="S2.SS2.p2.2.m2.1.1.3.2">𝐽</ci><ci id="S2.SS2.p2.2.m2.1.1.3.3.cmml" xref="S2.SS2.p2.2.m2.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.2.m2.1c">U^{J_{b}}</annotation></semantics></math>.
The decoder estimates the output label sequence based on the partial prompts <math id="S2.SS2.p2.3.m3.1" class="ltx_Math" alttext="U^{J_{b}}" display="inline"><semantics id="S2.SS2.p2.3.m3.1a"><msup id="S2.SS2.p2.3.m3.1.1" xref="S2.SS2.p2.3.m3.1.1.cmml"><mi id="S2.SS2.p2.3.m3.1.1.2" xref="S2.SS2.p2.3.m3.1.1.2.cmml">U</mi><msub id="S2.SS2.p2.3.m3.1.1.3" xref="S2.SS2.p2.3.m3.1.1.3.cmml"><mi id="S2.SS2.p2.3.m3.1.1.3.2" xref="S2.SS2.p2.3.m3.1.1.3.2.cmml">J</mi><mi id="S2.SS2.p2.3.m3.1.1.3.3" xref="S2.SS2.p2.3.m3.1.1.3.3.cmml">b</mi></msub></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.3.m3.1b"><apply id="S2.SS2.p2.3.m3.1.1.cmml" xref="S2.SS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.3.m3.1.1.1.cmml" xref="S2.SS2.p2.3.m3.1.1">superscript</csymbol><ci id="S2.SS2.p2.3.m3.1.1.2.cmml" xref="S2.SS2.p2.3.m3.1.1.2">𝑈</ci><apply id="S2.SS2.p2.3.m3.1.1.3.cmml" xref="S2.SS2.p2.3.m3.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.p2.3.m3.1.1.3.1.cmml" xref="S2.SS2.p2.3.m3.1.1.3">subscript</csymbol><ci id="S2.SS2.p2.3.m3.1.1.3.2.cmml" xref="S2.SS2.p2.3.m3.1.1.3.2">𝐽</ci><ci id="S2.SS2.p2.3.m3.1.1.3.3.cmml" xref="S2.SS2.p2.3.m3.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.3.m3.1c">U^{J_{b}}</annotation></semantics></math> instead of <math id="S2.SS2.p2.4.m4.1" class="ltx_Math" alttext="U^{J}" display="inline"><semantics id="S2.SS2.p2.4.m4.1a"><msup id="S2.SS2.p2.4.m4.1.1" xref="S2.SS2.p2.4.m4.1.1.cmml"><mi id="S2.SS2.p2.4.m4.1.1.2" xref="S2.SS2.p2.4.m4.1.1.2.cmml">U</mi><mi id="S2.SS2.p2.4.m4.1.1.3" xref="S2.SS2.p2.4.m4.1.1.3.cmml">J</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.4.m4.1b"><apply id="S2.SS2.p2.4.m4.1.1.cmml" xref="S2.SS2.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.4.m4.1.1.1.cmml" xref="S2.SS2.p2.4.m4.1.1">superscript</csymbol><ci id="S2.SS2.p2.4.m4.1.1.2.cmml" xref="S2.SS2.p2.4.m4.1.1.2">𝑈</ci><ci id="S2.SS2.p2.4.m4.1.1.3.cmml" xref="S2.SS2.p2.4.m4.1.1.3">𝐽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.4.m4.1c">U^{J}</annotation></semantics></math> in Eq. (<a href="#S2.E1" title="In 2.1 Decoder-only architecture for ASR ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>).</p>
<table id="S5.EGx2" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S2.E2"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.E2.m1.3" class="ltx_Math" alttext="\displaystyle\vspace{-0.3cm}p_{\mathrm{dec}}(Y^{i})\approx\prod_{k=1}^{i}p_{\mathrm{dec}}(y_{k}|U^{J_{b}},Y^{(k-1)})\vspace{-0.3cm}" display="inline"><semantics id="S2.E2.m1.3a"><mrow id="S2.E2.m1.3.3" xref="S2.E2.m1.3.3.cmml"><mrow id="S2.E2.m1.2.2.1" xref="S2.E2.m1.2.2.1.cmml"><msub id="S2.E2.m1.2.2.1.3" xref="S2.E2.m1.2.2.1.3.cmml"><mi id="S2.E2.m1.2.2.1.3.2" xref="S2.E2.m1.2.2.1.3.2.cmml">p</mi><mi id="S2.E2.m1.2.2.1.3.3" xref="S2.E2.m1.2.2.1.3.3.cmml">dec</mi></msub><mo lspace="0em" rspace="0em" id="S2.E2.m1.2.2.1.2" xref="S2.E2.m1.2.2.1.2.cmml">​</mo><mrow id="S2.E2.m1.2.2.1.1.1" xref="S2.E2.m1.2.2.1.1.1.1.cmml"><mo stretchy="false" id="S2.E2.m1.2.2.1.1.1.2" xref="S2.E2.m1.2.2.1.1.1.1.cmml">(</mo><msup id="S2.E2.m1.2.2.1.1.1.1" xref="S2.E2.m1.2.2.1.1.1.1.cmml"><mi id="S2.E2.m1.2.2.1.1.1.1.2" xref="S2.E2.m1.2.2.1.1.1.1.2.cmml">Y</mi><mi id="S2.E2.m1.2.2.1.1.1.1.3" xref="S2.E2.m1.2.2.1.1.1.1.3.cmml">i</mi></msup><mo stretchy="false" id="S2.E2.m1.2.2.1.1.1.3" xref="S2.E2.m1.2.2.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.3.3.3" xref="S2.E2.m1.3.3.3.cmml">≈</mo><mrow id="S2.E2.m1.3.3.2" xref="S2.E2.m1.3.3.2.cmml"><mstyle displaystyle="true" id="S2.E2.m1.3.3.2.2" xref="S2.E2.m1.3.3.2.2.cmml"><munderover id="S2.E2.m1.3.3.2.2a" xref="S2.E2.m1.3.3.2.2.cmml"><mo movablelimits="false" id="S2.E2.m1.3.3.2.2.2.2" xref="S2.E2.m1.3.3.2.2.2.2.cmml">∏</mo><mrow id="S2.E2.m1.3.3.2.2.2.3" xref="S2.E2.m1.3.3.2.2.2.3.cmml"><mi id="S2.E2.m1.3.3.2.2.2.3.2" xref="S2.E2.m1.3.3.2.2.2.3.2.cmml">k</mi><mo id="S2.E2.m1.3.3.2.2.2.3.1" xref="S2.E2.m1.3.3.2.2.2.3.1.cmml">=</mo><mn id="S2.E2.m1.3.3.2.2.2.3.3" xref="S2.E2.m1.3.3.2.2.2.3.3.cmml">1</mn></mrow><mi id="S2.E2.m1.3.3.2.2.3" xref="S2.E2.m1.3.3.2.2.3.cmml">i</mi></munderover></mstyle><mrow id="S2.E2.m1.3.3.2.1" xref="S2.E2.m1.3.3.2.1.cmml"><msub id="S2.E2.m1.3.3.2.1.3" xref="S2.E2.m1.3.3.2.1.3.cmml"><mi id="S2.E2.m1.3.3.2.1.3.2" xref="S2.E2.m1.3.3.2.1.3.2.cmml">p</mi><mi id="S2.E2.m1.3.3.2.1.3.3" xref="S2.E2.m1.3.3.2.1.3.3.cmml">dec</mi></msub><mo lspace="0em" rspace="0em" id="S2.E2.m1.3.3.2.1.2" xref="S2.E2.m1.3.3.2.1.2.cmml">​</mo><mrow id="S2.E2.m1.3.3.2.1.1.1" xref="S2.E2.m1.3.3.2.1.1.1.1.cmml"><mo stretchy="false" id="S2.E2.m1.3.3.2.1.1.1.2" xref="S2.E2.m1.3.3.2.1.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.3.3.2.1.1.1.1" xref="S2.E2.m1.3.3.2.1.1.1.1.cmml"><msub id="S2.E2.m1.3.3.2.1.1.1.1.4" xref="S2.E2.m1.3.3.2.1.1.1.1.4.cmml"><mi id="S2.E2.m1.3.3.2.1.1.1.1.4.2" xref="S2.E2.m1.3.3.2.1.1.1.1.4.2.cmml">y</mi><mi id="S2.E2.m1.3.3.2.1.1.1.1.4.3" xref="S2.E2.m1.3.3.2.1.1.1.1.4.3.cmml">k</mi></msub><mo fence="false" id="S2.E2.m1.3.3.2.1.1.1.1.3" xref="S2.E2.m1.3.3.2.1.1.1.1.3.cmml">|</mo><mrow id="S2.E2.m1.3.3.2.1.1.1.1.2.2" xref="S2.E2.m1.3.3.2.1.1.1.1.2.3.cmml"><msup id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.2" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.2.cmml">U</mi><msub id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.cmml"><mi id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.2" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.2.cmml">J</mi><mi id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.3" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.3.cmml">b</mi></msub></msup><mo id="S2.E2.m1.3.3.2.1.1.1.1.2.2.3" xref="S2.E2.m1.3.3.2.1.1.1.1.2.3.cmml">,</mo><msup id="S2.E2.m1.3.3.2.1.1.1.1.2.2.2" xref="S2.E2.m1.3.3.2.1.1.1.1.2.2.2.cmml"><mi id="S2.E2.m1.3.3.2.1.1.1.1.2.2.2.2" xref="S2.E2.m1.3.3.2.1.1.1.1.2.2.2.2.cmml">Y</mi><mrow id="S2.E2.m1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E2.m1.1.1.1.1.2" xref="S2.E2.m1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.1.1.1.1.1.2" xref="S2.E2.m1.1.1.1.1.1.2.cmml">k</mi><mo id="S2.E2.m1.1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.cmml">−</mo><mn id="S2.E2.m1.1.1.1.1.1.3" xref="S2.E2.m1.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.E2.m1.1.1.1.1.3" xref="S2.E2.m1.1.1.1.1.1.cmml">)</mo></mrow></msup></mrow></mrow><mo stretchy="false" id="S2.E2.m1.3.3.2.1.1.1.3" xref="S2.E2.m1.3.3.2.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.3b"><apply id="S2.E2.m1.3.3.cmml" xref="S2.E2.m1.3.3"><approx id="S2.E2.m1.3.3.3.cmml" xref="S2.E2.m1.3.3.3"></approx><apply id="S2.E2.m1.2.2.1.cmml" xref="S2.E2.m1.2.2.1"><times id="S2.E2.m1.2.2.1.2.cmml" xref="S2.E2.m1.2.2.1.2"></times><apply id="S2.E2.m1.2.2.1.3.cmml" xref="S2.E2.m1.2.2.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.2.2.1.3.1.cmml" xref="S2.E2.m1.2.2.1.3">subscript</csymbol><ci id="S2.E2.m1.2.2.1.3.2.cmml" xref="S2.E2.m1.2.2.1.3.2">𝑝</ci><ci id="S2.E2.m1.2.2.1.3.3.cmml" xref="S2.E2.m1.2.2.1.3.3">dec</ci></apply><apply id="S2.E2.m1.2.2.1.1.1.1.cmml" xref="S2.E2.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.2.2.1.1.1.1.1.cmml" xref="S2.E2.m1.2.2.1.1.1">superscript</csymbol><ci id="S2.E2.m1.2.2.1.1.1.1.2.cmml" xref="S2.E2.m1.2.2.1.1.1.1.2">𝑌</ci><ci id="S2.E2.m1.2.2.1.1.1.1.3.cmml" xref="S2.E2.m1.2.2.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S2.E2.m1.3.3.2.cmml" xref="S2.E2.m1.3.3.2"><apply id="S2.E2.m1.3.3.2.2.cmml" xref="S2.E2.m1.3.3.2.2"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.2.2.1.cmml" xref="S2.E2.m1.3.3.2.2">superscript</csymbol><apply id="S2.E2.m1.3.3.2.2.2.cmml" xref="S2.E2.m1.3.3.2.2"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.2.2.2.1.cmml" xref="S2.E2.m1.3.3.2.2">subscript</csymbol><csymbol cd="latexml" id="S2.E2.m1.3.3.2.2.2.2.cmml" xref="S2.E2.m1.3.3.2.2.2.2">product</csymbol><apply id="S2.E2.m1.3.3.2.2.2.3.cmml" xref="S2.E2.m1.3.3.2.2.2.3"><eq id="S2.E2.m1.3.3.2.2.2.3.1.cmml" xref="S2.E2.m1.3.3.2.2.2.3.1"></eq><ci id="S2.E2.m1.3.3.2.2.2.3.2.cmml" xref="S2.E2.m1.3.3.2.2.2.3.2">𝑘</ci><cn type="integer" id="S2.E2.m1.3.3.2.2.2.3.3.cmml" xref="S2.E2.m1.3.3.2.2.2.3.3">1</cn></apply></apply><ci id="S2.E2.m1.3.3.2.2.3.cmml" xref="S2.E2.m1.3.3.2.2.3">𝑖</ci></apply><apply id="S2.E2.m1.3.3.2.1.cmml" xref="S2.E2.m1.3.3.2.1"><times id="S2.E2.m1.3.3.2.1.2.cmml" xref="S2.E2.m1.3.3.2.1.2"></times><apply id="S2.E2.m1.3.3.2.1.3.cmml" xref="S2.E2.m1.3.3.2.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.2.1.3.1.cmml" xref="S2.E2.m1.3.3.2.1.3">subscript</csymbol><ci id="S2.E2.m1.3.3.2.1.3.2.cmml" xref="S2.E2.m1.3.3.2.1.3.2">𝑝</ci><ci id="S2.E2.m1.3.3.2.1.3.3.cmml" xref="S2.E2.m1.3.3.2.1.3.3">dec</ci></apply><apply id="S2.E2.m1.3.3.2.1.1.1.1.cmml" xref="S2.E2.m1.3.3.2.1.1.1"><csymbol cd="latexml" id="S2.E2.m1.3.3.2.1.1.1.1.3.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.3">conditional</csymbol><apply id="S2.E2.m1.3.3.2.1.1.1.1.4.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.4"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.2.1.1.1.1.4.1.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.4">subscript</csymbol><ci id="S2.E2.m1.3.3.2.1.1.1.1.4.2.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.4.2">𝑦</ci><ci id="S2.E2.m1.3.3.2.1.1.1.1.4.3.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.4.3">𝑘</ci></apply><list id="S2.E2.m1.3.3.2.1.1.1.1.2.3.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.2.2"><apply id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.2">𝑈</ci><apply id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.2">𝐽</ci><ci id="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.3.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.1.1.1.3.3">𝑏</ci></apply></apply><apply id="S2.E2.m1.3.3.2.1.1.1.1.2.2.2.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.2.1.1.1.1.2.2.2.1.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.2.2.2">superscript</csymbol><ci id="S2.E2.m1.3.3.2.1.1.1.1.2.2.2.2.cmml" xref="S2.E2.m1.3.3.2.1.1.1.1.2.2.2.2">𝑌</ci><apply id="S2.E2.m1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1"><minus id="S2.E2.m1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1"></minus><ci id="S2.E2.m1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.1.1.1.1.1.2">𝑘</ci><cn type="integer" id="S2.E2.m1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.1.1.1.1.1.3">1</cn></apply></apply></list></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.3c">\displaystyle\vspace{-0.3cm}p_{\mathrm{dec}}(Y^{i})\approx\prod_{k=1}^{i}p_{\mathrm{dec}}(y_{k}|U^{J_{b}},Y^{(k-1)})\vspace{-0.3cm}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p id="S2.SS2.p2.7" class="ltx_p">Similarly in the <math id="S2.SS2.p2.5.m1.1" class="ltx_Math" alttext="(b+1)" display="inline"><semantics id="S2.SS2.p2.5.m1.1a"><mrow id="S2.SS2.p2.5.m1.1.1.1" xref="S2.SS2.p2.5.m1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS2.p2.5.m1.1.1.1.2" xref="S2.SS2.p2.5.m1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p2.5.m1.1.1.1.1" xref="S2.SS2.p2.5.m1.1.1.1.1.cmml"><mi id="S2.SS2.p2.5.m1.1.1.1.1.2" xref="S2.SS2.p2.5.m1.1.1.1.1.2.cmml">b</mi><mo id="S2.SS2.p2.5.m1.1.1.1.1.1" xref="S2.SS2.p2.5.m1.1.1.1.1.1.cmml">+</mo><mn id="S2.SS2.p2.5.m1.1.1.1.1.3" xref="S2.SS2.p2.5.m1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS2.p2.5.m1.1.1.1.3" xref="S2.SS2.p2.5.m1.1.1.1.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.5.m1.1b"><apply id="S2.SS2.p2.5.m1.1.1.1.1.cmml" xref="S2.SS2.p2.5.m1.1.1.1"><plus id="S2.SS2.p2.5.m1.1.1.1.1.1.cmml" xref="S2.SS2.p2.5.m1.1.1.1.1.1"></plus><ci id="S2.SS2.p2.5.m1.1.1.1.1.2.cmml" xref="S2.SS2.p2.5.m1.1.1.1.1.2">𝑏</ci><cn type="integer" id="S2.SS2.p2.5.m1.1.1.1.1.3.cmml" xref="S2.SS2.p2.5.m1.1.1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.5.m1.1c">(b+1)</annotation></semantics></math>-th block, the additional prompts <math id="S2.SS2.p2.6.m2.1" class="ltx_Math" alttext="U^{j\in(b+1)}" display="inline"><semantics id="S2.SS2.p2.6.m2.1a"><msup id="S2.SS2.p2.6.m2.1.2" xref="S2.SS2.p2.6.m2.1.2.cmml"><mi id="S2.SS2.p2.6.m2.1.2.2" xref="S2.SS2.p2.6.m2.1.2.2.cmml">U</mi><mrow id="S2.SS2.p2.6.m2.1.1.1" xref="S2.SS2.p2.6.m2.1.1.1.cmml"><mi id="S2.SS2.p2.6.m2.1.1.1.3" xref="S2.SS2.p2.6.m2.1.1.1.3.cmml">j</mi><mo id="S2.SS2.p2.6.m2.1.1.1.2" xref="S2.SS2.p2.6.m2.1.1.1.2.cmml">∈</mo><mrow id="S2.SS2.p2.6.m2.1.1.1.1.1" xref="S2.SS2.p2.6.m2.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS2.p2.6.m2.1.1.1.1.1.2" xref="S2.SS2.p2.6.m2.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p2.6.m2.1.1.1.1.1.1" xref="S2.SS2.p2.6.m2.1.1.1.1.1.1.cmml"><mi id="S2.SS2.p2.6.m2.1.1.1.1.1.1.2" xref="S2.SS2.p2.6.m2.1.1.1.1.1.1.2.cmml">b</mi><mo id="S2.SS2.p2.6.m2.1.1.1.1.1.1.1" xref="S2.SS2.p2.6.m2.1.1.1.1.1.1.1.cmml">+</mo><mn id="S2.SS2.p2.6.m2.1.1.1.1.1.1.3" xref="S2.SS2.p2.6.m2.1.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS2.p2.6.m2.1.1.1.1.1.3" xref="S2.SS2.p2.6.m2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.6.m2.1b"><apply id="S2.SS2.p2.6.m2.1.2.cmml" xref="S2.SS2.p2.6.m2.1.2"><csymbol cd="ambiguous" id="S2.SS2.p2.6.m2.1.2.1.cmml" xref="S2.SS2.p2.6.m2.1.2">superscript</csymbol><ci id="S2.SS2.p2.6.m2.1.2.2.cmml" xref="S2.SS2.p2.6.m2.1.2.2">𝑈</ci><apply id="S2.SS2.p2.6.m2.1.1.1.cmml" xref="S2.SS2.p2.6.m2.1.1.1"><in id="S2.SS2.p2.6.m2.1.1.1.2.cmml" xref="S2.SS2.p2.6.m2.1.1.1.2"></in><ci id="S2.SS2.p2.6.m2.1.1.1.3.cmml" xref="S2.SS2.p2.6.m2.1.1.1.3">𝑗</ci><apply id="S2.SS2.p2.6.m2.1.1.1.1.1.1.cmml" xref="S2.SS2.p2.6.m2.1.1.1.1.1"><plus id="S2.SS2.p2.6.m2.1.1.1.1.1.1.1.cmml" xref="S2.SS2.p2.6.m2.1.1.1.1.1.1.1"></plus><ci id="S2.SS2.p2.6.m2.1.1.1.1.1.1.2.cmml" xref="S2.SS2.p2.6.m2.1.1.1.1.1.1.2">𝑏</ci><cn type="integer" id="S2.SS2.p2.6.m2.1.1.1.1.1.1.3.cmml" xref="S2.SS2.p2.6.m2.1.1.1.1.1.1.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.6.m2.1c">U^{j\in(b+1)}</annotation></semantics></math> is provided to the decoder, and the decoder continues estimation using <math id="S2.SS2.p2.7.m3.1" class="ltx_Math" alttext="U^{J_{(b+1)}}" display="inline"><semantics id="S2.SS2.p2.7.m3.1a"><msup id="S2.SS2.p2.7.m3.1.2" xref="S2.SS2.p2.7.m3.1.2.cmml"><mi id="S2.SS2.p2.7.m3.1.2.2" xref="S2.SS2.p2.7.m3.1.2.2.cmml">U</mi><msub id="S2.SS2.p2.7.m3.1.1.1" xref="S2.SS2.p2.7.m3.1.1.1.cmml"><mi id="S2.SS2.p2.7.m3.1.1.1.3" xref="S2.SS2.p2.7.m3.1.1.1.3.cmml">J</mi><mrow id="S2.SS2.p2.7.m3.1.1.1.1.1.1" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS2.p2.7.m3.1.1.1.1.1.1.2" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p2.7.m3.1.1.1.1.1.1.1" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.cmml"><mi id="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.2" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.2.cmml">b</mi><mo id="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.1" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.1.cmml">+</mo><mn id="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.3" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS2.p2.7.m3.1.1.1.1.1.1.3" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.cmml">)</mo></mrow></msub></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.7.m3.1b"><apply id="S2.SS2.p2.7.m3.1.2.cmml" xref="S2.SS2.p2.7.m3.1.2"><csymbol cd="ambiguous" id="S2.SS2.p2.7.m3.1.2.1.cmml" xref="S2.SS2.p2.7.m3.1.2">superscript</csymbol><ci id="S2.SS2.p2.7.m3.1.2.2.cmml" xref="S2.SS2.p2.7.m3.1.2.2">𝑈</ci><apply id="S2.SS2.p2.7.m3.1.1.1.cmml" xref="S2.SS2.p2.7.m3.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.7.m3.1.1.1.2.cmml" xref="S2.SS2.p2.7.m3.1.1.1">subscript</csymbol><ci id="S2.SS2.p2.7.m3.1.1.1.3.cmml" xref="S2.SS2.p2.7.m3.1.1.1.3">𝐽</ci><apply id="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.cmml" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1"><plus id="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.1.cmml" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.1"></plus><ci id="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.2.cmml" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.2">𝑏</ci><cn type="integer" id="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.3.cmml" xref="S2.SS2.p2.7.m3.1.1.1.1.1.1.1.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.7.m3.1c">U^{J_{(b+1)}}</annotation></semantics></math>.
The series of computations is illustrated in Fig. <a href="#S2.F2" title="Figure 2 ‣ 2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
<div id="S2.SS2.p3" class="ltx_para">
<p id="S2.SS2.p3.3" class="ltx_p">The inference process is valid when the attention computations are properly masked out.
When computing attention for the added prompts <math id="S2.SS2.p3.1.m1.1" class="ltx_Math" alttext="U^{j\in b}" display="inline"><semantics id="S2.SS2.p3.1.m1.1a"><msup id="S2.SS2.p3.1.m1.1.1" xref="S2.SS2.p3.1.m1.1.1.cmml"><mi id="S2.SS2.p3.1.m1.1.1.2" xref="S2.SS2.p3.1.m1.1.1.2.cmml">U</mi><mrow id="S2.SS2.p3.1.m1.1.1.3" xref="S2.SS2.p3.1.m1.1.1.3.cmml"><mi id="S2.SS2.p3.1.m1.1.1.3.2" xref="S2.SS2.p3.1.m1.1.1.3.2.cmml">j</mi><mo id="S2.SS2.p3.1.m1.1.1.3.1" xref="S2.SS2.p3.1.m1.1.1.3.1.cmml">∈</mo><mi id="S2.SS2.p3.1.m1.1.1.3.3" xref="S2.SS2.p3.1.m1.1.1.3.3.cmml">b</mi></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.1.m1.1b"><apply id="S2.SS2.p3.1.m1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p3.1.m1.1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1">superscript</csymbol><ci id="S2.SS2.p3.1.m1.1.1.2.cmml" xref="S2.SS2.p3.1.m1.1.1.2">𝑈</ci><apply id="S2.SS2.p3.1.m1.1.1.3.cmml" xref="S2.SS2.p3.1.m1.1.1.3"><in id="S2.SS2.p3.1.m1.1.1.3.1.cmml" xref="S2.SS2.p3.1.m1.1.1.3.1"></in><ci id="S2.SS2.p3.1.m1.1.1.3.2.cmml" xref="S2.SS2.p3.1.m1.1.1.3.2">𝑗</ci><ci id="S2.SS2.p3.1.m1.1.1.3.3.cmml" xref="S2.SS2.p3.1.m1.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.1.m1.1c">U^{j\in b}</annotation></semantics></math>, the mask is created such that they do not attend to the output tokens <math id="S2.SS2.p3.2.m2.1" class="ltx_Math" alttext="Y^{(i-1)}" display="inline"><semantics id="S2.SS2.p3.2.m2.1a"><msup id="S2.SS2.p3.2.m2.1.2" xref="S2.SS2.p3.2.m2.1.2.cmml"><mi id="S2.SS2.p3.2.m2.1.2.2" xref="S2.SS2.p3.2.m2.1.2.2.cmml">Y</mi><mrow id="S2.SS2.p3.2.m2.1.1.1.1" xref="S2.SS2.p3.2.m2.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS2.p3.2.m2.1.1.1.1.2" xref="S2.SS2.p3.2.m2.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p3.2.m2.1.1.1.1.1" xref="S2.SS2.p3.2.m2.1.1.1.1.1.cmml"><mi id="S2.SS2.p3.2.m2.1.1.1.1.1.2" xref="S2.SS2.p3.2.m2.1.1.1.1.1.2.cmml">i</mi><mo id="S2.SS2.p3.2.m2.1.1.1.1.1.1" xref="S2.SS2.p3.2.m2.1.1.1.1.1.1.cmml">−</mo><mn id="S2.SS2.p3.2.m2.1.1.1.1.1.3" xref="S2.SS2.p3.2.m2.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS2.p3.2.m2.1.1.1.1.3" xref="S2.SS2.p3.2.m2.1.1.1.1.1.cmml">)</mo></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.2.m2.1b"><apply id="S2.SS2.p3.2.m2.1.2.cmml" xref="S2.SS2.p3.2.m2.1.2"><csymbol cd="ambiguous" id="S2.SS2.p3.2.m2.1.2.1.cmml" xref="S2.SS2.p3.2.m2.1.2">superscript</csymbol><ci id="S2.SS2.p3.2.m2.1.2.2.cmml" xref="S2.SS2.p3.2.m2.1.2.2">𝑌</ci><apply id="S2.SS2.p3.2.m2.1.1.1.1.1.cmml" xref="S2.SS2.p3.2.m2.1.1.1.1"><minus id="S2.SS2.p3.2.m2.1.1.1.1.1.1.cmml" xref="S2.SS2.p3.2.m2.1.1.1.1.1.1"></minus><ci id="S2.SS2.p3.2.m2.1.1.1.1.1.2.cmml" xref="S2.SS2.p3.2.m2.1.1.1.1.1.2">𝑖</ci><cn type="integer" id="S2.SS2.p3.2.m2.1.1.1.1.1.3.cmml" xref="S2.SS2.p3.2.m2.1.1.1.1.1.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.2.m2.1c">Y^{(i-1)}</annotation></semantics></math> and only attend to the past prompts <math id="S2.SS2.p3.3.m3.1" class="ltx_Math" alttext="U^{J_{(b-1)}}" display="inline"><semantics id="S2.SS2.p3.3.m3.1a"><msup id="S2.SS2.p3.3.m3.1.2" xref="S2.SS2.p3.3.m3.1.2.cmml"><mi id="S2.SS2.p3.3.m3.1.2.2" xref="S2.SS2.p3.3.m3.1.2.2.cmml">U</mi><msub id="S2.SS2.p3.3.m3.1.1.1" xref="S2.SS2.p3.3.m3.1.1.1.cmml"><mi id="S2.SS2.p3.3.m3.1.1.1.3" xref="S2.SS2.p3.3.m3.1.1.1.3.cmml">J</mi><mrow id="S2.SS2.p3.3.m3.1.1.1.1.1.1" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS2.p3.3.m3.1.1.1.1.1.1.2" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p3.3.m3.1.1.1.1.1.1.1" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.cmml"><mi id="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.2" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.2.cmml">b</mi><mo id="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.1" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.1.cmml">−</mo><mn id="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.3" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS2.p3.3.m3.1.1.1.1.1.1.3" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.cmml">)</mo></mrow></msub></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.3.m3.1b"><apply id="S2.SS2.p3.3.m3.1.2.cmml" xref="S2.SS2.p3.3.m3.1.2"><csymbol cd="ambiguous" id="S2.SS2.p3.3.m3.1.2.1.cmml" xref="S2.SS2.p3.3.m3.1.2">superscript</csymbol><ci id="S2.SS2.p3.3.m3.1.2.2.cmml" xref="S2.SS2.p3.3.m3.1.2.2">𝑈</ci><apply id="S2.SS2.p3.3.m3.1.1.1.cmml" xref="S2.SS2.p3.3.m3.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p3.3.m3.1.1.1.2.cmml" xref="S2.SS2.p3.3.m3.1.1.1">subscript</csymbol><ci id="S2.SS2.p3.3.m3.1.1.1.3.cmml" xref="S2.SS2.p3.3.m3.1.1.1.3">𝐽</ci><apply id="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.cmml" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1"><minus id="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.1.cmml" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.1"></minus><ci id="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.2.cmml" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.2">𝑏</ci><cn type="integer" id="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.3.cmml" xref="S2.SS2.p3.3.m3.1.1.1.1.1.1.1.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.3.m3.1c">U^{J_{(b-1)}}</annotation></semantics></math>
We also cache the prompts and computed intermediate values for efficiency, as highlighted on the right-hand side of Fig. <a href="#S2.F2" title="Figure 2 ‣ 2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
<figure id="S2.F2" class="ltx_figure"><img src="/html/2406.16107/assets/x2.png" id="S2.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="368" height="200" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Blockwise processing of prompt generation for decoder-only architecture.</figcaption>
</figure>
</section>
<section id="S2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span>Prompts generation methods</h3>

<div id="S2.SS3.p1" class="ltx_para">
<p id="S2.SS3.p1.8" class="ltx_p">As the prompts are computed in a blockwise manner using the speech subnetwork (see Sec. <a href="#S2.SS2" title="2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2</span></a>), we employ the contextual blockwise processing method <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite> to construct our speech subnetwork.
In blockwise processing, the model introduce an additional context embedding <math id="S2.SS3.p1.1.m1.1" class="ltx_Math" alttext="{\mathbf{c}}_{b}" display="inline"><semantics id="S2.SS3.p1.1.m1.1a"><msub id="S2.SS3.p1.1.m1.1.1" xref="S2.SS3.p1.1.m1.1.1.cmml"><mi id="S2.SS3.p1.1.m1.1.1.2" xref="S2.SS3.p1.1.m1.1.1.2.cmml">𝐜</mi><mi id="S2.SS3.p1.1.m1.1.1.3" xref="S2.SS3.p1.1.m1.1.1.3.cmml">b</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.1.m1.1b"><apply id="S2.SS3.p1.1.m1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.1.m1.1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1">subscript</csymbol><ci id="S2.SS3.p1.1.m1.1.1.2.cmml" xref="S2.SS3.p1.1.m1.1.1.2">𝐜</ci><ci id="S2.SS3.p1.1.m1.1.1.3.cmml" xref="S2.SS3.p1.1.m1.1.1.3">𝑏</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.1.m1.1c">{\mathbf{c}}_{b}</annotation></semantics></math> to use not only local information within the <math id="S2.SS3.p1.2.m2.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S2.SS3.p1.2.m2.1a"><mi id="S2.SS3.p1.2.m2.1.1" xref="S2.SS3.p1.2.m2.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.2.m2.1b"><ci id="S2.SS3.p1.2.m2.1.1.cmml" xref="S2.SS3.p1.2.m2.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.2.m2.1c">b</annotation></semantics></math>-th block but also global context information.
Each speech subnetwork layer inherits the context embedding <math id="S2.SS3.p1.3.m3.1" class="ltx_Math" alttext="{\mathbf{c}}_{b}" display="inline"><semantics id="S2.SS3.p1.3.m3.1a"><msub id="S2.SS3.p1.3.m3.1.1" xref="S2.SS3.p1.3.m3.1.1.cmml"><mi id="S2.SS3.p1.3.m3.1.1.2" xref="S2.SS3.p1.3.m3.1.1.2.cmml">𝐜</mi><mi id="S2.SS3.p1.3.m3.1.1.3" xref="S2.SS3.p1.3.m3.1.1.3.cmml">b</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.3.m3.1b"><apply id="S2.SS3.p1.3.m3.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.3.m3.1.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1">subscript</csymbol><ci id="S2.SS3.p1.3.m3.1.1.2.cmml" xref="S2.SS3.p1.3.m3.1.1.2">𝐜</ci><ci id="S2.SS3.p1.3.m3.1.1.3.cmml" xref="S2.SS3.p1.3.m3.1.1.3">𝑏</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.3.m3.1c">{\mathbf{c}}_{b}</annotation></semantics></math> to the upper layer of the next block.
Thus, the output at <math id="S2.SS3.p1.4.m4.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S2.SS3.p1.4.m4.1a"><mi id="S2.SS3.p1.4.m4.1.1" xref="S2.SS3.p1.4.m4.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.4.m4.1b"><ci id="S2.SS3.p1.4.m4.1.1.cmml" xref="S2.SS3.p1.4.m4.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.4.m4.1c">n</annotation></semantics></math>-th layer of the speech subnetwork <math id="S2.SS3.p1.5.m5.1" class="ltx_Math" alttext="S_{n}(\cdot)" display="inline"><semantics id="S2.SS3.p1.5.m5.1a"><mrow id="S2.SS3.p1.5.m5.1.2" xref="S2.SS3.p1.5.m5.1.2.cmml"><msub id="S2.SS3.p1.5.m5.1.2.2" xref="S2.SS3.p1.5.m5.1.2.2.cmml"><mi id="S2.SS3.p1.5.m5.1.2.2.2" xref="S2.SS3.p1.5.m5.1.2.2.2.cmml">S</mi><mi id="S2.SS3.p1.5.m5.1.2.2.3" xref="S2.SS3.p1.5.m5.1.2.2.3.cmml">n</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS3.p1.5.m5.1.2.1" xref="S2.SS3.p1.5.m5.1.2.1.cmml">​</mo><mrow id="S2.SS3.p1.5.m5.1.2.3.2" xref="S2.SS3.p1.5.m5.1.2.cmml"><mo stretchy="false" id="S2.SS3.p1.5.m5.1.2.3.2.1" xref="S2.SS3.p1.5.m5.1.2.cmml">(</mo><mo lspace="0em" rspace="0em" id="S2.SS3.p1.5.m5.1.1" xref="S2.SS3.p1.5.m5.1.1.cmml">⋅</mo><mo stretchy="false" id="S2.SS3.p1.5.m5.1.2.3.2.2" xref="S2.SS3.p1.5.m5.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.5.m5.1b"><apply id="S2.SS3.p1.5.m5.1.2.cmml" xref="S2.SS3.p1.5.m5.1.2"><times id="S2.SS3.p1.5.m5.1.2.1.cmml" xref="S2.SS3.p1.5.m5.1.2.1"></times><apply id="S2.SS3.p1.5.m5.1.2.2.cmml" xref="S2.SS3.p1.5.m5.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.p1.5.m5.1.2.2.1.cmml" xref="S2.SS3.p1.5.m5.1.2.2">subscript</csymbol><ci id="S2.SS3.p1.5.m5.1.2.2.2.cmml" xref="S2.SS3.p1.5.m5.1.2.2.2">𝑆</ci><ci id="S2.SS3.p1.5.m5.1.2.2.3.cmml" xref="S2.SS3.p1.5.m5.1.2.2.3">𝑛</ci></apply><ci id="S2.SS3.p1.5.m5.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.5.m5.1c">S_{n}(\cdot)</annotation></semantics></math> in the b-th block, <math id="S2.SS3.p1.6.m6.2" class="ltx_Math" alttext="O_{n,b}" display="inline"><semantics id="S2.SS3.p1.6.m6.2a"><msub id="S2.SS3.p1.6.m6.2.3" xref="S2.SS3.p1.6.m6.2.3.cmml"><mi id="S2.SS3.p1.6.m6.2.3.2" xref="S2.SS3.p1.6.m6.2.3.2.cmml">O</mi><mrow id="S2.SS3.p1.6.m6.2.2.2.4" xref="S2.SS3.p1.6.m6.2.2.2.3.cmml"><mi id="S2.SS3.p1.6.m6.1.1.1.1" xref="S2.SS3.p1.6.m6.1.1.1.1.cmml">n</mi><mo id="S2.SS3.p1.6.m6.2.2.2.4.1" xref="S2.SS3.p1.6.m6.2.2.2.3.cmml">,</mo><mi id="S2.SS3.p1.6.m6.2.2.2.2" xref="S2.SS3.p1.6.m6.2.2.2.2.cmml">b</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.6.m6.2b"><apply id="S2.SS3.p1.6.m6.2.3.cmml" xref="S2.SS3.p1.6.m6.2.3"><csymbol cd="ambiguous" id="S2.SS3.p1.6.m6.2.3.1.cmml" xref="S2.SS3.p1.6.m6.2.3">subscript</csymbol><ci id="S2.SS3.p1.6.m6.2.3.2.cmml" xref="S2.SS3.p1.6.m6.2.3.2">𝑂</ci><list id="S2.SS3.p1.6.m6.2.2.2.3.cmml" xref="S2.SS3.p1.6.m6.2.2.2.4"><ci id="S2.SS3.p1.6.m6.1.1.1.1.cmml" xref="S2.SS3.p1.6.m6.1.1.1.1">𝑛</ci><ci id="S2.SS3.p1.6.m6.2.2.2.2.cmml" xref="S2.SS3.p1.6.m6.2.2.2.2">𝑏</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.6.m6.2c">O_{n,b}</annotation></semantics></math>, is computed based on the concatenated sequence of the previous layer output <math id="S2.SS3.p1.7.m7.2" class="ltx_Math" alttext="O_{(n-1),b}" display="inline"><semantics id="S2.SS3.p1.7.m7.2a"><msub id="S2.SS3.p1.7.m7.2.3" xref="S2.SS3.p1.7.m7.2.3.cmml"><mi id="S2.SS3.p1.7.m7.2.3.2" xref="S2.SS3.p1.7.m7.2.3.2.cmml">O</mi><mrow id="S2.SS3.p1.7.m7.2.2.2.2" xref="S2.SS3.p1.7.m7.2.2.2.3.cmml"><mrow id="S2.SS3.p1.7.m7.2.2.2.2.1.1" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.cmml"><mo stretchy="false" id="S2.SS3.p1.7.m7.2.2.2.2.1.1.2" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.cmml">(</mo><mrow id="S2.SS3.p1.7.m7.2.2.2.2.1.1.1" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.cmml"><mi id="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.2" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.2.cmml">n</mi><mo id="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.1" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.1.cmml">−</mo><mn id="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.3" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS3.p1.7.m7.2.2.2.2.1.1.3" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.cmml">)</mo></mrow><mo id="S2.SS3.p1.7.m7.2.2.2.2.2" xref="S2.SS3.p1.7.m7.2.2.2.3.cmml">,</mo><mi id="S2.SS3.p1.7.m7.1.1.1.1" xref="S2.SS3.p1.7.m7.1.1.1.1.cmml">b</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.7.m7.2b"><apply id="S2.SS3.p1.7.m7.2.3.cmml" xref="S2.SS3.p1.7.m7.2.3"><csymbol cd="ambiguous" id="S2.SS3.p1.7.m7.2.3.1.cmml" xref="S2.SS3.p1.7.m7.2.3">subscript</csymbol><ci id="S2.SS3.p1.7.m7.2.3.2.cmml" xref="S2.SS3.p1.7.m7.2.3.2">𝑂</ci><list id="S2.SS3.p1.7.m7.2.2.2.3.cmml" xref="S2.SS3.p1.7.m7.2.2.2.2"><apply id="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.cmml" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1"><minus id="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.1.cmml" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.1"></minus><ci id="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.2.cmml" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.2">𝑛</ci><cn type="integer" id="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.3.cmml" xref="S2.SS3.p1.7.m7.2.2.2.2.1.1.1.3">1</cn></apply><ci id="S2.SS3.p1.7.m7.1.1.1.1.cmml" xref="S2.SS3.p1.7.m7.1.1.1.1">𝑏</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.7.m7.2c">O_{(n-1),b}</annotation></semantics></math> and the context embedding vector <math id="S2.SS3.p1.8.m8.2" class="ltx_Math" alttext="{\mathbf{c}}_{(n-1),(b-1)}" display="inline"><semantics id="S2.SS3.p1.8.m8.2a"><msub id="S2.SS3.p1.8.m8.2.3" xref="S2.SS3.p1.8.m8.2.3.cmml"><mi id="S2.SS3.p1.8.m8.2.3.2" xref="S2.SS3.p1.8.m8.2.3.2.cmml">𝐜</mi><mrow id="S2.SS3.p1.8.m8.2.2.2.2" xref="S2.SS3.p1.8.m8.2.2.2.3.cmml"><mrow id="S2.SS3.p1.8.m8.1.1.1.1.1.1" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS3.p1.8.m8.1.1.1.1.1.1.2" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS3.p1.8.m8.1.1.1.1.1.1.1" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.cmml"><mi id="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.2" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.2.cmml">n</mi><mo id="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.1" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.1.cmml">−</mo><mn id="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.3" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS3.p1.8.m8.1.1.1.1.1.1.3" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.cmml">)</mo></mrow><mo id="S2.SS3.p1.8.m8.2.2.2.2.3" xref="S2.SS3.p1.8.m8.2.2.2.3.cmml">,</mo><mrow id="S2.SS3.p1.8.m8.2.2.2.2.2.1" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.cmml"><mo stretchy="false" id="S2.SS3.p1.8.m8.2.2.2.2.2.1.2" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.cmml">(</mo><mrow id="S2.SS3.p1.8.m8.2.2.2.2.2.1.1" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.cmml"><mi id="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.2" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.2.cmml">b</mi><mo id="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.1" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.1.cmml">−</mo><mn id="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.3" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.SS3.p1.8.m8.2.2.2.2.2.1.3" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.cmml">)</mo></mrow></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.8.m8.2b"><apply id="S2.SS3.p1.8.m8.2.3.cmml" xref="S2.SS3.p1.8.m8.2.3"><csymbol cd="ambiguous" id="S2.SS3.p1.8.m8.2.3.1.cmml" xref="S2.SS3.p1.8.m8.2.3">subscript</csymbol><ci id="S2.SS3.p1.8.m8.2.3.2.cmml" xref="S2.SS3.p1.8.m8.2.3.2">𝐜</ci><list id="S2.SS3.p1.8.m8.2.2.2.3.cmml" xref="S2.SS3.p1.8.m8.2.2.2.2"><apply id="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.cmml" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1"><minus id="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.1"></minus><ci id="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.2.cmml" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.2">𝑛</ci><cn type="integer" id="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.3.cmml" xref="S2.SS3.p1.8.m8.1.1.1.1.1.1.1.3">1</cn></apply><apply id="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.cmml" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1"><minus id="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.1.cmml" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.1"></minus><ci id="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.2.cmml" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.2">𝑏</ci><cn type="integer" id="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.3.cmml" xref="S2.SS3.p1.8.m8.2.2.2.2.2.1.1.3">1</cn></apply></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.8.m8.2c">{\mathbf{c}}_{(n-1),(b-1)}</annotation></semantics></math> as follows.</p>
<table id="S5.EGx3" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S2.E3"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.E3.m1.4" class="ltx_Math" alttext="\displaystyle\vspace{-0.3cm}O_{n,b}\oplus{\mathbf{c}}_{n,b}" display="inline"><semantics id="S2.E3.m1.4a"><mrow id="S2.E3.m1.4.5" xref="S2.E3.m1.4.5.cmml"><msub id="S2.E3.m1.4.5.2" xref="S2.E3.m1.4.5.2.cmml"><mi id="S2.E3.m1.4.5.2.2" xref="S2.E3.m1.4.5.2.2.cmml">O</mi><mrow id="S2.E3.m1.2.2.2.4" xref="S2.E3.m1.2.2.2.3.cmml"><mi id="S2.E3.m1.1.1.1.1" xref="S2.E3.m1.1.1.1.1.cmml">n</mi><mo id="S2.E3.m1.2.2.2.4.1" xref="S2.E3.m1.2.2.2.3.cmml">,</mo><mi id="S2.E3.m1.2.2.2.2" xref="S2.E3.m1.2.2.2.2.cmml">b</mi></mrow></msub><mo id="S2.E3.m1.4.5.1" xref="S2.E3.m1.4.5.1.cmml">⊕</mo><msub id="S2.E3.m1.4.5.3" xref="S2.E3.m1.4.5.3.cmml"><mi id="S2.E3.m1.4.5.3.2" xref="S2.E3.m1.4.5.3.2.cmml">𝐜</mi><mrow id="S2.E3.m1.4.4.2.4" xref="S2.E3.m1.4.4.2.3.cmml"><mi id="S2.E3.m1.3.3.1.1" xref="S2.E3.m1.3.3.1.1.cmml">n</mi><mo id="S2.E3.m1.4.4.2.4.1" xref="S2.E3.m1.4.4.2.3.cmml">,</mo><mi id="S2.E3.m1.4.4.2.2" xref="S2.E3.m1.4.4.2.2.cmml">b</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S2.E3.m1.4b"><apply id="S2.E3.m1.4.5.cmml" xref="S2.E3.m1.4.5"><csymbol cd="latexml" id="S2.E3.m1.4.5.1.cmml" xref="S2.E3.m1.4.5.1">direct-sum</csymbol><apply id="S2.E3.m1.4.5.2.cmml" xref="S2.E3.m1.4.5.2"><csymbol cd="ambiguous" id="S2.E3.m1.4.5.2.1.cmml" xref="S2.E3.m1.4.5.2">subscript</csymbol><ci id="S2.E3.m1.4.5.2.2.cmml" xref="S2.E3.m1.4.5.2.2">𝑂</ci><list id="S2.E3.m1.2.2.2.3.cmml" xref="S2.E3.m1.2.2.2.4"><ci id="S2.E3.m1.1.1.1.1.cmml" xref="S2.E3.m1.1.1.1.1">𝑛</ci><ci id="S2.E3.m1.2.2.2.2.cmml" xref="S2.E3.m1.2.2.2.2">𝑏</ci></list></apply><apply id="S2.E3.m1.4.5.3.cmml" xref="S2.E3.m1.4.5.3"><csymbol cd="ambiguous" id="S2.E3.m1.4.5.3.1.cmml" xref="S2.E3.m1.4.5.3">subscript</csymbol><ci id="S2.E3.m1.4.5.3.2.cmml" xref="S2.E3.m1.4.5.3.2">𝐜</ci><list id="S2.E3.m1.4.4.2.3.cmml" xref="S2.E3.m1.4.4.2.4"><ci id="S2.E3.m1.3.3.1.1.cmml" xref="S2.E3.m1.3.3.1.1">𝑛</ci><ci id="S2.E3.m1.4.4.2.2.cmml" xref="S2.E3.m1.4.4.2.2">𝑏</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E3.m1.4c">\displaystyle\vspace{-0.3cm}O_{n,b}\oplus{\mathbf{c}}_{n,b}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S2.E3.m2.5" class="ltx_Math" alttext="\displaystyle=S_{n}(O_{(n-1),b}\oplus{\mathbf{c}}_{(n-1),(b-1)}),\vspace{-0.3cm}" display="inline"><semantics id="S2.E3.m2.5a"><mrow id="S2.E3.m2.5.5.1" xref="S2.E3.m2.5.5.1.1.cmml"><mrow id="S2.E3.m2.5.5.1.1" xref="S2.E3.m2.5.5.1.1.cmml"><mi id="S2.E3.m2.5.5.1.1.3" xref="S2.E3.m2.5.5.1.1.3.cmml"></mi><mo id="S2.E3.m2.5.5.1.1.2" xref="S2.E3.m2.5.5.1.1.2.cmml">=</mo><mrow id="S2.E3.m2.5.5.1.1.1" xref="S2.E3.m2.5.5.1.1.1.cmml"><msub id="S2.E3.m2.5.5.1.1.1.3" xref="S2.E3.m2.5.5.1.1.1.3.cmml"><mi id="S2.E3.m2.5.5.1.1.1.3.2" xref="S2.E3.m2.5.5.1.1.1.3.2.cmml">S</mi><mi id="S2.E3.m2.5.5.1.1.1.3.3" xref="S2.E3.m2.5.5.1.1.1.3.3.cmml">n</mi></msub><mo lspace="0em" rspace="0em" id="S2.E3.m2.5.5.1.1.1.2" xref="S2.E3.m2.5.5.1.1.1.2.cmml">​</mo><mrow id="S2.E3.m2.5.5.1.1.1.1.1" xref="S2.E3.m2.5.5.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E3.m2.5.5.1.1.1.1.1.2" xref="S2.E3.m2.5.5.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E3.m2.5.5.1.1.1.1.1.1" xref="S2.E3.m2.5.5.1.1.1.1.1.1.cmml"><msub id="S2.E3.m2.5.5.1.1.1.1.1.1.2" xref="S2.E3.m2.5.5.1.1.1.1.1.1.2.cmml"><mi id="S2.E3.m2.5.5.1.1.1.1.1.1.2.2" xref="S2.E3.m2.5.5.1.1.1.1.1.1.2.2.cmml">O</mi><mrow id="S2.E3.m2.2.2.2.2" xref="S2.E3.m2.2.2.2.3.cmml"><mrow id="S2.E3.m2.2.2.2.2.1.1" xref="S2.E3.m2.2.2.2.2.1.1.1.cmml"><mo stretchy="false" id="S2.E3.m2.2.2.2.2.1.1.2" xref="S2.E3.m2.2.2.2.2.1.1.1.cmml">(</mo><mrow id="S2.E3.m2.2.2.2.2.1.1.1" xref="S2.E3.m2.2.2.2.2.1.1.1.cmml"><mi id="S2.E3.m2.2.2.2.2.1.1.1.2" xref="S2.E3.m2.2.2.2.2.1.1.1.2.cmml">n</mi><mo id="S2.E3.m2.2.2.2.2.1.1.1.1" xref="S2.E3.m2.2.2.2.2.1.1.1.1.cmml">−</mo><mn id="S2.E3.m2.2.2.2.2.1.1.1.3" xref="S2.E3.m2.2.2.2.2.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.E3.m2.2.2.2.2.1.1.3" xref="S2.E3.m2.2.2.2.2.1.1.1.cmml">)</mo></mrow><mo id="S2.E3.m2.2.2.2.2.2" xref="S2.E3.m2.2.2.2.3.cmml">,</mo><mi id="S2.E3.m2.1.1.1.1" xref="S2.E3.m2.1.1.1.1.cmml">b</mi></mrow></msub><mo id="S2.E3.m2.5.5.1.1.1.1.1.1.1" xref="S2.E3.m2.5.5.1.1.1.1.1.1.1.cmml">⊕</mo><msub id="S2.E3.m2.5.5.1.1.1.1.1.1.3" xref="S2.E3.m2.5.5.1.1.1.1.1.1.3.cmml"><mi id="S2.E3.m2.5.5.1.1.1.1.1.1.3.2" xref="S2.E3.m2.5.5.1.1.1.1.1.1.3.2.cmml">𝐜</mi><mrow id="S2.E3.m2.4.4.2.2" xref="S2.E3.m2.4.4.2.3.cmml"><mrow id="S2.E3.m2.3.3.1.1.1.1" xref="S2.E3.m2.3.3.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E3.m2.3.3.1.1.1.1.2" xref="S2.E3.m2.3.3.1.1.1.1.1.cmml">(</mo><mrow id="S2.E3.m2.3.3.1.1.1.1.1" xref="S2.E3.m2.3.3.1.1.1.1.1.cmml"><mi id="S2.E3.m2.3.3.1.1.1.1.1.2" xref="S2.E3.m2.3.3.1.1.1.1.1.2.cmml">n</mi><mo id="S2.E3.m2.3.3.1.1.1.1.1.1" xref="S2.E3.m2.3.3.1.1.1.1.1.1.cmml">−</mo><mn id="S2.E3.m2.3.3.1.1.1.1.1.3" xref="S2.E3.m2.3.3.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.E3.m2.3.3.1.1.1.1.3" xref="S2.E3.m2.3.3.1.1.1.1.1.cmml">)</mo></mrow><mo id="S2.E3.m2.4.4.2.2.3" xref="S2.E3.m2.4.4.2.3.cmml">,</mo><mrow id="S2.E3.m2.4.4.2.2.2.1" xref="S2.E3.m2.4.4.2.2.2.1.1.cmml"><mo stretchy="false" id="S2.E3.m2.4.4.2.2.2.1.2" xref="S2.E3.m2.4.4.2.2.2.1.1.cmml">(</mo><mrow id="S2.E3.m2.4.4.2.2.2.1.1" xref="S2.E3.m2.4.4.2.2.2.1.1.cmml"><mi id="S2.E3.m2.4.4.2.2.2.1.1.2" xref="S2.E3.m2.4.4.2.2.2.1.1.2.cmml">b</mi><mo id="S2.E3.m2.4.4.2.2.2.1.1.1" xref="S2.E3.m2.4.4.2.2.2.1.1.1.cmml">−</mo><mn id="S2.E3.m2.4.4.2.2.2.1.1.3" xref="S2.E3.m2.4.4.2.2.2.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.E3.m2.4.4.2.2.2.1.3" xref="S2.E3.m2.4.4.2.2.2.1.1.cmml">)</mo></mrow></mrow></msub></mrow><mo stretchy="false" id="S2.E3.m2.5.5.1.1.1.1.1.3" xref="S2.E3.m2.5.5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S2.E3.m2.5.5.1.2" xref="S2.E3.m2.5.5.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E3.m2.5b"><apply id="S2.E3.m2.5.5.1.1.cmml" xref="S2.E3.m2.5.5.1"><eq id="S2.E3.m2.5.5.1.1.2.cmml" xref="S2.E3.m2.5.5.1.1.2"></eq><csymbol cd="latexml" id="S2.E3.m2.5.5.1.1.3.cmml" xref="S2.E3.m2.5.5.1.1.3">absent</csymbol><apply id="S2.E3.m2.5.5.1.1.1.cmml" xref="S2.E3.m2.5.5.1.1.1"><times id="S2.E3.m2.5.5.1.1.1.2.cmml" xref="S2.E3.m2.5.5.1.1.1.2"></times><apply id="S2.E3.m2.5.5.1.1.1.3.cmml" xref="S2.E3.m2.5.5.1.1.1.3"><csymbol cd="ambiguous" id="S2.E3.m2.5.5.1.1.1.3.1.cmml" xref="S2.E3.m2.5.5.1.1.1.3">subscript</csymbol><ci id="S2.E3.m2.5.5.1.1.1.3.2.cmml" xref="S2.E3.m2.5.5.1.1.1.3.2">𝑆</ci><ci id="S2.E3.m2.5.5.1.1.1.3.3.cmml" xref="S2.E3.m2.5.5.1.1.1.3.3">𝑛</ci></apply><apply id="S2.E3.m2.5.5.1.1.1.1.1.1.cmml" xref="S2.E3.m2.5.5.1.1.1.1.1"><csymbol cd="latexml" id="S2.E3.m2.5.5.1.1.1.1.1.1.1.cmml" xref="S2.E3.m2.5.5.1.1.1.1.1.1.1">direct-sum</csymbol><apply id="S2.E3.m2.5.5.1.1.1.1.1.1.2.cmml" xref="S2.E3.m2.5.5.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.E3.m2.5.5.1.1.1.1.1.1.2.1.cmml" xref="S2.E3.m2.5.5.1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.E3.m2.5.5.1.1.1.1.1.1.2.2.cmml" xref="S2.E3.m2.5.5.1.1.1.1.1.1.2.2">𝑂</ci><list id="S2.E3.m2.2.2.2.3.cmml" xref="S2.E3.m2.2.2.2.2"><apply id="S2.E3.m2.2.2.2.2.1.1.1.cmml" xref="S2.E3.m2.2.2.2.2.1.1"><minus id="S2.E3.m2.2.2.2.2.1.1.1.1.cmml" xref="S2.E3.m2.2.2.2.2.1.1.1.1"></minus><ci id="S2.E3.m2.2.2.2.2.1.1.1.2.cmml" xref="S2.E3.m2.2.2.2.2.1.1.1.2">𝑛</ci><cn type="integer" id="S2.E3.m2.2.2.2.2.1.1.1.3.cmml" xref="S2.E3.m2.2.2.2.2.1.1.1.3">1</cn></apply><ci id="S2.E3.m2.1.1.1.1.cmml" xref="S2.E3.m2.1.1.1.1">𝑏</ci></list></apply><apply id="S2.E3.m2.5.5.1.1.1.1.1.1.3.cmml" xref="S2.E3.m2.5.5.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E3.m2.5.5.1.1.1.1.1.1.3.1.cmml" xref="S2.E3.m2.5.5.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.E3.m2.5.5.1.1.1.1.1.1.3.2.cmml" xref="S2.E3.m2.5.5.1.1.1.1.1.1.3.2">𝐜</ci><list id="S2.E3.m2.4.4.2.3.cmml" xref="S2.E3.m2.4.4.2.2"><apply id="S2.E3.m2.3.3.1.1.1.1.1.cmml" xref="S2.E3.m2.3.3.1.1.1.1"><minus id="S2.E3.m2.3.3.1.1.1.1.1.1.cmml" xref="S2.E3.m2.3.3.1.1.1.1.1.1"></minus><ci id="S2.E3.m2.3.3.1.1.1.1.1.2.cmml" xref="S2.E3.m2.3.3.1.1.1.1.1.2">𝑛</ci><cn type="integer" id="S2.E3.m2.3.3.1.1.1.1.1.3.cmml" xref="S2.E3.m2.3.3.1.1.1.1.1.3">1</cn></apply><apply id="S2.E3.m2.4.4.2.2.2.1.1.cmml" xref="S2.E3.m2.4.4.2.2.2.1"><minus id="S2.E3.m2.4.4.2.2.2.1.1.1.cmml" xref="S2.E3.m2.4.4.2.2.2.1.1.1"></minus><ci id="S2.E3.m2.4.4.2.2.2.1.1.2.cmml" xref="S2.E3.m2.4.4.2.2.2.1.1.2">𝑏</ci><cn type="integer" id="S2.E3.m2.4.4.2.2.2.1.1.3.cmml" xref="S2.E3.m2.4.4.2.2.2.1.1.3">1</cn></apply></list></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E3.m2.5c">\displaystyle=S_{n}(O_{(n-1),b}\oplus{\mathbf{c}}_{(n-1),(b-1)}),\vspace{-0.3cm}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
<p id="S2.SS3.p1.12" class="ltx_p">where <math id="S2.SS3.p1.9.m1.1" class="ltx_Math" alttext="\oplus" display="inline"><semantics id="S2.SS3.p1.9.m1.1a"><mo id="S2.SS3.p1.9.m1.1.1" xref="S2.SS3.p1.9.m1.1.1.cmml">⊕</mo><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.9.m1.1b"><csymbol cd="latexml" id="S2.SS3.p1.9.m1.1.1.cmml" xref="S2.SS3.p1.9.m1.1.1">direct-sum</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.9.m1.1c">\oplus</annotation></semantics></math> is a concatenation operation.
Finally, the output of the last layer is considered as the subsampled acoustic representation sequence <math id="S2.SS3.p1.10.m2.2" class="ltx_Math" alttext="H^{t\in b}=\{\mathbf{h}_{t}|\tau_{b-1}&lt;t\leq\tau_{b}\}" display="inline"><semantics id="S2.SS3.p1.10.m2.2a"><mrow id="S2.SS3.p1.10.m2.2.2" xref="S2.SS3.p1.10.m2.2.2.cmml"><msup id="S2.SS3.p1.10.m2.2.2.4" xref="S2.SS3.p1.10.m2.2.2.4.cmml"><mi id="S2.SS3.p1.10.m2.2.2.4.2" xref="S2.SS3.p1.10.m2.2.2.4.2.cmml">H</mi><mrow id="S2.SS3.p1.10.m2.2.2.4.3" xref="S2.SS3.p1.10.m2.2.2.4.3.cmml"><mi id="S2.SS3.p1.10.m2.2.2.4.3.2" xref="S2.SS3.p1.10.m2.2.2.4.3.2.cmml">t</mi><mo id="S2.SS3.p1.10.m2.2.2.4.3.1" xref="S2.SS3.p1.10.m2.2.2.4.3.1.cmml">∈</mo><mi id="S2.SS3.p1.10.m2.2.2.4.3.3" xref="S2.SS3.p1.10.m2.2.2.4.3.3.cmml">b</mi></mrow></msup><mo id="S2.SS3.p1.10.m2.2.2.3" xref="S2.SS3.p1.10.m2.2.2.3.cmml">=</mo><mrow id="S2.SS3.p1.10.m2.2.2.2.2" xref="S2.SS3.p1.10.m2.2.2.2.3.cmml"><mo stretchy="false" id="S2.SS3.p1.10.m2.2.2.2.2.3" xref="S2.SS3.p1.10.m2.2.2.2.3.1.cmml">{</mo><msub id="S2.SS3.p1.10.m2.1.1.1.1.1" xref="S2.SS3.p1.10.m2.1.1.1.1.1.cmml"><mi id="S2.SS3.p1.10.m2.1.1.1.1.1.2" xref="S2.SS3.p1.10.m2.1.1.1.1.1.2.cmml">𝐡</mi><mi id="S2.SS3.p1.10.m2.1.1.1.1.1.3" xref="S2.SS3.p1.10.m2.1.1.1.1.1.3.cmml">t</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS3.p1.10.m2.2.2.2.2.4" xref="S2.SS3.p1.10.m2.2.2.2.3.1.cmml">|</mo><mrow id="S2.SS3.p1.10.m2.2.2.2.2.2" xref="S2.SS3.p1.10.m2.2.2.2.2.2.cmml"><msub id="S2.SS3.p1.10.m2.2.2.2.2.2.2" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.cmml"><mi id="S2.SS3.p1.10.m2.2.2.2.2.2.2.2" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.2.cmml">τ</mi><mrow id="S2.SS3.p1.10.m2.2.2.2.2.2.2.3" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.cmml"><mi id="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.2" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.2.cmml">b</mi><mo id="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.1" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.1.cmml">−</mo><mn id="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.3" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.3.cmml">1</mn></mrow></msub><mo id="S2.SS3.p1.10.m2.2.2.2.2.2.3" xref="S2.SS3.p1.10.m2.2.2.2.2.2.3.cmml">&lt;</mo><mi id="S2.SS3.p1.10.m2.2.2.2.2.2.4" xref="S2.SS3.p1.10.m2.2.2.2.2.2.4.cmml">t</mi><mo id="S2.SS3.p1.10.m2.2.2.2.2.2.5" xref="S2.SS3.p1.10.m2.2.2.2.2.2.5.cmml">≤</mo><msub id="S2.SS3.p1.10.m2.2.2.2.2.2.6" xref="S2.SS3.p1.10.m2.2.2.2.2.2.6.cmml"><mi id="S2.SS3.p1.10.m2.2.2.2.2.2.6.2" xref="S2.SS3.p1.10.m2.2.2.2.2.2.6.2.cmml">τ</mi><mi id="S2.SS3.p1.10.m2.2.2.2.2.2.6.3" xref="S2.SS3.p1.10.m2.2.2.2.2.2.6.3.cmml">b</mi></msub></mrow><mo stretchy="false" id="S2.SS3.p1.10.m2.2.2.2.2.5" xref="S2.SS3.p1.10.m2.2.2.2.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.10.m2.2b"><apply id="S2.SS3.p1.10.m2.2.2.cmml" xref="S2.SS3.p1.10.m2.2.2"><eq id="S2.SS3.p1.10.m2.2.2.3.cmml" xref="S2.SS3.p1.10.m2.2.2.3"></eq><apply id="S2.SS3.p1.10.m2.2.2.4.cmml" xref="S2.SS3.p1.10.m2.2.2.4"><csymbol cd="ambiguous" id="S2.SS3.p1.10.m2.2.2.4.1.cmml" xref="S2.SS3.p1.10.m2.2.2.4">superscript</csymbol><ci id="S2.SS3.p1.10.m2.2.2.4.2.cmml" xref="S2.SS3.p1.10.m2.2.2.4.2">𝐻</ci><apply id="S2.SS3.p1.10.m2.2.2.4.3.cmml" xref="S2.SS3.p1.10.m2.2.2.4.3"><in id="S2.SS3.p1.10.m2.2.2.4.3.1.cmml" xref="S2.SS3.p1.10.m2.2.2.4.3.1"></in><ci id="S2.SS3.p1.10.m2.2.2.4.3.2.cmml" xref="S2.SS3.p1.10.m2.2.2.4.3.2">𝑡</ci><ci id="S2.SS3.p1.10.m2.2.2.4.3.3.cmml" xref="S2.SS3.p1.10.m2.2.2.4.3.3">𝑏</ci></apply></apply><apply id="S2.SS3.p1.10.m2.2.2.2.3.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2"><csymbol cd="latexml" id="S2.SS3.p1.10.m2.2.2.2.3.1.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.3">conditional-set</csymbol><apply id="S2.SS3.p1.10.m2.1.1.1.1.1.cmml" xref="S2.SS3.p1.10.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.10.m2.1.1.1.1.1.1.cmml" xref="S2.SS3.p1.10.m2.1.1.1.1.1">subscript</csymbol><ci id="S2.SS3.p1.10.m2.1.1.1.1.1.2.cmml" xref="S2.SS3.p1.10.m2.1.1.1.1.1.2">𝐡</ci><ci id="S2.SS3.p1.10.m2.1.1.1.1.1.3.cmml" xref="S2.SS3.p1.10.m2.1.1.1.1.1.3">𝑡</ci></apply><apply id="S2.SS3.p1.10.m2.2.2.2.2.2.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2"><and id="S2.SS3.p1.10.m2.2.2.2.2.2a.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2"></and><apply id="S2.SS3.p1.10.m2.2.2.2.2.2b.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2"><lt id="S2.SS3.p1.10.m2.2.2.2.2.2.3.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.3"></lt><apply id="S2.SS3.p1.10.m2.2.2.2.2.2.2.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS3.p1.10.m2.2.2.2.2.2.2.1.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2">subscript</csymbol><ci id="S2.SS3.p1.10.m2.2.2.2.2.2.2.2.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.2">𝜏</ci><apply id="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.3"><minus id="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.1.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.1"></minus><ci id="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.2.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.2">𝑏</ci><cn type="integer" id="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.3.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.2.3.3">1</cn></apply></apply><ci id="S2.SS3.p1.10.m2.2.2.2.2.2.4.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.4">𝑡</ci></apply><apply id="S2.SS3.p1.10.m2.2.2.2.2.2c.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2"><leq id="S2.SS3.p1.10.m2.2.2.2.2.2.5.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.5"></leq><share href="#S2.SS3.p1.10.m2.2.2.2.2.2.4.cmml" id="S2.SS3.p1.10.m2.2.2.2.2.2d.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2"></share><apply id="S2.SS3.p1.10.m2.2.2.2.2.2.6.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.6"><csymbol cd="ambiguous" id="S2.SS3.p1.10.m2.2.2.2.2.2.6.1.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.6">subscript</csymbol><ci id="S2.SS3.p1.10.m2.2.2.2.2.2.6.2.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.6.2">𝜏</ci><ci id="S2.SS3.p1.10.m2.2.2.2.2.2.6.3.cmml" xref="S2.SS3.p1.10.m2.2.2.2.2.2.6.3">𝑏</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.10.m2.2c">H^{t\in b}=\{\mathbf{h}_{t}|\tau_{b-1}&lt;t\leq\tau_{b}\}</annotation></semantics></math>, which corresponds to the speech input <math id="S2.SS3.p1.11.m3.1" class="ltx_Math" alttext="{X}^{t\in b}" display="inline"><semantics id="S2.SS3.p1.11.m3.1a"><msup id="S2.SS3.p1.11.m3.1.1" xref="S2.SS3.p1.11.m3.1.1.cmml"><mi id="S2.SS3.p1.11.m3.1.1.2" xref="S2.SS3.p1.11.m3.1.1.2.cmml">X</mi><mrow id="S2.SS3.p1.11.m3.1.1.3" xref="S2.SS3.p1.11.m3.1.1.3.cmml"><mi id="S2.SS3.p1.11.m3.1.1.3.2" xref="S2.SS3.p1.11.m3.1.1.3.2.cmml">t</mi><mo id="S2.SS3.p1.11.m3.1.1.3.1" xref="S2.SS3.p1.11.m3.1.1.3.1.cmml">∈</mo><mi id="S2.SS3.p1.11.m3.1.1.3.3" xref="S2.SS3.p1.11.m3.1.1.3.3.cmml">b</mi></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.11.m3.1b"><apply id="S2.SS3.p1.11.m3.1.1.cmml" xref="S2.SS3.p1.11.m3.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.11.m3.1.1.1.cmml" xref="S2.SS3.p1.11.m3.1.1">superscript</csymbol><ci id="S2.SS3.p1.11.m3.1.1.2.cmml" xref="S2.SS3.p1.11.m3.1.1.2">𝑋</ci><apply id="S2.SS3.p1.11.m3.1.1.3.cmml" xref="S2.SS3.p1.11.m3.1.1.3"><in id="S2.SS3.p1.11.m3.1.1.3.1.cmml" xref="S2.SS3.p1.11.m3.1.1.3.1"></in><ci id="S2.SS3.p1.11.m3.1.1.3.2.cmml" xref="S2.SS3.p1.11.m3.1.1.3.2">𝑡</ci><ci id="S2.SS3.p1.11.m3.1.1.3.3.cmml" xref="S2.SS3.p1.11.m3.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.11.m3.1c">{X}^{t\in b}</annotation></semantics></math> (<math id="S2.SS3.p1.12.m4.1" class="ltx_Math" alttext="\tau_{b}&lt;T_{b}" display="inline"><semantics id="S2.SS3.p1.12.m4.1a"><mrow id="S2.SS3.p1.12.m4.1.1" xref="S2.SS3.p1.12.m4.1.1.cmml"><msub id="S2.SS3.p1.12.m4.1.1.2" xref="S2.SS3.p1.12.m4.1.1.2.cmml"><mi id="S2.SS3.p1.12.m4.1.1.2.2" xref="S2.SS3.p1.12.m4.1.1.2.2.cmml">τ</mi><mi id="S2.SS3.p1.12.m4.1.1.2.3" xref="S2.SS3.p1.12.m4.1.1.2.3.cmml">b</mi></msub><mo id="S2.SS3.p1.12.m4.1.1.1" xref="S2.SS3.p1.12.m4.1.1.1.cmml">&lt;</mo><msub id="S2.SS3.p1.12.m4.1.1.3" xref="S2.SS3.p1.12.m4.1.1.3.cmml"><mi id="S2.SS3.p1.12.m4.1.1.3.2" xref="S2.SS3.p1.12.m4.1.1.3.2.cmml">T</mi><mi id="S2.SS3.p1.12.m4.1.1.3.3" xref="S2.SS3.p1.12.m4.1.1.3.3.cmml">b</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.12.m4.1b"><apply id="S2.SS3.p1.12.m4.1.1.cmml" xref="S2.SS3.p1.12.m4.1.1"><lt id="S2.SS3.p1.12.m4.1.1.1.cmml" xref="S2.SS3.p1.12.m4.1.1.1"></lt><apply id="S2.SS3.p1.12.m4.1.1.2.cmml" xref="S2.SS3.p1.12.m4.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.12.m4.1.1.2.1.cmml" xref="S2.SS3.p1.12.m4.1.1.2">subscript</csymbol><ci id="S2.SS3.p1.12.m4.1.1.2.2.cmml" xref="S2.SS3.p1.12.m4.1.1.2.2">𝜏</ci><ci id="S2.SS3.p1.12.m4.1.1.2.3.cmml" xref="S2.SS3.p1.12.m4.1.1.2.3">𝑏</ci></apply><apply id="S2.SS3.p1.12.m4.1.1.3.cmml" xref="S2.SS3.p1.12.m4.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.p1.12.m4.1.1.3.1.cmml" xref="S2.SS3.p1.12.m4.1.1.3">subscript</csymbol><ci id="S2.SS3.p1.12.m4.1.1.3.2.cmml" xref="S2.SS3.p1.12.m4.1.1.3.2">𝑇</ci><ci id="S2.SS3.p1.12.m4.1.1.3.3.cmml" xref="S2.SS3.p1.12.m4.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.12.m4.1c">\tau_{b}&lt;T_{b}</annotation></semantics></math>), as</p>
<table id="S5.EGx4" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S2.E4"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.E4.m1.1" class="ltx_Math" alttext="\displaystyle H^{t\in b}" display="inline"><semantics id="S2.E4.m1.1a"><msup id="S2.E4.m1.1.1" xref="S2.E4.m1.1.1.cmml"><mi id="S2.E4.m1.1.1.2" xref="S2.E4.m1.1.1.2.cmml">H</mi><mrow id="S2.E4.m1.1.1.3" xref="S2.E4.m1.1.1.3.cmml"><mi id="S2.E4.m1.1.1.3.2" xref="S2.E4.m1.1.1.3.2.cmml">t</mi><mo id="S2.E4.m1.1.1.3.1" xref="S2.E4.m1.1.1.3.1.cmml">∈</mo><mi id="S2.E4.m1.1.1.3.3" xref="S2.E4.m1.1.1.3.3.cmml">b</mi></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.E4.m1.1b"><apply id="S2.E4.m1.1.1.cmml" xref="S2.E4.m1.1.1"><csymbol cd="ambiguous" id="S2.E4.m1.1.1.1.cmml" xref="S2.E4.m1.1.1">superscript</csymbol><ci id="S2.E4.m1.1.1.2.cmml" xref="S2.E4.m1.1.1.2">𝐻</ci><apply id="S2.E4.m1.1.1.3.cmml" xref="S2.E4.m1.1.1.3"><in id="S2.E4.m1.1.1.3.1.cmml" xref="S2.E4.m1.1.1.3.1"></in><ci id="S2.E4.m1.1.1.3.2.cmml" xref="S2.E4.m1.1.1.3.2">𝑡</ci><ci id="S2.E4.m1.1.1.3.3.cmml" xref="S2.E4.m1.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E4.m1.1c">\displaystyle H^{t\in b}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S2.E4.m2.3" class="ltx_Math" alttext="\displaystyle=O_{N,b}," display="inline"><semantics id="S2.E4.m2.3a"><mrow id="S2.E4.m2.3.3.1" xref="S2.E4.m2.3.3.1.1.cmml"><mrow id="S2.E4.m2.3.3.1.1" xref="S2.E4.m2.3.3.1.1.cmml"><mi id="S2.E4.m2.3.3.1.1.2" xref="S2.E4.m2.3.3.1.1.2.cmml"></mi><mo id="S2.E4.m2.3.3.1.1.1" xref="S2.E4.m2.3.3.1.1.1.cmml">=</mo><msub id="S2.E4.m2.3.3.1.1.3" xref="S2.E4.m2.3.3.1.1.3.cmml"><mi id="S2.E4.m2.3.3.1.1.3.2" xref="S2.E4.m2.3.3.1.1.3.2.cmml">O</mi><mrow id="S2.E4.m2.2.2.2.4" xref="S2.E4.m2.2.2.2.3.cmml"><mi id="S2.E4.m2.1.1.1.1" xref="S2.E4.m2.1.1.1.1.cmml">N</mi><mo id="S2.E4.m2.2.2.2.4.1" xref="S2.E4.m2.2.2.2.3.cmml">,</mo><mi id="S2.E4.m2.2.2.2.2" xref="S2.E4.m2.2.2.2.2.cmml">b</mi></mrow></msub></mrow><mo id="S2.E4.m2.3.3.1.2" xref="S2.E4.m2.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E4.m2.3b"><apply id="S2.E4.m2.3.3.1.1.cmml" xref="S2.E4.m2.3.3.1"><eq id="S2.E4.m2.3.3.1.1.1.cmml" xref="S2.E4.m2.3.3.1.1.1"></eq><csymbol cd="latexml" id="S2.E4.m2.3.3.1.1.2.cmml" xref="S2.E4.m2.3.3.1.1.2">absent</csymbol><apply id="S2.E4.m2.3.3.1.1.3.cmml" xref="S2.E4.m2.3.3.1.1.3"><csymbol cd="ambiguous" id="S2.E4.m2.3.3.1.1.3.1.cmml" xref="S2.E4.m2.3.3.1.1.3">subscript</csymbol><ci id="S2.E4.m2.3.3.1.1.3.2.cmml" xref="S2.E4.m2.3.3.1.1.3.2">𝑂</ci><list id="S2.E4.m2.2.2.2.3.cmml" xref="S2.E4.m2.2.2.2.4"><ci id="S2.E4.m2.1.1.1.1.cmml" xref="S2.E4.m2.1.1.1.1">𝑁</ci><ci id="S2.E4.m2.2.2.2.2.cmml" xref="S2.E4.m2.2.2.2.2">𝑏</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E4.m2.3c">\displaystyle=O_{N,b},</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
<p id="S2.SS3.p1.13" class="ltx_p">where <math id="S2.SS3.p1.13.m1.1" class="ltx_Math" alttext="N" display="inline"><semantics id="S2.SS3.p1.13.m1.1a"><mi id="S2.SS3.p1.13.m1.1.1" xref="S2.SS3.p1.13.m1.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.13.m1.1b"><ci id="S2.SS3.p1.13.m1.1.1.cmml" xref="S2.SS3.p1.13.m1.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.13.m1.1c">N</annotation></semantics></math> is the number of layers in the speech subnetwork.
By using this speech subnetwork, we propose two methods for generating prompts in the next subsections.
</p>
</div>
<section id="S2.SS3.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.3.1 </span>CTC prompts</h4>

<div id="S2.SS3.SSS1.p1" class="ltx_para">
<p id="S2.SS3.SSS1.p1.9" class="ltx_p">Following <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>, <a href="#bib.bib29" title="" class="ltx_ref">29</a>, <a href="#bib.bib31" title="" class="ltx_ref">31</a>]</cite>, we use the greedy search output of CTC to efficiently generate the prompts.
We introduce CTC <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>, <a href="#bib.bib6" title="" class="ltx_ref">6</a>, <a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite> with a blank token, <math id="S2.SS3.SSS1.p1.1.m1.1" class="ltx_Math" alttext="\phi" display="inline"><semantics id="S2.SS3.SSS1.p1.1.m1.1a"><mi id="S2.SS3.SSS1.p1.1.m1.1.1" xref="S2.SS3.SSS1.p1.1.m1.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.1.m1.1b"><ci id="S2.SS3.SSS1.p1.1.m1.1.1.cmml" xref="S2.SS3.SSS1.p1.1.m1.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.1.m1.1c">\phi</annotation></semantics></math>, to align <math id="S2.SS3.SSS1.p1.2.m2.1" class="ltx_Math" alttext="H^{\tau_{B}}" display="inline"><semantics id="S2.SS3.SSS1.p1.2.m2.1a"><msup id="S2.SS3.SSS1.p1.2.m2.1.1" xref="S2.SS3.SSS1.p1.2.m2.1.1.cmml"><mi id="S2.SS3.SSS1.p1.2.m2.1.1.2" xref="S2.SS3.SSS1.p1.2.m2.1.1.2.cmml">H</mi><msub id="S2.SS3.SSS1.p1.2.m2.1.1.3" xref="S2.SS3.SSS1.p1.2.m2.1.1.3.cmml"><mi id="S2.SS3.SSS1.p1.2.m2.1.1.3.2" xref="S2.SS3.SSS1.p1.2.m2.1.1.3.2.cmml">τ</mi><mi id="S2.SS3.SSS1.p1.2.m2.1.1.3.3" xref="S2.SS3.SSS1.p1.2.m2.1.1.3.3.cmml">B</mi></msub></msup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.2.m2.1b"><apply id="S2.SS3.SSS1.p1.2.m2.1.1.cmml" xref="S2.SS3.SSS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.2.m2.1.1.1.cmml" xref="S2.SS3.SSS1.p1.2.m2.1.1">superscript</csymbol><ci id="S2.SS3.SSS1.p1.2.m2.1.1.2.cmml" xref="S2.SS3.SSS1.p1.2.m2.1.1.2">𝐻</ci><apply id="S2.SS3.SSS1.p1.2.m2.1.1.3.cmml" xref="S2.SS3.SSS1.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.2.m2.1.1.3.1.cmml" xref="S2.SS3.SSS1.p1.2.m2.1.1.3">subscript</csymbol><ci id="S2.SS3.SSS1.p1.2.m2.1.1.3.2.cmml" xref="S2.SS3.SSS1.p1.2.m2.1.1.3.2">𝜏</ci><ci id="S2.SS3.SSS1.p1.2.m2.1.1.3.3.cmml" xref="S2.SS3.SSS1.p1.2.m2.1.1.3.3">𝐵</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.2.m2.1c">H^{\tau_{B}}</annotation></semantics></math> with the corresponding label sequence <math id="S2.SS3.SSS1.p1.3.m3.1" class="ltx_Math" alttext="Y^{I}" display="inline"><semantics id="S2.SS3.SSS1.p1.3.m3.1a"><msup id="S2.SS3.SSS1.p1.3.m3.1.1" xref="S2.SS3.SSS1.p1.3.m3.1.1.cmml"><mi id="S2.SS3.SSS1.p1.3.m3.1.1.2" xref="S2.SS3.SSS1.p1.3.m3.1.1.2.cmml">Y</mi><mi id="S2.SS3.SSS1.p1.3.m3.1.1.3" xref="S2.SS3.SSS1.p1.3.m3.1.1.3.cmml">I</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.3.m3.1b"><apply id="S2.SS3.SSS1.p1.3.m3.1.1.cmml" xref="S2.SS3.SSS1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.3.m3.1.1.1.cmml" xref="S2.SS3.SSS1.p1.3.m3.1.1">superscript</csymbol><ci id="S2.SS3.SSS1.p1.3.m3.1.1.2.cmml" xref="S2.SS3.SSS1.p1.3.m3.1.1.2">𝑌</ci><ci id="S2.SS3.SSS1.p1.3.m3.1.1.3.cmml" xref="S2.SS3.SSS1.p1.3.m3.1.1.3">𝐼</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.3.m3.1c">Y^{I}</annotation></semantics></math>.
CTC estimates <math id="S2.SS3.SSS1.p1.4.m4.1" class="ltx_Math" alttext="\phi" display="inline"><semantics id="S2.SS3.SSS1.p1.4.m4.1a"><mi id="S2.SS3.SSS1.p1.4.m4.1.1" xref="S2.SS3.SSS1.p1.4.m4.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.4.m4.1b"><ci id="S2.SS3.SSS1.p1.4.m4.1.1.cmml" xref="S2.SS3.SSS1.p1.4.m4.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.4.m4.1c">\phi</annotation></semantics></math>-augmented tokens <math id="S2.SS3.SSS1.p1.5.m5.1" class="ltx_Math" alttext="z_{t}\in{\cal V}\cup\{\phi\}" display="inline"><semantics id="S2.SS3.SSS1.p1.5.m5.1a"><mrow id="S2.SS3.SSS1.p1.5.m5.1.2" xref="S2.SS3.SSS1.p1.5.m5.1.2.cmml"><msub id="S2.SS3.SSS1.p1.5.m5.1.2.2" xref="S2.SS3.SSS1.p1.5.m5.1.2.2.cmml"><mi id="S2.SS3.SSS1.p1.5.m5.1.2.2.2" xref="S2.SS3.SSS1.p1.5.m5.1.2.2.2.cmml">z</mi><mi id="S2.SS3.SSS1.p1.5.m5.1.2.2.3" xref="S2.SS3.SSS1.p1.5.m5.1.2.2.3.cmml">t</mi></msub><mo id="S2.SS3.SSS1.p1.5.m5.1.2.1" xref="S2.SS3.SSS1.p1.5.m5.1.2.1.cmml">∈</mo><mrow id="S2.SS3.SSS1.p1.5.m5.1.2.3" xref="S2.SS3.SSS1.p1.5.m5.1.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.SSS1.p1.5.m5.1.2.3.2" xref="S2.SS3.SSS1.p1.5.m5.1.2.3.2.cmml">𝒱</mi><mo id="S2.SS3.SSS1.p1.5.m5.1.2.3.1" xref="S2.SS3.SSS1.p1.5.m5.1.2.3.1.cmml">∪</mo><mrow id="S2.SS3.SSS1.p1.5.m5.1.2.3.3.2" xref="S2.SS3.SSS1.p1.5.m5.1.2.3.3.1.cmml"><mo stretchy="false" id="S2.SS3.SSS1.p1.5.m5.1.2.3.3.2.1" xref="S2.SS3.SSS1.p1.5.m5.1.2.3.3.1.cmml">{</mo><mi id="S2.SS3.SSS1.p1.5.m5.1.1" xref="S2.SS3.SSS1.p1.5.m5.1.1.cmml">ϕ</mi><mo stretchy="false" id="S2.SS3.SSS1.p1.5.m5.1.2.3.3.2.2" xref="S2.SS3.SSS1.p1.5.m5.1.2.3.3.1.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.5.m5.1b"><apply id="S2.SS3.SSS1.p1.5.m5.1.2.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.2"><in id="S2.SS3.SSS1.p1.5.m5.1.2.1.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.2.1"></in><apply id="S2.SS3.SSS1.p1.5.m5.1.2.2.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.5.m5.1.2.2.1.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.2.2">subscript</csymbol><ci id="S2.SS3.SSS1.p1.5.m5.1.2.2.2.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.2.2.2">𝑧</ci><ci id="S2.SS3.SSS1.p1.5.m5.1.2.2.3.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.2.2.3">𝑡</ci></apply><apply id="S2.SS3.SSS1.p1.5.m5.1.2.3.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.2.3"><union id="S2.SS3.SSS1.p1.5.m5.1.2.3.1.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.2.3.1"></union><ci id="S2.SS3.SSS1.p1.5.m5.1.2.3.2.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.2.3.2">𝒱</ci><set id="S2.SS3.SSS1.p1.5.m5.1.2.3.3.1.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.2.3.3.2"><ci id="S2.SS3.SSS1.p1.5.m5.1.1.cmml" xref="S2.SS3.SSS1.p1.5.m5.1.1">italic-ϕ</ci></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.5.m5.1c">z_{t}\in{\cal V}\cup\{\phi\}</annotation></semantics></math> at time frame <math id="S2.SS3.SSS1.p1.6.m6.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S2.SS3.SSS1.p1.6.m6.1a"><mi id="S2.SS3.SSS1.p1.6.m6.1.1" xref="S2.SS3.SSS1.p1.6.m6.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.6.m6.1b"><ci id="S2.SS3.SSS1.p1.6.m6.1.1.cmml" xref="S2.SS3.SSS1.p1.6.m6.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.6.m6.1c">t</annotation></semantics></math>, where <math id="S2.SS3.SSS1.p1.7.m7.1" class="ltx_Math" alttext="{\cal V}" display="inline"><semantics id="S2.SS3.SSS1.p1.7.m7.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.SSS1.p1.7.m7.1.1" xref="S2.SS3.SSS1.p1.7.m7.1.1.cmml">𝒱</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.7.m7.1b"><ci id="S2.SS3.SSS1.p1.7.m7.1.1.cmml" xref="S2.SS3.SSS1.p1.7.m7.1.1">𝒱</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.7.m7.1c">{\cal V}</annotation></semantics></math> is the token vocabulary.
Based on <math id="S2.SS3.SSS1.p1.8.m8.1" class="ltx_Math" alttext="\mathbf{h}_{t}" display="inline"><semantics id="S2.SS3.SSS1.p1.8.m8.1a"><msub id="S2.SS3.SSS1.p1.8.m8.1.1" xref="S2.SS3.SSS1.p1.8.m8.1.1.cmml"><mi id="S2.SS3.SSS1.p1.8.m8.1.1.2" xref="S2.SS3.SSS1.p1.8.m8.1.1.2.cmml">𝐡</mi><mi id="S2.SS3.SSS1.p1.8.m8.1.1.3" xref="S2.SS3.SSS1.p1.8.m8.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.8.m8.1b"><apply id="S2.SS3.SSS1.p1.8.m8.1.1.cmml" xref="S2.SS3.SSS1.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.8.m8.1.1.1.cmml" xref="S2.SS3.SSS1.p1.8.m8.1.1">subscript</csymbol><ci id="S2.SS3.SSS1.p1.8.m8.1.1.2.cmml" xref="S2.SS3.SSS1.p1.8.m8.1.1.2">𝐡</ci><ci id="S2.SS3.SSS1.p1.8.m8.1.1.3.cmml" xref="S2.SS3.SSS1.p1.8.m8.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.8.m8.1c">\mathbf{h}_{t}</annotation></semantics></math> computed by the speech subnetwork (Eq. (<a href="#S2.E4" title="In 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>)), CTC calculates a posterior of <math id="S2.SS3.SSS1.p1.9.m9.1" class="ltx_Math" alttext="z_{t}" display="inline"><semantics id="S2.SS3.SSS1.p1.9.m9.1a"><msub id="S2.SS3.SSS1.p1.9.m9.1.1" xref="S2.SS3.SSS1.p1.9.m9.1.1.cmml"><mi id="S2.SS3.SSS1.p1.9.m9.1.1.2" xref="S2.SS3.SSS1.p1.9.m9.1.1.2.cmml">z</mi><mi id="S2.SS3.SSS1.p1.9.m9.1.1.3" xref="S2.SS3.SSS1.p1.9.m9.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.9.m9.1b"><apply id="S2.SS3.SSS1.p1.9.m9.1.1.cmml" xref="S2.SS3.SSS1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.9.m9.1.1.1.cmml" xref="S2.SS3.SSS1.p1.9.m9.1.1">subscript</csymbol><ci id="S2.SS3.SSS1.p1.9.m9.1.1.2.cmml" xref="S2.SS3.SSS1.p1.9.m9.1.1.2">𝑧</ci><ci id="S2.SS3.SSS1.p1.9.m9.1.1.3.cmml" xref="S2.SS3.SSS1.p1.9.m9.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.9.m9.1c">z_{t}</annotation></semantics></math>.</p>
<table id="S5.EGx5" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S2.E5"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.E5.m1.2" class="ltx_Math" alttext="\displaystyle q(z_{t}|\mathbf{h}_{t})=\mathrm{CTC}(\mathbf{h}_{t})" display="inline"><semantics id="S2.E5.m1.2a"><mrow id="S2.E5.m1.2.2" xref="S2.E5.m1.2.2.cmml"><mrow id="S2.E5.m1.1.1.1" xref="S2.E5.m1.1.1.1.cmml"><mi id="S2.E5.m1.1.1.1.3" xref="S2.E5.m1.1.1.1.3.cmml">q</mi><mo lspace="0em" rspace="0em" id="S2.E5.m1.1.1.1.2" xref="S2.E5.m1.1.1.1.2.cmml">​</mo><mrow id="S2.E5.m1.1.1.1.1.1" xref="S2.E5.m1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E5.m1.1.1.1.1.1.2" xref="S2.E5.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E5.m1.1.1.1.1.1.1" xref="S2.E5.m1.1.1.1.1.1.1.cmml"><msub id="S2.E5.m1.1.1.1.1.1.1.2" xref="S2.E5.m1.1.1.1.1.1.1.2.cmml"><mi id="S2.E5.m1.1.1.1.1.1.1.2.2" xref="S2.E5.m1.1.1.1.1.1.1.2.2.cmml">z</mi><mi id="S2.E5.m1.1.1.1.1.1.1.2.3" xref="S2.E5.m1.1.1.1.1.1.1.2.3.cmml">t</mi></msub><mo fence="false" id="S2.E5.m1.1.1.1.1.1.1.1" xref="S2.E5.m1.1.1.1.1.1.1.1.cmml">|</mo><msub id="S2.E5.m1.1.1.1.1.1.1.3" xref="S2.E5.m1.1.1.1.1.1.1.3.cmml"><mi id="S2.E5.m1.1.1.1.1.1.1.3.2" xref="S2.E5.m1.1.1.1.1.1.1.3.2.cmml">𝐡</mi><mi id="S2.E5.m1.1.1.1.1.1.1.3.3" xref="S2.E5.m1.1.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo stretchy="false" id="S2.E5.m1.1.1.1.1.1.3" xref="S2.E5.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E5.m1.2.2.3" xref="S2.E5.m1.2.2.3.cmml">=</mo><mrow id="S2.E5.m1.2.2.2" xref="S2.E5.m1.2.2.2.cmml"><mi id="S2.E5.m1.2.2.2.3" xref="S2.E5.m1.2.2.2.3.cmml">CTC</mi><mo lspace="0em" rspace="0em" id="S2.E5.m1.2.2.2.2" xref="S2.E5.m1.2.2.2.2.cmml">​</mo><mrow id="S2.E5.m1.2.2.2.1.1" xref="S2.E5.m1.2.2.2.1.1.1.cmml"><mo stretchy="false" id="S2.E5.m1.2.2.2.1.1.2" xref="S2.E5.m1.2.2.2.1.1.1.cmml">(</mo><msub id="S2.E5.m1.2.2.2.1.1.1" xref="S2.E5.m1.2.2.2.1.1.1.cmml"><mi id="S2.E5.m1.2.2.2.1.1.1.2" xref="S2.E5.m1.2.2.2.1.1.1.2.cmml">𝐡</mi><mi id="S2.E5.m1.2.2.2.1.1.1.3" xref="S2.E5.m1.2.2.2.1.1.1.3.cmml">t</mi></msub><mo stretchy="false" id="S2.E5.m1.2.2.2.1.1.3" xref="S2.E5.m1.2.2.2.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E5.m1.2b"><apply id="S2.E5.m1.2.2.cmml" xref="S2.E5.m1.2.2"><eq id="S2.E5.m1.2.2.3.cmml" xref="S2.E5.m1.2.2.3"></eq><apply id="S2.E5.m1.1.1.1.cmml" xref="S2.E5.m1.1.1.1"><times id="S2.E5.m1.1.1.1.2.cmml" xref="S2.E5.m1.1.1.1.2"></times><ci id="S2.E5.m1.1.1.1.3.cmml" xref="S2.E5.m1.1.1.1.3">𝑞</ci><apply id="S2.E5.m1.1.1.1.1.1.1.cmml" xref="S2.E5.m1.1.1.1.1.1"><csymbol cd="latexml" id="S2.E5.m1.1.1.1.1.1.1.1.cmml" xref="S2.E5.m1.1.1.1.1.1.1.1">conditional</csymbol><apply id="S2.E5.m1.1.1.1.1.1.1.2.cmml" xref="S2.E5.m1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.E5.m1.1.1.1.1.1.1.2.1.cmml" xref="S2.E5.m1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.E5.m1.1.1.1.1.1.1.2.2.cmml" xref="S2.E5.m1.1.1.1.1.1.1.2.2">𝑧</ci><ci id="S2.E5.m1.1.1.1.1.1.1.2.3.cmml" xref="S2.E5.m1.1.1.1.1.1.1.2.3">𝑡</ci></apply><apply id="S2.E5.m1.1.1.1.1.1.1.3.cmml" xref="S2.E5.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E5.m1.1.1.1.1.1.1.3.1.cmml" xref="S2.E5.m1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.E5.m1.1.1.1.1.1.1.3.2.cmml" xref="S2.E5.m1.1.1.1.1.1.1.3.2">𝐡</ci><ci id="S2.E5.m1.1.1.1.1.1.1.3.3.cmml" xref="S2.E5.m1.1.1.1.1.1.1.3.3">𝑡</ci></apply></apply></apply><apply id="S2.E5.m1.2.2.2.cmml" xref="S2.E5.m1.2.2.2"><times id="S2.E5.m1.2.2.2.2.cmml" xref="S2.E5.m1.2.2.2.2"></times><ci id="S2.E5.m1.2.2.2.3.cmml" xref="S2.E5.m1.2.2.2.3">CTC</ci><apply id="S2.E5.m1.2.2.2.1.1.1.cmml" xref="S2.E5.m1.2.2.2.1.1"><csymbol cd="ambiguous" id="S2.E5.m1.2.2.2.1.1.1.1.cmml" xref="S2.E5.m1.2.2.2.1.1">subscript</csymbol><ci id="S2.E5.m1.2.2.2.1.1.1.2.cmml" xref="S2.E5.m1.2.2.2.1.1.1.2">𝐡</ci><ci id="S2.E5.m1.2.2.2.1.1.1.3.cmml" xref="S2.E5.m1.2.2.2.1.1.1.3">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E5.m1.2c">\displaystyle q(z_{t}|\mathbf{h}_{t})=\mathrm{CTC}(\mathbf{h}_{t})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
<p id="S2.SS3.SSS1.p1.11" class="ltx_p">The estimated sequence <math id="S2.SS3.SSS1.p1.10.m1.2" class="ltx_Math" alttext="Z^{\tau_{B}}=\{z_{t}|1\leq t\leq\tau_{B}\}" display="inline"><semantics id="S2.SS3.SSS1.p1.10.m1.2a"><mrow id="S2.SS3.SSS1.p1.10.m1.2.2" xref="S2.SS3.SSS1.p1.10.m1.2.2.cmml"><msup id="S2.SS3.SSS1.p1.10.m1.2.2.4" xref="S2.SS3.SSS1.p1.10.m1.2.2.4.cmml"><mi id="S2.SS3.SSS1.p1.10.m1.2.2.4.2" xref="S2.SS3.SSS1.p1.10.m1.2.2.4.2.cmml">Z</mi><msub id="S2.SS3.SSS1.p1.10.m1.2.2.4.3" xref="S2.SS3.SSS1.p1.10.m1.2.2.4.3.cmml"><mi id="S2.SS3.SSS1.p1.10.m1.2.2.4.3.2" xref="S2.SS3.SSS1.p1.10.m1.2.2.4.3.2.cmml">τ</mi><mi id="S2.SS3.SSS1.p1.10.m1.2.2.4.3.3" xref="S2.SS3.SSS1.p1.10.m1.2.2.4.3.3.cmml">B</mi></msub></msup><mo id="S2.SS3.SSS1.p1.10.m1.2.2.3" xref="S2.SS3.SSS1.p1.10.m1.2.2.3.cmml">=</mo><mrow id="S2.SS3.SSS1.p1.10.m1.2.2.2.2" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.3.cmml"><mo stretchy="false" id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.3" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.3.1.cmml">{</mo><msub id="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1" xref="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.cmml"><mi id="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.2" xref="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.2.cmml">z</mi><mi id="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.3" xref="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.3.cmml">t</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.4" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.3.1.cmml">|</mo><mrow id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.cmml"><mn id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.2" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.2.cmml">1</mn><mo id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.3" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.3.cmml">≤</mo><mi id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.4" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.4.cmml">t</mi><mo id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.5" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.5.cmml">≤</mo><msub id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.cmml"><mi id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.2" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.2.cmml">τ</mi><mi id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.3" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.3.cmml">B</mi></msub></mrow><mo stretchy="false" id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.5" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.10.m1.2b"><apply id="S2.SS3.SSS1.p1.10.m1.2.2.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2"><eq id="S2.SS3.SSS1.p1.10.m1.2.2.3.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.3"></eq><apply id="S2.SS3.SSS1.p1.10.m1.2.2.4.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.4"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.10.m1.2.2.4.1.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.4">superscript</csymbol><ci id="S2.SS3.SSS1.p1.10.m1.2.2.4.2.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.4.2">𝑍</ci><apply id="S2.SS3.SSS1.p1.10.m1.2.2.4.3.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.4.3"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.10.m1.2.2.4.3.1.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.4.3">subscript</csymbol><ci id="S2.SS3.SSS1.p1.10.m1.2.2.4.3.2.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.4.3.2">𝜏</ci><ci id="S2.SS3.SSS1.p1.10.m1.2.2.4.3.3.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.4.3.3">𝐵</ci></apply></apply><apply id="S2.SS3.SSS1.p1.10.m1.2.2.2.3.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2"><csymbol cd="latexml" id="S2.SS3.SSS1.p1.10.m1.2.2.2.3.1.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.3">conditional-set</csymbol><apply id="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.cmml" xref="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1">subscript</csymbol><ci id="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.2.cmml" xref="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.2">𝑧</ci><ci id="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.3.cmml" xref="S2.SS3.SSS1.p1.10.m1.1.1.1.1.1.3">𝑡</ci></apply><apply id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2"><and id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2a.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2"></and><apply id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2b.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2"><leq id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.3.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.3"></leq><cn type="integer" id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.2.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.2">1</cn><ci id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.4.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.4">𝑡</ci></apply><apply id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2c.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2"><leq id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.5.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.5"></leq><share href="#S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.4.cmml" id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2d.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2"></share><apply id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.1.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6">subscript</csymbol><ci id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.2.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.2">𝜏</ci><ci id="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.3.cmml" xref="S2.SS3.SSS1.p1.10.m1.2.2.2.2.2.6.3">𝐵</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.10.m1.2c">Z^{\tau_{B}}=\{z_{t}|1\leq t\leq\tau_{B}\}</annotation></semantics></math> can be mapped to a label sequence using a mapping function <math id="S2.SS3.SSS1.p1.11.m2.1" class="ltx_Math" alttext="\mathcal{F}:Z^{\tau_{B}}\rightarrow Y^{I}" display="inline"><semantics id="S2.SS3.SSS1.p1.11.m2.1a"><mrow id="S2.SS3.SSS1.p1.11.m2.1.1" xref="S2.SS3.SSS1.p1.11.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.SSS1.p1.11.m2.1.1.2" xref="S2.SS3.SSS1.p1.11.m2.1.1.2.cmml">ℱ</mi><mo lspace="0.278em" rspace="0.278em" id="S2.SS3.SSS1.p1.11.m2.1.1.1" xref="S2.SS3.SSS1.p1.11.m2.1.1.1.cmml">:</mo><mrow id="S2.SS3.SSS1.p1.11.m2.1.1.3" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.cmml"><msup id="S2.SS3.SSS1.p1.11.m2.1.1.3.2" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2.cmml"><mi id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.2" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2.2.cmml">Z</mi><msub id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.cmml"><mi id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.2" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.2.cmml">τ</mi><mi id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.3" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.3.cmml">B</mi></msub></msup><mo stretchy="false" id="S2.SS3.SSS1.p1.11.m2.1.1.3.1" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.1.cmml">→</mo><msup id="S2.SS3.SSS1.p1.11.m2.1.1.3.3" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.3.cmml"><mi id="S2.SS3.SSS1.p1.11.m2.1.1.3.3.2" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.3.2.cmml">Y</mi><mi id="S2.SS3.SSS1.p1.11.m2.1.1.3.3.3" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.3.3.cmml">I</mi></msup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p1.11.m2.1b"><apply id="S2.SS3.SSS1.p1.11.m2.1.1.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1"><ci id="S2.SS3.SSS1.p1.11.m2.1.1.1.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.1">:</ci><ci id="S2.SS3.SSS1.p1.11.m2.1.1.2.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.2">ℱ</ci><apply id="S2.SS3.SSS1.p1.11.m2.1.1.3.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3"><ci id="S2.SS3.SSS1.p1.11.m2.1.1.3.1.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.1">→</ci><apply id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.1.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2">superscript</csymbol><ci id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.2.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2.2">𝑍</ci><apply id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.1.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3">subscript</csymbol><ci id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.2.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.2">𝜏</ci><ci id="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.3.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.2.3.3">𝐵</ci></apply></apply><apply id="S2.SS3.SSS1.p1.11.m2.1.1.3.3.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.3"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p1.11.m2.1.1.3.3.1.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.3">superscript</csymbol><ci id="S2.SS3.SSS1.p1.11.m2.1.1.3.3.2.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.3.2">𝑌</ci><ci id="S2.SS3.SSS1.p1.11.m2.1.1.3.3.3.cmml" xref="S2.SS3.SSS1.p1.11.m2.1.1.3.3.3">𝐼</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p1.11.m2.1c">\mathcal{F}:Z^{\tau_{B}}\rightarrow Y^{I}</annotation></semantics></math>.</p>
</div>
<div id="S2.SS3.SSS1.p2" class="ltx_para">
<p id="S2.SS3.SSS1.p2.4" class="ltx_p">We then perform CTC greedy search decoding to obtain <math id="S2.SS3.SSS1.p2.1.m1.1" class="ltx_Math" alttext="\hat{z}_{t}=\mathrm{arg}\max_{z_{t}}q(z_{t}|\mathbf{h}_{t})" display="inline"><semantics id="S2.SS3.SSS1.p2.1.m1.1a"><mrow id="S2.SS3.SSS1.p2.1.m1.1.1" xref="S2.SS3.SSS1.p2.1.m1.1.1.cmml"><msub id="S2.SS3.SSS1.p2.1.m1.1.1.3" xref="S2.SS3.SSS1.p2.1.m1.1.1.3.cmml"><mover accent="true" id="S2.SS3.SSS1.p2.1.m1.1.1.3.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.3.2.cmml"><mi id="S2.SS3.SSS1.p2.1.m1.1.1.3.2.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.3.2.2.cmml">z</mi><mo id="S2.SS3.SSS1.p2.1.m1.1.1.3.2.1" xref="S2.SS3.SSS1.p2.1.m1.1.1.3.2.1.cmml">^</mo></mover><mi id="S2.SS3.SSS1.p2.1.m1.1.1.3.3" xref="S2.SS3.SSS1.p2.1.m1.1.1.3.3.cmml">t</mi></msub><mo id="S2.SS3.SSS1.p2.1.m1.1.1.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.2.cmml">=</mo><mrow id="S2.SS3.SSS1.p2.1.m1.1.1.1" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.cmml"><mi id="S2.SS3.SSS1.p2.1.m1.1.1.1.3" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.3.cmml">arg</mi><mo lspace="0.167em" rspace="0em" id="S2.SS3.SSS1.p2.1.m1.1.1.1.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.2.cmml">​</mo><mrow id="S2.SS3.SSS1.p2.1.m1.1.1.1.4" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.cmml"><msub id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.cmml"><mi id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.2.cmml">max</mi><msub id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.cmml"><mi id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.2.cmml">z</mi><mi id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.3" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.3.cmml">t</mi></msub></msub><mo lspace="0.167em" id="S2.SS3.SSS1.p2.1.m1.1.1.1.4a" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.cmml">⁡</mo><mi id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.2.cmml">q</mi></mrow><mo lspace="0em" rspace="0em" id="S2.SS3.SSS1.p2.1.m1.1.1.1.2a" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.2.cmml">​</mo><mrow id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.cmml"><msub id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.cmml"><mi id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.2.cmml">z</mi><mi id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.3" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.3.cmml">t</mi></msub><mo fence="false" id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.1" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.1.cmml">|</mo><msub id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.cmml"><mi id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.2" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.2.cmml">𝐡</mi><mi id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.3" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo stretchy="false" id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.3" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p2.1.m1.1b"><apply id="S2.SS3.SSS1.p2.1.m1.1.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1"><eq id="S2.SS3.SSS1.p2.1.m1.1.1.2.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.2"></eq><apply id="S2.SS3.SSS1.p2.1.m1.1.1.3.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p2.1.m1.1.1.3.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.3">subscript</csymbol><apply id="S2.SS3.SSS1.p2.1.m1.1.1.3.2.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.3.2"><ci id="S2.SS3.SSS1.p2.1.m1.1.1.3.2.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.3.2.1">^</ci><ci id="S2.SS3.SSS1.p2.1.m1.1.1.3.2.2.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.3.2.2">𝑧</ci></apply><ci id="S2.SS3.SSS1.p2.1.m1.1.1.3.3.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.3.3">𝑡</ci></apply><apply id="S2.SS3.SSS1.p2.1.m1.1.1.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1"><times id="S2.SS3.SSS1.p2.1.m1.1.1.1.2.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.2"></times><ci id="S2.SS3.SSS1.p2.1.m1.1.1.1.3.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.3">arg</ci><apply id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4"><apply id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1">subscript</csymbol><max id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.2.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.2"></max><apply id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3">subscript</csymbol><ci id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.2.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.2">𝑧</ci><ci id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.3.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.1.3.3">𝑡</ci></apply></apply><ci id="S2.SS3.SSS1.p2.1.m1.1.1.1.4.2.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.4.2">𝑞</ci></apply><apply id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1"><csymbol cd="latexml" id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.1">conditional</csymbol><apply id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.2.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.2">𝑧</ci><ci id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.3.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.2.3">𝑡</ci></apply><apply id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.1.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.2.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.2">𝐡</ci><ci id="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.3.cmml" xref="S2.SS3.SSS1.p2.1.m1.1.1.1.1.1.1.3.3">𝑡</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p2.1.m1.1c">\hat{z}_{t}=\mathrm{arg}\max_{z_{t}}q(z_{t}|\mathbf{h}_{t})</annotation></semantics></math> and then selectively filter out the frames that output blank token <math id="S2.SS3.SSS1.p2.2.m2.1" class="ltx_Math" alttext="\phi" display="inline"><semantics id="S2.SS3.SSS1.p2.2.m2.1a"><mi id="S2.SS3.SSS1.p2.2.m2.1.1" xref="S2.SS3.SSS1.p2.2.m2.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p2.2.m2.1b"><ci id="S2.SS3.SSS1.p2.2.m2.1.1.cmml" xref="S2.SS3.SSS1.p2.2.m2.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p2.2.m2.1c">\phi</annotation></semantics></math>, thereby significantly reducing the sequence length.
To obtain prompts <math id="S2.SS3.SSS1.p2.3.m3.1" class="ltx_Math" alttext="U^{j\in b}" display="inline"><semantics id="S2.SS3.SSS1.p2.3.m3.1a"><msup id="S2.SS3.SSS1.p2.3.m3.1.1" xref="S2.SS3.SSS1.p2.3.m3.1.1.cmml"><mi id="S2.SS3.SSS1.p2.3.m3.1.1.2" xref="S2.SS3.SSS1.p2.3.m3.1.1.2.cmml">U</mi><mrow id="S2.SS3.SSS1.p2.3.m3.1.1.3" xref="S2.SS3.SSS1.p2.3.m3.1.1.3.cmml"><mi id="S2.SS3.SSS1.p2.3.m3.1.1.3.2" xref="S2.SS3.SSS1.p2.3.m3.1.1.3.2.cmml">j</mi><mo id="S2.SS3.SSS1.p2.3.m3.1.1.3.1" xref="S2.SS3.SSS1.p2.3.m3.1.1.3.1.cmml">∈</mo><mi id="S2.SS3.SSS1.p2.3.m3.1.1.3.3" xref="S2.SS3.SSS1.p2.3.m3.1.1.3.3.cmml">b</mi></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p2.3.m3.1b"><apply id="S2.SS3.SSS1.p2.3.m3.1.1.cmml" xref="S2.SS3.SSS1.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p2.3.m3.1.1.1.cmml" xref="S2.SS3.SSS1.p2.3.m3.1.1">superscript</csymbol><ci id="S2.SS3.SSS1.p2.3.m3.1.1.2.cmml" xref="S2.SS3.SSS1.p2.3.m3.1.1.2">𝑈</ci><apply id="S2.SS3.SSS1.p2.3.m3.1.1.3.cmml" xref="S2.SS3.SSS1.p2.3.m3.1.1.3"><in id="S2.SS3.SSS1.p2.3.m3.1.1.3.1.cmml" xref="S2.SS3.SSS1.p2.3.m3.1.1.3.1"></in><ci id="S2.SS3.SSS1.p2.3.m3.1.1.3.2.cmml" xref="S2.SS3.SSS1.p2.3.m3.1.1.3.2">𝑗</ci><ci id="S2.SS3.SSS1.p2.3.m3.1.1.3.3.cmml" xref="S2.SS3.SSS1.p2.3.m3.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p2.3.m3.1c">U^{j\in b}</annotation></semantics></math> (See Sec. <a href="#S2.SS2" title="2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2</span></a>), the speech subnetwork outputs are mapped to the embedding space of the decoder with a linear layer (<math id="S2.SS3.SSS1.p2.4.m4.1" class="ltx_Math" alttext="\mathrm{MLP}_{\mathrm{ctc}}(\cdot)" display="inline"><semantics id="S2.SS3.SSS1.p2.4.m4.1a"><mrow id="S2.SS3.SSS1.p2.4.m4.1.2" xref="S2.SS3.SSS1.p2.4.m4.1.2.cmml"><msub id="S2.SS3.SSS1.p2.4.m4.1.2.2" xref="S2.SS3.SSS1.p2.4.m4.1.2.2.cmml"><mi id="S2.SS3.SSS1.p2.4.m4.1.2.2.2" xref="S2.SS3.SSS1.p2.4.m4.1.2.2.2.cmml">MLP</mi><mi id="S2.SS3.SSS1.p2.4.m4.1.2.2.3" xref="S2.SS3.SSS1.p2.4.m4.1.2.2.3.cmml">ctc</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS3.SSS1.p2.4.m4.1.2.1" xref="S2.SS3.SSS1.p2.4.m4.1.2.1.cmml">​</mo><mrow id="S2.SS3.SSS1.p2.4.m4.1.2.3.2" xref="S2.SS3.SSS1.p2.4.m4.1.2.cmml"><mo stretchy="false" id="S2.SS3.SSS1.p2.4.m4.1.2.3.2.1" xref="S2.SS3.SSS1.p2.4.m4.1.2.cmml">(</mo><mo lspace="0em" rspace="0em" id="S2.SS3.SSS1.p2.4.m4.1.1" xref="S2.SS3.SSS1.p2.4.m4.1.1.cmml">⋅</mo><mo stretchy="false" id="S2.SS3.SSS1.p2.4.m4.1.2.3.2.2" xref="S2.SS3.SSS1.p2.4.m4.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS1.p2.4.m4.1b"><apply id="S2.SS3.SSS1.p2.4.m4.1.2.cmml" xref="S2.SS3.SSS1.p2.4.m4.1.2"><times id="S2.SS3.SSS1.p2.4.m4.1.2.1.cmml" xref="S2.SS3.SSS1.p2.4.m4.1.2.1"></times><apply id="S2.SS3.SSS1.p2.4.m4.1.2.2.cmml" xref="S2.SS3.SSS1.p2.4.m4.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS1.p2.4.m4.1.2.2.1.cmml" xref="S2.SS3.SSS1.p2.4.m4.1.2.2">subscript</csymbol><ci id="S2.SS3.SSS1.p2.4.m4.1.2.2.2.cmml" xref="S2.SS3.SSS1.p2.4.m4.1.2.2.2">MLP</ci><ci id="S2.SS3.SSS1.p2.4.m4.1.2.2.3.cmml" xref="S2.SS3.SSS1.p2.4.m4.1.2.2.3">ctc</ci></apply><ci id="S2.SS3.SSS1.p2.4.m4.1.1.cmml" xref="S2.SS3.SSS1.p2.4.m4.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS1.p2.4.m4.1c">\mathrm{MLP}_{\mathrm{ctc}}(\cdot)</annotation></semantics></math>) as:</p>
<table id="S5.EGx6" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S2.E6"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.E6.m1.1" class="ltx_math_unparsed" alttext="\displaystyle U_{\mathrm{ctc}}^{j\in b}=\{\mathrm{MLP}_{\mathrm{ctc}}(\mathbf{h}_{t})|t:\tau_{(b-1)}&lt;t\leq\tau_{b},\hat{z}_{t}\neq\phi\}." display="inline"><semantics id="S2.E6.m1.1a"><mrow id="S2.E6.m1.1b"><msubsup id="S2.E6.m1.1.2"><mi id="S2.E6.m1.1.2.2.2">U</mi><mi id="S2.E6.m1.1.2.2.3">ctc</mi><mrow id="S2.E6.m1.1.2.3"><mi id="S2.E6.m1.1.2.3.2">j</mi><mo id="S2.E6.m1.1.2.3.1">∈</mo><mi id="S2.E6.m1.1.2.3.3">b</mi></mrow></msubsup><mo id="S2.E6.m1.1.3">=</mo><mrow id="S2.E6.m1.1.4"><mo stretchy="false" id="S2.E6.m1.1.4.1">{</mo><msub id="S2.E6.m1.1.4.2"><mi id="S2.E6.m1.1.4.2.2">MLP</mi><mi id="S2.E6.m1.1.4.2.3">ctc</mi></msub><mrow id="S2.E6.m1.1.4.3"><mo stretchy="false" id="S2.E6.m1.1.4.3.1">(</mo><msub id="S2.E6.m1.1.4.3.2"><mi id="S2.E6.m1.1.4.3.2.2">𝐡</mi><mi id="S2.E6.m1.1.4.3.2.3">t</mi></msub><mo stretchy="false" id="S2.E6.m1.1.4.3.3">)</mo></mrow><mo fence="false" rspace="0.167em" stretchy="false" id="S2.E6.m1.1.4.4">|</mo><mi id="S2.E6.m1.1.4.5">t</mi><mo lspace="0.278em" rspace="0.278em" id="S2.E6.m1.1.4.6">:</mo><msub id="S2.E6.m1.1.4.7"><mi id="S2.E6.m1.1.4.7.2">τ</mi><mrow id="S2.E6.m1.1.1.1.1"><mo stretchy="false" id="S2.E6.m1.1.1.1.1.2">(</mo><mrow id="S2.E6.m1.1.1.1.1.1"><mi id="S2.E6.m1.1.1.1.1.1.2">b</mi><mo id="S2.E6.m1.1.1.1.1.1.1">−</mo><mn id="S2.E6.m1.1.1.1.1.1.3">1</mn></mrow><mo stretchy="false" id="S2.E6.m1.1.1.1.1.3">)</mo></mrow></msub><mo id="S2.E6.m1.1.4.8">&lt;</mo><mi id="S2.E6.m1.1.4.9">t</mi><mo id="S2.E6.m1.1.4.10">≤</mo><msub id="S2.E6.m1.1.4.11"><mi id="S2.E6.m1.1.4.11.2">τ</mi><mi id="S2.E6.m1.1.4.11.3">b</mi></msub><mo id="S2.E6.m1.1.4.12">,</mo><msub id="S2.E6.m1.1.4.13"><mover accent="true" id="S2.E6.m1.1.4.13.2"><mi id="S2.E6.m1.1.4.13.2.2">z</mi><mo id="S2.E6.m1.1.4.13.2.1">^</mo></mover><mi id="S2.E6.m1.1.4.13.3">t</mi></msub><mo id="S2.E6.m1.1.4.14">≠</mo><mi id="S2.E6.m1.1.4.15">ϕ</mi><mo stretchy="false" id="S2.E6.m1.1.4.16">}</mo></mrow><mo lspace="0em" id="S2.E6.m1.1.5">.</mo></mrow><annotation encoding="application/x-tex" id="S2.E6.m1.1c">\displaystyle U_{\mathrm{ctc}}^{j\in b}=\{\mathrm{MLP}_{\mathrm{ctc}}(\mathbf{h}_{t})|t:\tau_{(b-1)}&lt;t\leq\tau_{b},\hat{z}_{t}\neq\phi\}.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
</table>
<p id="S2.SS3.SSS1.p2.5" class="ltx_p">The process is graphically shown in the lower part of Fig. <a href="#S2.F1" title="Figure 1 ‣ 2.1 Decoder-only architecture for ASR ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
</section>
<section id="S2.SS3.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.3.2 </span>Block context prompts</h4>

<div id="S2.SS3.SSS2.p1" class="ltx_para">
<p id="S2.SS3.SSS2.p1.4" class="ltx_p">The context embedding vector in the last layer <math id="S2.SS3.SSS2.p1.1.m1.2" class="ltx_Math" alttext="{\mathbf{c}}_{N,b}" display="inline"><semantics id="S2.SS3.SSS2.p1.1.m1.2a"><msub id="S2.SS3.SSS2.p1.1.m1.2.3" xref="S2.SS3.SSS2.p1.1.m1.2.3.cmml"><mi id="S2.SS3.SSS2.p1.1.m1.2.3.2" xref="S2.SS3.SSS2.p1.1.m1.2.3.2.cmml">𝐜</mi><mrow id="S2.SS3.SSS2.p1.1.m1.2.2.2.4" xref="S2.SS3.SSS2.p1.1.m1.2.2.2.3.cmml"><mi id="S2.SS3.SSS2.p1.1.m1.1.1.1.1" xref="S2.SS3.SSS2.p1.1.m1.1.1.1.1.cmml">N</mi><mo id="S2.SS3.SSS2.p1.1.m1.2.2.2.4.1" xref="S2.SS3.SSS2.p1.1.m1.2.2.2.3.cmml">,</mo><mi id="S2.SS3.SSS2.p1.1.m1.2.2.2.2" xref="S2.SS3.SSS2.p1.1.m1.2.2.2.2.cmml">b</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS2.p1.1.m1.2b"><apply id="S2.SS3.SSS2.p1.1.m1.2.3.cmml" xref="S2.SS3.SSS2.p1.1.m1.2.3"><csymbol cd="ambiguous" id="S2.SS3.SSS2.p1.1.m1.2.3.1.cmml" xref="S2.SS3.SSS2.p1.1.m1.2.3">subscript</csymbol><ci id="S2.SS3.SSS2.p1.1.m1.2.3.2.cmml" xref="S2.SS3.SSS2.p1.1.m1.2.3.2">𝐜</ci><list id="S2.SS3.SSS2.p1.1.m1.2.2.2.3.cmml" xref="S2.SS3.SSS2.p1.1.m1.2.2.2.4"><ci id="S2.SS3.SSS2.p1.1.m1.1.1.1.1.cmml" xref="S2.SS3.SSS2.p1.1.m1.1.1.1.1">𝑁</ci><ci id="S2.SS3.SSS2.p1.1.m1.2.2.2.2.cmml" xref="S2.SS3.SSS2.p1.1.m1.2.2.2.2">𝑏</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS2.p1.1.m1.2c">{\mathbf{c}}_{N,b}</annotation></semantics></math> in Eq. (<a href="#S2.E3" title="In 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>) considerably contains acoustic information of not only the <math id="S2.SS3.SSS2.p1.2.m2.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S2.SS3.SSS2.p1.2.m2.1a"><mi id="S2.SS3.SSS2.p1.2.m2.1.1" xref="S2.SS3.SSS2.p1.2.m2.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS2.p1.2.m2.1b"><ci id="S2.SS3.SSS2.p1.2.m2.1.1.cmml" xref="S2.SS3.SSS2.p1.2.m2.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS2.p1.2.m2.1c">b</annotation></semantics></math>-th block but also of its context, i.e., previous blocks.
This contextual information can also be used as prompts to the decoder, in addition to the CTC prompts (Sec. <a href="#S2.SS3.SSS1" title="2.3.1 CTC prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.3.1</span></a>).
We use another linear layer (<math id="S2.SS3.SSS2.p1.3.m3.1" class="ltx_Math" alttext="\mathrm{MLP}_{\mathrm{cxt}}(\cdot)" display="inline"><semantics id="S2.SS3.SSS2.p1.3.m3.1a"><mrow id="S2.SS3.SSS2.p1.3.m3.1.2" xref="S2.SS3.SSS2.p1.3.m3.1.2.cmml"><msub id="S2.SS3.SSS2.p1.3.m3.1.2.2" xref="S2.SS3.SSS2.p1.3.m3.1.2.2.cmml"><mi id="S2.SS3.SSS2.p1.3.m3.1.2.2.2" xref="S2.SS3.SSS2.p1.3.m3.1.2.2.2.cmml">MLP</mi><mi id="S2.SS3.SSS2.p1.3.m3.1.2.2.3" xref="S2.SS3.SSS2.p1.3.m3.1.2.2.3.cmml">cxt</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS3.SSS2.p1.3.m3.1.2.1" xref="S2.SS3.SSS2.p1.3.m3.1.2.1.cmml">​</mo><mrow id="S2.SS3.SSS2.p1.3.m3.1.2.3.2" xref="S2.SS3.SSS2.p1.3.m3.1.2.cmml"><mo stretchy="false" id="S2.SS3.SSS2.p1.3.m3.1.2.3.2.1" xref="S2.SS3.SSS2.p1.3.m3.1.2.cmml">(</mo><mo lspace="0em" rspace="0em" id="S2.SS3.SSS2.p1.3.m3.1.1" xref="S2.SS3.SSS2.p1.3.m3.1.1.cmml">⋅</mo><mo stretchy="false" id="S2.SS3.SSS2.p1.3.m3.1.2.3.2.2" xref="S2.SS3.SSS2.p1.3.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS2.p1.3.m3.1b"><apply id="S2.SS3.SSS2.p1.3.m3.1.2.cmml" xref="S2.SS3.SSS2.p1.3.m3.1.2"><times id="S2.SS3.SSS2.p1.3.m3.1.2.1.cmml" xref="S2.SS3.SSS2.p1.3.m3.1.2.1"></times><apply id="S2.SS3.SSS2.p1.3.m3.1.2.2.cmml" xref="S2.SS3.SSS2.p1.3.m3.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS2.p1.3.m3.1.2.2.1.cmml" xref="S2.SS3.SSS2.p1.3.m3.1.2.2">subscript</csymbol><ci id="S2.SS3.SSS2.p1.3.m3.1.2.2.2.cmml" xref="S2.SS3.SSS2.p1.3.m3.1.2.2.2">MLP</ci><ci id="S2.SS3.SSS2.p1.3.m3.1.2.2.3.cmml" xref="S2.SS3.SSS2.p1.3.m3.1.2.2.3">cxt</ci></apply><ci id="S2.SS3.SSS2.p1.3.m3.1.1.cmml" xref="S2.SS3.SSS2.p1.3.m3.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS2.p1.3.m3.1c">\mathrm{MLP}_{\mathrm{cxt}}(\cdot)</annotation></semantics></math>) to map the context embedding <math id="S2.SS3.SSS2.p1.4.m4.2" class="ltx_Math" alttext="{\mathbf{c}}_{N,b}" display="inline"><semantics id="S2.SS3.SSS2.p1.4.m4.2a"><msub id="S2.SS3.SSS2.p1.4.m4.2.3" xref="S2.SS3.SSS2.p1.4.m4.2.3.cmml"><mi id="S2.SS3.SSS2.p1.4.m4.2.3.2" xref="S2.SS3.SSS2.p1.4.m4.2.3.2.cmml">𝐜</mi><mrow id="S2.SS3.SSS2.p1.4.m4.2.2.2.4" xref="S2.SS3.SSS2.p1.4.m4.2.2.2.3.cmml"><mi id="S2.SS3.SSS2.p1.4.m4.1.1.1.1" xref="S2.SS3.SSS2.p1.4.m4.1.1.1.1.cmml">N</mi><mo id="S2.SS3.SSS2.p1.4.m4.2.2.2.4.1" xref="S2.SS3.SSS2.p1.4.m4.2.2.2.3.cmml">,</mo><mi id="S2.SS3.SSS2.p1.4.m4.2.2.2.2" xref="S2.SS3.SSS2.p1.4.m4.2.2.2.2.cmml">b</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS2.p1.4.m4.2b"><apply id="S2.SS3.SSS2.p1.4.m4.2.3.cmml" xref="S2.SS3.SSS2.p1.4.m4.2.3"><csymbol cd="ambiguous" id="S2.SS3.SSS2.p1.4.m4.2.3.1.cmml" xref="S2.SS3.SSS2.p1.4.m4.2.3">subscript</csymbol><ci id="S2.SS3.SSS2.p1.4.m4.2.3.2.cmml" xref="S2.SS3.SSS2.p1.4.m4.2.3.2">𝐜</ci><list id="S2.SS3.SSS2.p1.4.m4.2.2.2.3.cmml" xref="S2.SS3.SSS2.p1.4.m4.2.2.2.4"><ci id="S2.SS3.SSS2.p1.4.m4.1.1.1.1.cmml" xref="S2.SS3.SSS2.p1.4.m4.1.1.1.1">𝑁</ci><ci id="S2.SS3.SSS2.p1.4.m4.2.2.2.2.cmml" xref="S2.SS3.SSS2.p1.4.m4.2.2.2.2">𝑏</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS2.p1.4.m4.2c">{\mathbf{c}}_{N,b}</annotation></semantics></math> to the embedding space of the decoder.</p>
<table id="S5.EGx7" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S2.E7"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.E7.m1.3" class="ltx_Math" alttext="\displaystyle U_{\mathrm{cxt}}^{j\in b}=\mathrm{MLP}_{\mathrm{cxt}}({\mathbf{c}}_{N,b})" display="inline"><semantics id="S2.E7.m1.3a"><mrow id="S2.E7.m1.3.3" xref="S2.E7.m1.3.3.cmml"><msubsup id="S2.E7.m1.3.3.3" xref="S2.E7.m1.3.3.3.cmml"><mi id="S2.E7.m1.3.3.3.2.2" xref="S2.E7.m1.3.3.3.2.2.cmml">U</mi><mi id="S2.E7.m1.3.3.3.2.3" xref="S2.E7.m1.3.3.3.2.3.cmml">cxt</mi><mrow id="S2.E7.m1.3.3.3.3" xref="S2.E7.m1.3.3.3.3.cmml"><mi id="S2.E7.m1.3.3.3.3.2" xref="S2.E7.m1.3.3.3.3.2.cmml">j</mi><mo id="S2.E7.m1.3.3.3.3.1" xref="S2.E7.m1.3.3.3.3.1.cmml">∈</mo><mi id="S2.E7.m1.3.3.3.3.3" xref="S2.E7.m1.3.3.3.3.3.cmml">b</mi></mrow></msubsup><mo id="S2.E7.m1.3.3.2" xref="S2.E7.m1.3.3.2.cmml">=</mo><mrow id="S2.E7.m1.3.3.1" xref="S2.E7.m1.3.3.1.cmml"><msub id="S2.E7.m1.3.3.1.3" xref="S2.E7.m1.3.3.1.3.cmml"><mi id="S2.E7.m1.3.3.1.3.2" xref="S2.E7.m1.3.3.1.3.2.cmml">MLP</mi><mi id="S2.E7.m1.3.3.1.3.3" xref="S2.E7.m1.3.3.1.3.3.cmml">cxt</mi></msub><mo lspace="0em" rspace="0em" id="S2.E7.m1.3.3.1.2" xref="S2.E7.m1.3.3.1.2.cmml">​</mo><mrow id="S2.E7.m1.3.3.1.1.1" xref="S2.E7.m1.3.3.1.1.1.1.cmml"><mo stretchy="false" id="S2.E7.m1.3.3.1.1.1.2" xref="S2.E7.m1.3.3.1.1.1.1.cmml">(</mo><msub id="S2.E7.m1.3.3.1.1.1.1" xref="S2.E7.m1.3.3.1.1.1.1.cmml"><mi id="S2.E7.m1.3.3.1.1.1.1.2" xref="S2.E7.m1.3.3.1.1.1.1.2.cmml">𝐜</mi><mrow id="S2.E7.m1.2.2.2.4" xref="S2.E7.m1.2.2.2.3.cmml"><mi id="S2.E7.m1.1.1.1.1" xref="S2.E7.m1.1.1.1.1.cmml">N</mi><mo id="S2.E7.m1.2.2.2.4.1" xref="S2.E7.m1.2.2.2.3.cmml">,</mo><mi id="S2.E7.m1.2.2.2.2" xref="S2.E7.m1.2.2.2.2.cmml">b</mi></mrow></msub><mo stretchy="false" id="S2.E7.m1.3.3.1.1.1.3" xref="S2.E7.m1.3.3.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E7.m1.3b"><apply id="S2.E7.m1.3.3.cmml" xref="S2.E7.m1.3.3"><eq id="S2.E7.m1.3.3.2.cmml" xref="S2.E7.m1.3.3.2"></eq><apply id="S2.E7.m1.3.3.3.cmml" xref="S2.E7.m1.3.3.3"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.3.1.cmml" xref="S2.E7.m1.3.3.3">superscript</csymbol><apply id="S2.E7.m1.3.3.3.2.cmml" xref="S2.E7.m1.3.3.3"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.3.2.1.cmml" xref="S2.E7.m1.3.3.3">subscript</csymbol><ci id="S2.E7.m1.3.3.3.2.2.cmml" xref="S2.E7.m1.3.3.3.2.2">𝑈</ci><ci id="S2.E7.m1.3.3.3.2.3.cmml" xref="S2.E7.m1.3.3.3.2.3">cxt</ci></apply><apply id="S2.E7.m1.3.3.3.3.cmml" xref="S2.E7.m1.3.3.3.3"><in id="S2.E7.m1.3.3.3.3.1.cmml" xref="S2.E7.m1.3.3.3.3.1"></in><ci id="S2.E7.m1.3.3.3.3.2.cmml" xref="S2.E7.m1.3.3.3.3.2">𝑗</ci><ci id="S2.E7.m1.3.3.3.3.3.cmml" xref="S2.E7.m1.3.3.3.3.3">𝑏</ci></apply></apply><apply id="S2.E7.m1.3.3.1.cmml" xref="S2.E7.m1.3.3.1"><times id="S2.E7.m1.3.3.1.2.cmml" xref="S2.E7.m1.3.3.1.2"></times><apply id="S2.E7.m1.3.3.1.3.cmml" xref="S2.E7.m1.3.3.1.3"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.1.3.1.cmml" xref="S2.E7.m1.3.3.1.3">subscript</csymbol><ci id="S2.E7.m1.3.3.1.3.2.cmml" xref="S2.E7.m1.3.3.1.3.2">MLP</ci><ci id="S2.E7.m1.3.3.1.3.3.cmml" xref="S2.E7.m1.3.3.1.3.3">cxt</ci></apply><apply id="S2.E7.m1.3.3.1.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.1"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.1.1.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.1">subscript</csymbol><ci id="S2.E7.m1.3.3.1.1.1.1.2.cmml" xref="S2.E7.m1.3.3.1.1.1.1.2">𝐜</ci><list id="S2.E7.m1.2.2.2.3.cmml" xref="S2.E7.m1.2.2.2.4"><ci id="S2.E7.m1.1.1.1.1.cmml" xref="S2.E7.m1.1.1.1.1">𝑁</ci><ci id="S2.E7.m1.2.2.2.2.cmml" xref="S2.E7.m1.2.2.2.2">𝑏</ci></list></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E7.m1.3c">\displaystyle U_{\mathrm{cxt}}^{j\in b}=\mathrm{MLP}_{\mathrm{cxt}}({\mathbf{c}}_{N,b})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7)</span></td>
</tr></tbody>
</table>
<p id="S2.SS3.SSS2.p1.7" class="ltx_p">Thus, we concatenate <math id="S2.SS3.SSS2.p1.5.m1.1" class="ltx_Math" alttext="U_{\mathrm{ctc}}^{j\in b}" display="inline"><semantics id="S2.SS3.SSS2.p1.5.m1.1a"><msubsup id="S2.SS3.SSS2.p1.5.m1.1.1" xref="S2.SS3.SSS2.p1.5.m1.1.1.cmml"><mi id="S2.SS3.SSS2.p1.5.m1.1.1.2.2" xref="S2.SS3.SSS2.p1.5.m1.1.1.2.2.cmml">U</mi><mi id="S2.SS3.SSS2.p1.5.m1.1.1.2.3" xref="S2.SS3.SSS2.p1.5.m1.1.1.2.3.cmml">ctc</mi><mrow id="S2.SS3.SSS2.p1.5.m1.1.1.3" xref="S2.SS3.SSS2.p1.5.m1.1.1.3.cmml"><mi id="S2.SS3.SSS2.p1.5.m1.1.1.3.2" xref="S2.SS3.SSS2.p1.5.m1.1.1.3.2.cmml">j</mi><mo id="S2.SS3.SSS2.p1.5.m1.1.1.3.1" xref="S2.SS3.SSS2.p1.5.m1.1.1.3.1.cmml">∈</mo><mi id="S2.SS3.SSS2.p1.5.m1.1.1.3.3" xref="S2.SS3.SSS2.p1.5.m1.1.1.3.3.cmml">b</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS2.p1.5.m1.1b"><apply id="S2.SS3.SSS2.p1.5.m1.1.1.cmml" xref="S2.SS3.SSS2.p1.5.m1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS2.p1.5.m1.1.1.1.cmml" xref="S2.SS3.SSS2.p1.5.m1.1.1">superscript</csymbol><apply id="S2.SS3.SSS2.p1.5.m1.1.1.2.cmml" xref="S2.SS3.SSS2.p1.5.m1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS2.p1.5.m1.1.1.2.1.cmml" xref="S2.SS3.SSS2.p1.5.m1.1.1">subscript</csymbol><ci id="S2.SS3.SSS2.p1.5.m1.1.1.2.2.cmml" xref="S2.SS3.SSS2.p1.5.m1.1.1.2.2">𝑈</ci><ci id="S2.SS3.SSS2.p1.5.m1.1.1.2.3.cmml" xref="S2.SS3.SSS2.p1.5.m1.1.1.2.3">ctc</ci></apply><apply id="S2.SS3.SSS2.p1.5.m1.1.1.3.cmml" xref="S2.SS3.SSS2.p1.5.m1.1.1.3"><in id="S2.SS3.SSS2.p1.5.m1.1.1.3.1.cmml" xref="S2.SS3.SSS2.p1.5.m1.1.1.3.1"></in><ci id="S2.SS3.SSS2.p1.5.m1.1.1.3.2.cmml" xref="S2.SS3.SSS2.p1.5.m1.1.1.3.2">𝑗</ci><ci id="S2.SS3.SSS2.p1.5.m1.1.1.3.3.cmml" xref="S2.SS3.SSS2.p1.5.m1.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS2.p1.5.m1.1c">U_{\mathrm{ctc}}^{j\in b}</annotation></semantics></math> in Eq. (<a href="#S2.E6" title="In 2.3.1 CTC prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>) and <math id="S2.SS3.SSS2.p1.6.m2.1" class="ltx_Math" alttext="U_{\mathrm{cxt}}^{j\in b}" display="inline"><semantics id="S2.SS3.SSS2.p1.6.m2.1a"><msubsup id="S2.SS3.SSS2.p1.6.m2.1.1" xref="S2.SS3.SSS2.p1.6.m2.1.1.cmml"><mi id="S2.SS3.SSS2.p1.6.m2.1.1.2.2" xref="S2.SS3.SSS2.p1.6.m2.1.1.2.2.cmml">U</mi><mi id="S2.SS3.SSS2.p1.6.m2.1.1.2.3" xref="S2.SS3.SSS2.p1.6.m2.1.1.2.3.cmml">cxt</mi><mrow id="S2.SS3.SSS2.p1.6.m2.1.1.3" xref="S2.SS3.SSS2.p1.6.m2.1.1.3.cmml"><mi id="S2.SS3.SSS2.p1.6.m2.1.1.3.2" xref="S2.SS3.SSS2.p1.6.m2.1.1.3.2.cmml">j</mi><mo id="S2.SS3.SSS2.p1.6.m2.1.1.3.1" xref="S2.SS3.SSS2.p1.6.m2.1.1.3.1.cmml">∈</mo><mi id="S2.SS3.SSS2.p1.6.m2.1.1.3.3" xref="S2.SS3.SSS2.p1.6.m2.1.1.3.3.cmml">b</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS2.p1.6.m2.1b"><apply id="S2.SS3.SSS2.p1.6.m2.1.1.cmml" xref="S2.SS3.SSS2.p1.6.m2.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS2.p1.6.m2.1.1.1.cmml" xref="S2.SS3.SSS2.p1.6.m2.1.1">superscript</csymbol><apply id="S2.SS3.SSS2.p1.6.m2.1.1.2.cmml" xref="S2.SS3.SSS2.p1.6.m2.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS2.p1.6.m2.1.1.2.1.cmml" xref="S2.SS3.SSS2.p1.6.m2.1.1">subscript</csymbol><ci id="S2.SS3.SSS2.p1.6.m2.1.1.2.2.cmml" xref="S2.SS3.SSS2.p1.6.m2.1.1.2.2">𝑈</ci><ci id="S2.SS3.SSS2.p1.6.m2.1.1.2.3.cmml" xref="S2.SS3.SSS2.p1.6.m2.1.1.2.3">cxt</ci></apply><apply id="S2.SS3.SSS2.p1.6.m2.1.1.3.cmml" xref="S2.SS3.SSS2.p1.6.m2.1.1.3"><in id="S2.SS3.SSS2.p1.6.m2.1.1.3.1.cmml" xref="S2.SS3.SSS2.p1.6.m2.1.1.3.1"></in><ci id="S2.SS3.SSS2.p1.6.m2.1.1.3.2.cmml" xref="S2.SS3.SSS2.p1.6.m2.1.1.3.2">𝑗</ci><ci id="S2.SS3.SSS2.p1.6.m2.1.1.3.3.cmml" xref="S2.SS3.SSS2.p1.6.m2.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS2.p1.6.m2.1c">U_{\mathrm{cxt}}^{j\in b}</annotation></semantics></math> in Eq. (<a href="#S2.E7" title="In 2.3.2 Block context prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a>) to obtain prompts for the decoder <math id="S2.SS3.SSS2.p1.7.m3.1" class="ltx_Math" alttext="U^{j\in b}" display="inline"><semantics id="S2.SS3.SSS2.p1.7.m3.1a"><msup id="S2.SS3.SSS2.p1.7.m3.1.1" xref="S2.SS3.SSS2.p1.7.m3.1.1.cmml"><mi id="S2.SS3.SSS2.p1.7.m3.1.1.2" xref="S2.SS3.SSS2.p1.7.m3.1.1.2.cmml">U</mi><mrow id="S2.SS3.SSS2.p1.7.m3.1.1.3" xref="S2.SS3.SSS2.p1.7.m3.1.1.3.cmml"><mi id="S2.SS3.SSS2.p1.7.m3.1.1.3.2" xref="S2.SS3.SSS2.p1.7.m3.1.1.3.2.cmml">j</mi><mo id="S2.SS3.SSS2.p1.7.m3.1.1.3.1" xref="S2.SS3.SSS2.p1.7.m3.1.1.3.1.cmml">∈</mo><mi id="S2.SS3.SSS2.p1.7.m3.1.1.3.3" xref="S2.SS3.SSS2.p1.7.m3.1.1.3.3.cmml">b</mi></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS2.p1.7.m3.1b"><apply id="S2.SS3.SSS2.p1.7.m3.1.1.cmml" xref="S2.SS3.SSS2.p1.7.m3.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS2.p1.7.m3.1.1.1.cmml" xref="S2.SS3.SSS2.p1.7.m3.1.1">superscript</csymbol><ci id="S2.SS3.SSS2.p1.7.m3.1.1.2.cmml" xref="S2.SS3.SSS2.p1.7.m3.1.1.2">𝑈</ci><apply id="S2.SS3.SSS2.p1.7.m3.1.1.3.cmml" xref="S2.SS3.SSS2.p1.7.m3.1.1.3"><in id="S2.SS3.SSS2.p1.7.m3.1.1.3.1.cmml" xref="S2.SS3.SSS2.p1.7.m3.1.1.3.1"></in><ci id="S2.SS3.SSS2.p1.7.m3.1.1.3.2.cmml" xref="S2.SS3.SSS2.p1.7.m3.1.1.3.2">𝑗</ci><ci id="S2.SS3.SSS2.p1.7.m3.1.1.3.3.cmml" xref="S2.SS3.SSS2.p1.7.m3.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS2.p1.7.m3.1c">U^{j\in b}</annotation></semantics></math> (See Eq. (<a href="#S2.E2" title="In 2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>)).</p>
<table id="S5.EGx8" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S2.E8"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.E8.m1.1" class="ltx_Math" alttext="\displaystyle U^{j\in b}=U_{\mathrm{ctc}}^{j\in b}\oplus U_{\mathrm{cxt}}^{j\in b}" display="inline"><semantics id="S2.E8.m1.1a"><mrow id="S2.E8.m1.1.1" xref="S2.E8.m1.1.1.cmml"><msup id="S2.E8.m1.1.1.2" xref="S2.E8.m1.1.1.2.cmml"><mi id="S2.E8.m1.1.1.2.2" xref="S2.E8.m1.1.1.2.2.cmml">U</mi><mrow id="S2.E8.m1.1.1.2.3" xref="S2.E8.m1.1.1.2.3.cmml"><mi id="S2.E8.m1.1.1.2.3.2" xref="S2.E8.m1.1.1.2.3.2.cmml">j</mi><mo id="S2.E8.m1.1.1.2.3.1" xref="S2.E8.m1.1.1.2.3.1.cmml">∈</mo><mi id="S2.E8.m1.1.1.2.3.3" xref="S2.E8.m1.1.1.2.3.3.cmml">b</mi></mrow></msup><mo id="S2.E8.m1.1.1.1" xref="S2.E8.m1.1.1.1.cmml">=</mo><mrow id="S2.E8.m1.1.1.3" xref="S2.E8.m1.1.1.3.cmml"><msubsup id="S2.E8.m1.1.1.3.2" xref="S2.E8.m1.1.1.3.2.cmml"><mi id="S2.E8.m1.1.1.3.2.2.2" xref="S2.E8.m1.1.1.3.2.2.2.cmml">U</mi><mi id="S2.E8.m1.1.1.3.2.2.3" xref="S2.E8.m1.1.1.3.2.2.3.cmml">ctc</mi><mrow id="S2.E8.m1.1.1.3.2.3" xref="S2.E8.m1.1.1.3.2.3.cmml"><mi id="S2.E8.m1.1.1.3.2.3.2" xref="S2.E8.m1.1.1.3.2.3.2.cmml">j</mi><mo id="S2.E8.m1.1.1.3.2.3.1" xref="S2.E8.m1.1.1.3.2.3.1.cmml">∈</mo><mi id="S2.E8.m1.1.1.3.2.3.3" xref="S2.E8.m1.1.1.3.2.3.3.cmml">b</mi></mrow></msubsup><mo id="S2.E8.m1.1.1.3.1" xref="S2.E8.m1.1.1.3.1.cmml">⊕</mo><msubsup id="S2.E8.m1.1.1.3.3" xref="S2.E8.m1.1.1.3.3.cmml"><mi id="S2.E8.m1.1.1.3.3.2.2" xref="S2.E8.m1.1.1.3.3.2.2.cmml">U</mi><mi id="S2.E8.m1.1.1.3.3.2.3" xref="S2.E8.m1.1.1.3.3.2.3.cmml">cxt</mi><mrow id="S2.E8.m1.1.1.3.3.3" xref="S2.E8.m1.1.1.3.3.3.cmml"><mi id="S2.E8.m1.1.1.3.3.3.2" xref="S2.E8.m1.1.1.3.3.3.2.cmml">j</mi><mo id="S2.E8.m1.1.1.3.3.3.1" xref="S2.E8.m1.1.1.3.3.3.1.cmml">∈</mo><mi id="S2.E8.m1.1.1.3.3.3.3" xref="S2.E8.m1.1.1.3.3.3.3.cmml">b</mi></mrow></msubsup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E8.m1.1b"><apply id="S2.E8.m1.1.1.cmml" xref="S2.E8.m1.1.1"><eq id="S2.E8.m1.1.1.1.cmml" xref="S2.E8.m1.1.1.1"></eq><apply id="S2.E8.m1.1.1.2.cmml" xref="S2.E8.m1.1.1.2"><csymbol cd="ambiguous" id="S2.E8.m1.1.1.2.1.cmml" xref="S2.E8.m1.1.1.2">superscript</csymbol><ci id="S2.E8.m1.1.1.2.2.cmml" xref="S2.E8.m1.1.1.2.2">𝑈</ci><apply id="S2.E8.m1.1.1.2.3.cmml" xref="S2.E8.m1.1.1.2.3"><in id="S2.E8.m1.1.1.2.3.1.cmml" xref="S2.E8.m1.1.1.2.3.1"></in><ci id="S2.E8.m1.1.1.2.3.2.cmml" xref="S2.E8.m1.1.1.2.3.2">𝑗</ci><ci id="S2.E8.m1.1.1.2.3.3.cmml" xref="S2.E8.m1.1.1.2.3.3">𝑏</ci></apply></apply><apply id="S2.E8.m1.1.1.3.cmml" xref="S2.E8.m1.1.1.3"><csymbol cd="latexml" id="S2.E8.m1.1.1.3.1.cmml" xref="S2.E8.m1.1.1.3.1">direct-sum</csymbol><apply id="S2.E8.m1.1.1.3.2.cmml" xref="S2.E8.m1.1.1.3.2"><csymbol cd="ambiguous" id="S2.E8.m1.1.1.3.2.1.cmml" xref="S2.E8.m1.1.1.3.2">superscript</csymbol><apply id="S2.E8.m1.1.1.3.2.2.cmml" xref="S2.E8.m1.1.1.3.2"><csymbol cd="ambiguous" id="S2.E8.m1.1.1.3.2.2.1.cmml" xref="S2.E8.m1.1.1.3.2">subscript</csymbol><ci id="S2.E8.m1.1.1.3.2.2.2.cmml" xref="S2.E8.m1.1.1.3.2.2.2">𝑈</ci><ci id="S2.E8.m1.1.1.3.2.2.3.cmml" xref="S2.E8.m1.1.1.3.2.2.3">ctc</ci></apply><apply id="S2.E8.m1.1.1.3.2.3.cmml" xref="S2.E8.m1.1.1.3.2.3"><in id="S2.E8.m1.1.1.3.2.3.1.cmml" xref="S2.E8.m1.1.1.3.2.3.1"></in><ci id="S2.E8.m1.1.1.3.2.3.2.cmml" xref="S2.E8.m1.1.1.3.2.3.2">𝑗</ci><ci id="S2.E8.m1.1.1.3.2.3.3.cmml" xref="S2.E8.m1.1.1.3.2.3.3">𝑏</ci></apply></apply><apply id="S2.E8.m1.1.1.3.3.cmml" xref="S2.E8.m1.1.1.3.3"><csymbol cd="ambiguous" id="S2.E8.m1.1.1.3.3.1.cmml" xref="S2.E8.m1.1.1.3.3">superscript</csymbol><apply id="S2.E8.m1.1.1.3.3.2.cmml" xref="S2.E8.m1.1.1.3.3"><csymbol cd="ambiguous" id="S2.E8.m1.1.1.3.3.2.1.cmml" xref="S2.E8.m1.1.1.3.3">subscript</csymbol><ci id="S2.E8.m1.1.1.3.3.2.2.cmml" xref="S2.E8.m1.1.1.3.3.2.2">𝑈</ci><ci id="S2.E8.m1.1.1.3.3.2.3.cmml" xref="S2.E8.m1.1.1.3.3.2.3">cxt</ci></apply><apply id="S2.E8.m1.1.1.3.3.3.cmml" xref="S2.E8.m1.1.1.3.3.3"><in id="S2.E8.m1.1.1.3.3.3.1.cmml" xref="S2.E8.m1.1.1.3.3.3.1"></in><ci id="S2.E8.m1.1.1.3.3.3.2.cmml" xref="S2.E8.m1.1.1.3.3.3.2">𝑗</ci><ci id="S2.E8.m1.1.1.3.3.3.3.cmml" xref="S2.E8.m1.1.1.3.3.3.3">𝑏</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E8.m1.1c">\displaystyle U^{j\in b}=U_{\mathrm{ctc}}^{j\in b}\oplus U_{\mathrm{cxt}}^{j\in b}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(8)</span></td>
</tr></tbody>
</table>
</div>
</section>
</section>
<section id="S2.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.4 </span>Score fusion inference</h3>

<div id="S2.SS4.p1" class="ltx_para">
<p id="S2.SS4.p1.1" class="ltx_p">The probabilistic scores of CTC and the decoder are combined either in a frame-synchronous manner <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite> or in a label-synchronous manner <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib32" title="" class="ltx_ref">32</a>]</cite>.
In particular, for streaming ASR, the integrated variation of frame/label-synchronous beam search improves performance <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>.
We propose using this integrated beam search for the streaming decoder-only architecture.</p>
</div>
<div id="S2.SS4.p2" class="ltx_para">
<p id="S2.SS4.p2.15" class="ltx_p">In the beam search both hypotheses generated by CTC and the decoder are kept for score fusion.
The score is computed based on the log-likelihood of both CTC probability <math id="S2.SS4.p2.1.m1.2" class="ltx_Math" alttext="p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l},t)" display="inline"><semantics id="S2.SS4.p2.1.m1.2a"><mrow id="S2.SS4.p2.1.m1.2.2" xref="S2.SS4.p2.1.m1.2.2.cmml"><msub id="S2.SS4.p2.1.m1.2.2.3" xref="S2.SS4.p2.1.m1.2.2.3.cmml"><mi id="S2.SS4.p2.1.m1.2.2.3.2" xref="S2.SS4.p2.1.m1.2.2.3.2.cmml">p</mi><mi id="S2.SS4.p2.1.m1.2.2.3.3" xref="S2.SS4.p2.1.m1.2.2.3.3.cmml">ctc</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS4.p2.1.m1.2.2.2" xref="S2.SS4.p2.1.m1.2.2.2.cmml">​</mo><mrow id="S2.SS4.p2.1.m1.2.2.1.1" xref="S2.SS4.p2.1.m1.2.2.1.2.cmml"><mo stretchy="false" id="S2.SS4.p2.1.m1.2.2.1.1.2" xref="S2.SS4.p2.1.m1.2.2.1.2.cmml">(</mo><msubsup id="S2.SS4.p2.1.m1.2.2.1.1.1" xref="S2.SS4.p2.1.m1.2.2.1.1.1.cmml"><mi id="S2.SS4.p2.1.m1.2.2.1.1.1.2.2" xref="S2.SS4.p2.1.m1.2.2.1.1.1.2.2.cmml">Y</mi><mi id="S2.SS4.p2.1.m1.2.2.1.1.1.2.3" xref="S2.SS4.p2.1.m1.2.2.1.1.1.2.3.cmml">ctc</mi><mi id="S2.SS4.p2.1.m1.2.2.1.1.1.3" xref="S2.SS4.p2.1.m1.2.2.1.1.1.3.cmml">l</mi></msubsup><mo id="S2.SS4.p2.1.m1.2.2.1.1.3" xref="S2.SS4.p2.1.m1.2.2.1.2.cmml">,</mo><mi id="S2.SS4.p2.1.m1.1.1" xref="S2.SS4.p2.1.m1.1.1.cmml">t</mi><mo stretchy="false" id="S2.SS4.p2.1.m1.2.2.1.1.4" xref="S2.SS4.p2.1.m1.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.1.m1.2b"><apply id="S2.SS4.p2.1.m1.2.2.cmml" xref="S2.SS4.p2.1.m1.2.2"><times id="S2.SS4.p2.1.m1.2.2.2.cmml" xref="S2.SS4.p2.1.m1.2.2.2"></times><apply id="S2.SS4.p2.1.m1.2.2.3.cmml" xref="S2.SS4.p2.1.m1.2.2.3"><csymbol cd="ambiguous" id="S2.SS4.p2.1.m1.2.2.3.1.cmml" xref="S2.SS4.p2.1.m1.2.2.3">subscript</csymbol><ci id="S2.SS4.p2.1.m1.2.2.3.2.cmml" xref="S2.SS4.p2.1.m1.2.2.3.2">𝑝</ci><ci id="S2.SS4.p2.1.m1.2.2.3.3.cmml" xref="S2.SS4.p2.1.m1.2.2.3.3">ctc</ci></apply><interval closure="open" id="S2.SS4.p2.1.m1.2.2.1.2.cmml" xref="S2.SS4.p2.1.m1.2.2.1.1"><apply id="S2.SS4.p2.1.m1.2.2.1.1.1.cmml" xref="S2.SS4.p2.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.1.m1.2.2.1.1.1.1.cmml" xref="S2.SS4.p2.1.m1.2.2.1.1.1">superscript</csymbol><apply id="S2.SS4.p2.1.m1.2.2.1.1.1.2.cmml" xref="S2.SS4.p2.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.1.m1.2.2.1.1.1.2.1.cmml" xref="S2.SS4.p2.1.m1.2.2.1.1.1">subscript</csymbol><ci id="S2.SS4.p2.1.m1.2.2.1.1.1.2.2.cmml" xref="S2.SS4.p2.1.m1.2.2.1.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.1.m1.2.2.1.1.1.2.3.cmml" xref="S2.SS4.p2.1.m1.2.2.1.1.1.2.3">ctc</ci></apply><ci id="S2.SS4.p2.1.m1.2.2.1.1.1.3.cmml" xref="S2.SS4.p2.1.m1.2.2.1.1.1.3">𝑙</ci></apply><ci id="S2.SS4.p2.1.m1.1.1.cmml" xref="S2.SS4.p2.1.m1.1.1">𝑡</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.1.m1.2c">p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l},t)</annotation></semantics></math> and decoder probability <math id="S2.SS4.p2.2.m2.1" class="ltx_Math" alttext="p_{\mathrm{dec}}(Y_{\mathrm{dec}}^{i})" display="inline"><semantics id="S2.SS4.p2.2.m2.1a"><mrow id="S2.SS4.p2.2.m2.1.1" xref="S2.SS4.p2.2.m2.1.1.cmml"><msub id="S2.SS4.p2.2.m2.1.1.3" xref="S2.SS4.p2.2.m2.1.1.3.cmml"><mi id="S2.SS4.p2.2.m2.1.1.3.2" xref="S2.SS4.p2.2.m2.1.1.3.2.cmml">p</mi><mi id="S2.SS4.p2.2.m2.1.1.3.3" xref="S2.SS4.p2.2.m2.1.1.3.3.cmml">dec</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS4.p2.2.m2.1.1.2" xref="S2.SS4.p2.2.m2.1.1.2.cmml">​</mo><mrow id="S2.SS4.p2.2.m2.1.1.1.1" xref="S2.SS4.p2.2.m2.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS4.p2.2.m2.1.1.1.1.2" xref="S2.SS4.p2.2.m2.1.1.1.1.1.cmml">(</mo><msubsup id="S2.SS4.p2.2.m2.1.1.1.1.1" xref="S2.SS4.p2.2.m2.1.1.1.1.1.cmml"><mi id="S2.SS4.p2.2.m2.1.1.1.1.1.2.2" xref="S2.SS4.p2.2.m2.1.1.1.1.1.2.2.cmml">Y</mi><mi id="S2.SS4.p2.2.m2.1.1.1.1.1.2.3" xref="S2.SS4.p2.2.m2.1.1.1.1.1.2.3.cmml">dec</mi><mi id="S2.SS4.p2.2.m2.1.1.1.1.1.3" xref="S2.SS4.p2.2.m2.1.1.1.1.1.3.cmml">i</mi></msubsup><mo stretchy="false" id="S2.SS4.p2.2.m2.1.1.1.1.3" xref="S2.SS4.p2.2.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.2.m2.1b"><apply id="S2.SS4.p2.2.m2.1.1.cmml" xref="S2.SS4.p2.2.m2.1.1"><times id="S2.SS4.p2.2.m2.1.1.2.cmml" xref="S2.SS4.p2.2.m2.1.1.2"></times><apply id="S2.SS4.p2.2.m2.1.1.3.cmml" xref="S2.SS4.p2.2.m2.1.1.3"><csymbol cd="ambiguous" id="S2.SS4.p2.2.m2.1.1.3.1.cmml" xref="S2.SS4.p2.2.m2.1.1.3">subscript</csymbol><ci id="S2.SS4.p2.2.m2.1.1.3.2.cmml" xref="S2.SS4.p2.2.m2.1.1.3.2">𝑝</ci><ci id="S2.SS4.p2.2.m2.1.1.3.3.cmml" xref="S2.SS4.p2.2.m2.1.1.3.3">dec</ci></apply><apply id="S2.SS4.p2.2.m2.1.1.1.1.1.cmml" xref="S2.SS4.p2.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.2.m2.1.1.1.1.1.1.cmml" xref="S2.SS4.p2.2.m2.1.1.1.1">superscript</csymbol><apply id="S2.SS4.p2.2.m2.1.1.1.1.1.2.cmml" xref="S2.SS4.p2.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.2.m2.1.1.1.1.1.2.1.cmml" xref="S2.SS4.p2.2.m2.1.1.1.1">subscript</csymbol><ci id="S2.SS4.p2.2.m2.1.1.1.1.1.2.2.cmml" xref="S2.SS4.p2.2.m2.1.1.1.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.2.m2.1.1.1.1.1.2.3.cmml" xref="S2.SS4.p2.2.m2.1.1.1.1.1.2.3">dec</ci></apply><ci id="S2.SS4.p2.2.m2.1.1.1.1.1.3.cmml" xref="S2.SS4.p2.2.m2.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.2.m2.1c">p_{\mathrm{dec}}(Y_{\mathrm{dec}}^{i})</annotation></semantics></math> (Eq. (<a href="#S2.E2" title="In 2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>)), where <math id="S2.SS4.p2.3.m3.1" class="ltx_Math" alttext="Y_{\mathrm{ctc}}^{l}" display="inline"><semantics id="S2.SS4.p2.3.m3.1a"><msubsup id="S2.SS4.p2.3.m3.1.1" xref="S2.SS4.p2.3.m3.1.1.cmml"><mi id="S2.SS4.p2.3.m3.1.1.2.2" xref="S2.SS4.p2.3.m3.1.1.2.2.cmml">Y</mi><mi id="S2.SS4.p2.3.m3.1.1.2.3" xref="S2.SS4.p2.3.m3.1.1.2.3.cmml">ctc</mi><mi id="S2.SS4.p2.3.m3.1.1.3" xref="S2.SS4.p2.3.m3.1.1.3.cmml">l</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.3.m3.1b"><apply id="S2.SS4.p2.3.m3.1.1.cmml" xref="S2.SS4.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.3.m3.1.1.1.cmml" xref="S2.SS4.p2.3.m3.1.1">superscript</csymbol><apply id="S2.SS4.p2.3.m3.1.1.2.cmml" xref="S2.SS4.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.3.m3.1.1.2.1.cmml" xref="S2.SS4.p2.3.m3.1.1">subscript</csymbol><ci id="S2.SS4.p2.3.m3.1.1.2.2.cmml" xref="S2.SS4.p2.3.m3.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.3.m3.1.1.2.3.cmml" xref="S2.SS4.p2.3.m3.1.1.2.3">ctc</ci></apply><ci id="S2.SS4.p2.3.m3.1.1.3.cmml" xref="S2.SS4.p2.3.m3.1.1.3">𝑙</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.3.m3.1c">Y_{\mathrm{ctc}}^{l}</annotation></semantics></math> and <math id="S2.SS4.p2.4.m4.1" class="ltx_Math" alttext="Y_{\mathrm{dec}}^{i}" display="inline"><semantics id="S2.SS4.p2.4.m4.1a"><msubsup id="S2.SS4.p2.4.m4.1.1" xref="S2.SS4.p2.4.m4.1.1.cmml"><mi id="S2.SS4.p2.4.m4.1.1.2.2" xref="S2.SS4.p2.4.m4.1.1.2.2.cmml">Y</mi><mi id="S2.SS4.p2.4.m4.1.1.2.3" xref="S2.SS4.p2.4.m4.1.1.2.3.cmml">dec</mi><mi id="S2.SS4.p2.4.m4.1.1.3" xref="S2.SS4.p2.4.m4.1.1.3.cmml">i</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.4.m4.1b"><apply id="S2.SS4.p2.4.m4.1.1.cmml" xref="S2.SS4.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.4.m4.1.1.1.cmml" xref="S2.SS4.p2.4.m4.1.1">superscript</csymbol><apply id="S2.SS4.p2.4.m4.1.1.2.cmml" xref="S2.SS4.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.4.m4.1.1.2.1.cmml" xref="S2.SS4.p2.4.m4.1.1">subscript</csymbol><ci id="S2.SS4.p2.4.m4.1.1.2.2.cmml" xref="S2.SS4.p2.4.m4.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.4.m4.1.1.2.3.cmml" xref="S2.SS4.p2.4.m4.1.1.2.3">dec</ci></apply><ci id="S2.SS4.p2.4.m4.1.1.3.cmml" xref="S2.SS4.p2.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.4.m4.1c">Y_{\mathrm{dec}}^{i}</annotation></semantics></math> are <math id="S2.SS4.p2.5.m5.1" class="ltx_Math" alttext="l" display="inline"><semantics id="S2.SS4.p2.5.m5.1a"><mi id="S2.SS4.p2.5.m5.1.1" xref="S2.SS4.p2.5.m5.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.5.m5.1b"><ci id="S2.SS4.p2.5.m5.1.1.cmml" xref="S2.SS4.p2.5.m5.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.5.m5.1c">l</annotation></semantics></math>-length hypothesis based on the frame-synchronous search of CTC and <math id="S2.SS4.p2.6.m6.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S2.SS4.p2.6.m6.1a"><mi id="S2.SS4.p2.6.m6.1.1" xref="S2.SS4.p2.6.m6.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.6.m6.1b"><ci id="S2.SS4.p2.6.m6.1.1.cmml" xref="S2.SS4.p2.6.m6.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.6.m6.1c">i</annotation></semantics></math>-length hypothesis based on the label-synchronous search of the decoder, respectively.
Note that, according to <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>, <math id="S2.SS4.p2.7.m7.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S2.SS4.p2.7.m7.1a"><mi id="S2.SS4.p2.7.m7.1.1" xref="S2.SS4.p2.7.m7.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.7.m7.1b"><ci id="S2.SS4.p2.7.m7.1.1.cmml" xref="S2.SS4.p2.7.m7.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.7.m7.1c">i</annotation></semantics></math> is upper bounded by <math id="S2.SS4.p2.8.m8.1" class="ltx_Math" alttext="l" display="inline"><semantics id="S2.SS4.p2.8.m8.1a"><mi id="S2.SS4.p2.8.m8.1.1" xref="S2.SS4.p2.8.m8.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.8.m8.1b"><ci id="S2.SS4.p2.8.m8.1.1.cmml" xref="S2.SS4.p2.8.m8.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.8.m8.1c">l</annotation></semantics></math> as the decoder hypotheses <math id="S2.SS4.p2.9.m9.1" class="ltx_Math" alttext="Y_{\mathrm{dec}}^{i}" display="inline"><semantics id="S2.SS4.p2.9.m9.1a"><msubsup id="S2.SS4.p2.9.m9.1.1" xref="S2.SS4.p2.9.m9.1.1.cmml"><mi id="S2.SS4.p2.9.m9.1.1.2.2" xref="S2.SS4.p2.9.m9.1.1.2.2.cmml">Y</mi><mi id="S2.SS4.p2.9.m9.1.1.2.3" xref="S2.SS4.p2.9.m9.1.1.2.3.cmml">dec</mi><mi id="S2.SS4.p2.9.m9.1.1.3" xref="S2.SS4.p2.9.m9.1.1.3.cmml">i</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.9.m9.1b"><apply id="S2.SS4.p2.9.m9.1.1.cmml" xref="S2.SS4.p2.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.9.m9.1.1.1.cmml" xref="S2.SS4.p2.9.m9.1.1">superscript</csymbol><apply id="S2.SS4.p2.9.m9.1.1.2.cmml" xref="S2.SS4.p2.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.9.m9.1.1.2.1.cmml" xref="S2.SS4.p2.9.m9.1.1">subscript</csymbol><ci id="S2.SS4.p2.9.m9.1.1.2.2.cmml" xref="S2.SS4.p2.9.m9.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.9.m9.1.1.2.3.cmml" xref="S2.SS4.p2.9.m9.1.1.2.3">dec</ci></apply><ci id="S2.SS4.p2.9.m9.1.1.3.cmml" xref="S2.SS4.p2.9.m9.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.9.m9.1c">Y_{\mathrm{dec}}^{i}</annotation></semantics></math> is always a prefix of the CTC hypotheses <math id="S2.SS4.p2.10.m10.1" class="ltx_Math" alttext="Y_{\mathrm{ctc}}^{l}" display="inline"><semantics id="S2.SS4.p2.10.m10.1a"><msubsup id="S2.SS4.p2.10.m10.1.1" xref="S2.SS4.p2.10.m10.1.1.cmml"><mi id="S2.SS4.p2.10.m10.1.1.2.2" xref="S2.SS4.p2.10.m10.1.1.2.2.cmml">Y</mi><mi id="S2.SS4.p2.10.m10.1.1.2.3" xref="S2.SS4.p2.10.m10.1.1.2.3.cmml">ctc</mi><mi id="S2.SS4.p2.10.m10.1.1.3" xref="S2.SS4.p2.10.m10.1.1.3.cmml">l</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.10.m10.1b"><apply id="S2.SS4.p2.10.m10.1.1.cmml" xref="S2.SS4.p2.10.m10.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.10.m10.1.1.1.cmml" xref="S2.SS4.p2.10.m10.1.1">superscript</csymbol><apply id="S2.SS4.p2.10.m10.1.1.2.cmml" xref="S2.SS4.p2.10.m10.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.10.m10.1.1.2.1.cmml" xref="S2.SS4.p2.10.m10.1.1">subscript</csymbol><ci id="S2.SS4.p2.10.m10.1.1.2.2.cmml" xref="S2.SS4.p2.10.m10.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.10.m10.1.1.2.3.cmml" xref="S2.SS4.p2.10.m10.1.1.2.3">ctc</ci></apply><ci id="S2.SS4.p2.10.m10.1.1.3.cmml" xref="S2.SS4.p2.10.m10.1.1.3">𝑙</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.10.m10.1c">Y_{\mathrm{ctc}}^{l}</annotation></semantics></math>.
<math id="S2.SS4.p2.11.m11.2" class="ltx_Math" alttext="p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l},t)" display="inline"><semantics id="S2.SS4.p2.11.m11.2a"><mrow id="S2.SS4.p2.11.m11.2.2" xref="S2.SS4.p2.11.m11.2.2.cmml"><msub id="S2.SS4.p2.11.m11.2.2.3" xref="S2.SS4.p2.11.m11.2.2.3.cmml"><mi id="S2.SS4.p2.11.m11.2.2.3.2" xref="S2.SS4.p2.11.m11.2.2.3.2.cmml">p</mi><mi id="S2.SS4.p2.11.m11.2.2.3.3" xref="S2.SS4.p2.11.m11.2.2.3.3.cmml">ctc</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS4.p2.11.m11.2.2.2" xref="S2.SS4.p2.11.m11.2.2.2.cmml">​</mo><mrow id="S2.SS4.p2.11.m11.2.2.1.1" xref="S2.SS4.p2.11.m11.2.2.1.2.cmml"><mo stretchy="false" id="S2.SS4.p2.11.m11.2.2.1.1.2" xref="S2.SS4.p2.11.m11.2.2.1.2.cmml">(</mo><msubsup id="S2.SS4.p2.11.m11.2.2.1.1.1" xref="S2.SS4.p2.11.m11.2.2.1.1.1.cmml"><mi id="S2.SS4.p2.11.m11.2.2.1.1.1.2.2" xref="S2.SS4.p2.11.m11.2.2.1.1.1.2.2.cmml">Y</mi><mi id="S2.SS4.p2.11.m11.2.2.1.1.1.2.3" xref="S2.SS4.p2.11.m11.2.2.1.1.1.2.3.cmml">ctc</mi><mi id="S2.SS4.p2.11.m11.2.2.1.1.1.3" xref="S2.SS4.p2.11.m11.2.2.1.1.1.3.cmml">l</mi></msubsup><mo id="S2.SS4.p2.11.m11.2.2.1.1.3" xref="S2.SS4.p2.11.m11.2.2.1.2.cmml">,</mo><mi id="S2.SS4.p2.11.m11.1.1" xref="S2.SS4.p2.11.m11.1.1.cmml">t</mi><mo stretchy="false" id="S2.SS4.p2.11.m11.2.2.1.1.4" xref="S2.SS4.p2.11.m11.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.11.m11.2b"><apply id="S2.SS4.p2.11.m11.2.2.cmml" xref="S2.SS4.p2.11.m11.2.2"><times id="S2.SS4.p2.11.m11.2.2.2.cmml" xref="S2.SS4.p2.11.m11.2.2.2"></times><apply id="S2.SS4.p2.11.m11.2.2.3.cmml" xref="S2.SS4.p2.11.m11.2.2.3"><csymbol cd="ambiguous" id="S2.SS4.p2.11.m11.2.2.3.1.cmml" xref="S2.SS4.p2.11.m11.2.2.3">subscript</csymbol><ci id="S2.SS4.p2.11.m11.2.2.3.2.cmml" xref="S2.SS4.p2.11.m11.2.2.3.2">𝑝</ci><ci id="S2.SS4.p2.11.m11.2.2.3.3.cmml" xref="S2.SS4.p2.11.m11.2.2.3.3">ctc</ci></apply><interval closure="open" id="S2.SS4.p2.11.m11.2.2.1.2.cmml" xref="S2.SS4.p2.11.m11.2.2.1.1"><apply id="S2.SS4.p2.11.m11.2.2.1.1.1.cmml" xref="S2.SS4.p2.11.m11.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.11.m11.2.2.1.1.1.1.cmml" xref="S2.SS4.p2.11.m11.2.2.1.1.1">superscript</csymbol><apply id="S2.SS4.p2.11.m11.2.2.1.1.1.2.cmml" xref="S2.SS4.p2.11.m11.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.11.m11.2.2.1.1.1.2.1.cmml" xref="S2.SS4.p2.11.m11.2.2.1.1.1">subscript</csymbol><ci id="S2.SS4.p2.11.m11.2.2.1.1.1.2.2.cmml" xref="S2.SS4.p2.11.m11.2.2.1.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.11.m11.2.2.1.1.1.2.3.cmml" xref="S2.SS4.p2.11.m11.2.2.1.1.1.2.3">ctc</ci></apply><ci id="S2.SS4.p2.11.m11.2.2.1.1.1.3.cmml" xref="S2.SS4.p2.11.m11.2.2.1.1.1.3">𝑙</ci></apply><ci id="S2.SS4.p2.11.m11.1.1.cmml" xref="S2.SS4.p2.11.m11.1.1">𝑡</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.11.m11.2c">p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l},t)</annotation></semantics></math> is efficiently calculated by recursively accumulating the probability <math id="S2.SS4.p2.12.m12.1" class="ltx_Math" alttext="\gamma(\cdot)" display="inline"><semantics id="S2.SS4.p2.12.m12.1a"><mrow id="S2.SS4.p2.12.m12.1.2" xref="S2.SS4.p2.12.m12.1.2.cmml"><mi id="S2.SS4.p2.12.m12.1.2.2" xref="S2.SS4.p2.12.m12.1.2.2.cmml">γ</mi><mo lspace="0em" rspace="0em" id="S2.SS4.p2.12.m12.1.2.1" xref="S2.SS4.p2.12.m12.1.2.1.cmml">​</mo><mrow id="S2.SS4.p2.12.m12.1.2.3.2" xref="S2.SS4.p2.12.m12.1.2.cmml"><mo stretchy="false" id="S2.SS4.p2.12.m12.1.2.3.2.1" xref="S2.SS4.p2.12.m12.1.2.cmml">(</mo><mo lspace="0em" rspace="0em" id="S2.SS4.p2.12.m12.1.1" xref="S2.SS4.p2.12.m12.1.1.cmml">⋅</mo><mo stretchy="false" id="S2.SS4.p2.12.m12.1.2.3.2.2" xref="S2.SS4.p2.12.m12.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.12.m12.1b"><apply id="S2.SS4.p2.12.m12.1.2.cmml" xref="S2.SS4.p2.12.m12.1.2"><times id="S2.SS4.p2.12.m12.1.2.1.cmml" xref="S2.SS4.p2.12.m12.1.2.1"></times><ci id="S2.SS4.p2.12.m12.1.2.2.cmml" xref="S2.SS4.p2.12.m12.1.2.2">𝛾</ci><ci id="S2.SS4.p2.12.m12.1.1.cmml" xref="S2.SS4.p2.12.m12.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.12.m12.1c">\gamma(\cdot)</annotation></semantics></math>, based on the frame-wise posteriors <math id="S2.SS4.p2.13.m13.1" class="ltx_Math" alttext="q(z_{t}|\mathbf{h}_{t})" display="inline"><semantics id="S2.SS4.p2.13.m13.1a"><mrow id="S2.SS4.p2.13.m13.1.1" xref="S2.SS4.p2.13.m13.1.1.cmml"><mi id="S2.SS4.p2.13.m13.1.1.3" xref="S2.SS4.p2.13.m13.1.1.3.cmml">q</mi><mo lspace="0em" rspace="0em" id="S2.SS4.p2.13.m13.1.1.2" xref="S2.SS4.p2.13.m13.1.1.2.cmml">​</mo><mrow id="S2.SS4.p2.13.m13.1.1.1.1" xref="S2.SS4.p2.13.m13.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS4.p2.13.m13.1.1.1.1.2" xref="S2.SS4.p2.13.m13.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS4.p2.13.m13.1.1.1.1.1" xref="S2.SS4.p2.13.m13.1.1.1.1.1.cmml"><msub id="S2.SS4.p2.13.m13.1.1.1.1.1.2" xref="S2.SS4.p2.13.m13.1.1.1.1.1.2.cmml"><mi id="S2.SS4.p2.13.m13.1.1.1.1.1.2.2" xref="S2.SS4.p2.13.m13.1.1.1.1.1.2.2.cmml">z</mi><mi id="S2.SS4.p2.13.m13.1.1.1.1.1.2.3" xref="S2.SS4.p2.13.m13.1.1.1.1.1.2.3.cmml">t</mi></msub><mo fence="false" id="S2.SS4.p2.13.m13.1.1.1.1.1.1" xref="S2.SS4.p2.13.m13.1.1.1.1.1.1.cmml">|</mo><msub id="S2.SS4.p2.13.m13.1.1.1.1.1.3" xref="S2.SS4.p2.13.m13.1.1.1.1.1.3.cmml"><mi id="S2.SS4.p2.13.m13.1.1.1.1.1.3.2" xref="S2.SS4.p2.13.m13.1.1.1.1.1.3.2.cmml">𝐡</mi><mi id="S2.SS4.p2.13.m13.1.1.1.1.1.3.3" xref="S2.SS4.p2.13.m13.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo stretchy="false" id="S2.SS4.p2.13.m13.1.1.1.1.3" xref="S2.SS4.p2.13.m13.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.13.m13.1b"><apply id="S2.SS4.p2.13.m13.1.1.cmml" xref="S2.SS4.p2.13.m13.1.1"><times id="S2.SS4.p2.13.m13.1.1.2.cmml" xref="S2.SS4.p2.13.m13.1.1.2"></times><ci id="S2.SS4.p2.13.m13.1.1.3.cmml" xref="S2.SS4.p2.13.m13.1.1.3">𝑞</ci><apply id="S2.SS4.p2.13.m13.1.1.1.1.1.cmml" xref="S2.SS4.p2.13.m13.1.1.1.1"><csymbol cd="latexml" id="S2.SS4.p2.13.m13.1.1.1.1.1.1.cmml" xref="S2.SS4.p2.13.m13.1.1.1.1.1.1">conditional</csymbol><apply id="S2.SS4.p2.13.m13.1.1.1.1.1.2.cmml" xref="S2.SS4.p2.13.m13.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.SS4.p2.13.m13.1.1.1.1.1.2.1.cmml" xref="S2.SS4.p2.13.m13.1.1.1.1.1.2">subscript</csymbol><ci id="S2.SS4.p2.13.m13.1.1.1.1.1.2.2.cmml" xref="S2.SS4.p2.13.m13.1.1.1.1.1.2.2">𝑧</ci><ci id="S2.SS4.p2.13.m13.1.1.1.1.1.2.3.cmml" xref="S2.SS4.p2.13.m13.1.1.1.1.1.2.3">𝑡</ci></apply><apply id="S2.SS4.p2.13.m13.1.1.1.1.1.3.cmml" xref="S2.SS4.p2.13.m13.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.SS4.p2.13.m13.1.1.1.1.1.3.1.cmml" xref="S2.SS4.p2.13.m13.1.1.1.1.1.3">subscript</csymbol><ci id="S2.SS4.p2.13.m13.1.1.1.1.1.3.2.cmml" xref="S2.SS4.p2.13.m13.1.1.1.1.1.3.2">𝐡</ci><ci id="S2.SS4.p2.13.m13.1.1.1.1.1.3.3.cmml" xref="S2.SS4.p2.13.m13.1.1.1.1.1.3.3">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.13.m13.1c">q(z_{t}|\mathbf{h}_{t})</annotation></semantics></math> (Eq. (<a href="#S2.E5" title="In 2.3.1 CTC prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>)), of the sequence ending with blank <math id="S2.SS4.p2.14.m14.1" class="ltx_Math" alttext="Y^{l}_{\mathrm{b}}" display="inline"><semantics id="S2.SS4.p2.14.m14.1a"><msubsup id="S2.SS4.p2.14.m14.1.1" xref="S2.SS4.p2.14.m14.1.1.cmml"><mi id="S2.SS4.p2.14.m14.1.1.2.2" xref="S2.SS4.p2.14.m14.1.1.2.2.cmml">Y</mi><mi mathvariant="normal" id="S2.SS4.p2.14.m14.1.1.3" xref="S2.SS4.p2.14.m14.1.1.3.cmml">b</mi><mi id="S2.SS4.p2.14.m14.1.1.2.3" xref="S2.SS4.p2.14.m14.1.1.2.3.cmml">l</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.14.m14.1b"><apply id="S2.SS4.p2.14.m14.1.1.cmml" xref="S2.SS4.p2.14.m14.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.14.m14.1.1.1.cmml" xref="S2.SS4.p2.14.m14.1.1">subscript</csymbol><apply id="S2.SS4.p2.14.m14.1.1.2.cmml" xref="S2.SS4.p2.14.m14.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.14.m14.1.1.2.1.cmml" xref="S2.SS4.p2.14.m14.1.1">superscript</csymbol><ci id="S2.SS4.p2.14.m14.1.1.2.2.cmml" xref="S2.SS4.p2.14.m14.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.14.m14.1.1.2.3.cmml" xref="S2.SS4.p2.14.m14.1.1.2.3">𝑙</ci></apply><ci id="S2.SS4.p2.14.m14.1.1.3.cmml" xref="S2.SS4.p2.14.m14.1.1.3">b</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.14.m14.1c">Y^{l}_{\mathrm{b}}</annotation></semantics></math> and non-blank <math id="S2.SS4.p2.15.m15.1" class="ltx_Math" alttext="Y^{l}_{\mathrm{n}}" display="inline"><semantics id="S2.SS4.p2.15.m15.1a"><msubsup id="S2.SS4.p2.15.m15.1.1" xref="S2.SS4.p2.15.m15.1.1.cmml"><mi id="S2.SS4.p2.15.m15.1.1.2.2" xref="S2.SS4.p2.15.m15.1.1.2.2.cmml">Y</mi><mi mathvariant="normal" id="S2.SS4.p2.15.m15.1.1.3" xref="S2.SS4.p2.15.m15.1.1.3.cmml">n</mi><mi id="S2.SS4.p2.15.m15.1.1.2.3" xref="S2.SS4.p2.15.m15.1.1.2.3.cmml">l</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.15.m15.1b"><apply id="S2.SS4.p2.15.m15.1.1.cmml" xref="S2.SS4.p2.15.m15.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.15.m15.1.1.1.cmml" xref="S2.SS4.p2.15.m15.1.1">subscript</csymbol><apply id="S2.SS4.p2.15.m15.1.1.2.cmml" xref="S2.SS4.p2.15.m15.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.15.m15.1.1.2.1.cmml" xref="S2.SS4.p2.15.m15.1.1">superscript</csymbol><ci id="S2.SS4.p2.15.m15.1.1.2.2.cmml" xref="S2.SS4.p2.15.m15.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.15.m15.1.1.2.3.cmml" xref="S2.SS4.p2.15.m15.1.1.2.3">𝑙</ci></apply><ci id="S2.SS4.p2.15.m15.1.1.3.cmml" xref="S2.SS4.p2.15.m15.1.1.3">n</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.15.m15.1c">Y^{l}_{\mathrm{n}}</annotation></semantics></math> as</p>
<table id="S5.EGx9" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S2.E9"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.E9.m1.2" class="ltx_Math" alttext="\displaystyle p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l},t)" display="inline"><semantics id="S2.E9.m1.2a"><mrow id="S2.E9.m1.2.2" xref="S2.E9.m1.2.2.cmml"><msub id="S2.E9.m1.2.2.3" xref="S2.E9.m1.2.2.3.cmml"><mi id="S2.E9.m1.2.2.3.2" xref="S2.E9.m1.2.2.3.2.cmml">p</mi><mi id="S2.E9.m1.2.2.3.3" xref="S2.E9.m1.2.2.3.3.cmml">ctc</mi></msub><mo lspace="0em" rspace="0em" id="S2.E9.m1.2.2.2" xref="S2.E9.m1.2.2.2.cmml">​</mo><mrow id="S2.E9.m1.2.2.1.1" xref="S2.E9.m1.2.2.1.2.cmml"><mo stretchy="false" id="S2.E9.m1.2.2.1.1.2" xref="S2.E9.m1.2.2.1.2.cmml">(</mo><msubsup id="S2.E9.m1.2.2.1.1.1" xref="S2.E9.m1.2.2.1.1.1.cmml"><mi id="S2.E9.m1.2.2.1.1.1.2.2" xref="S2.E9.m1.2.2.1.1.1.2.2.cmml">Y</mi><mi id="S2.E9.m1.2.2.1.1.1.2.3" xref="S2.E9.m1.2.2.1.1.1.2.3.cmml">ctc</mi><mi id="S2.E9.m1.2.2.1.1.1.3" xref="S2.E9.m1.2.2.1.1.1.3.cmml">l</mi></msubsup><mo id="S2.E9.m1.2.2.1.1.3" xref="S2.E9.m1.2.2.1.2.cmml">,</mo><mi id="S2.E9.m1.1.1" xref="S2.E9.m1.1.1.cmml">t</mi><mo stretchy="false" id="S2.E9.m1.2.2.1.1.4" xref="S2.E9.m1.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E9.m1.2b"><apply id="S2.E9.m1.2.2.cmml" xref="S2.E9.m1.2.2"><times id="S2.E9.m1.2.2.2.cmml" xref="S2.E9.m1.2.2.2"></times><apply id="S2.E9.m1.2.2.3.cmml" xref="S2.E9.m1.2.2.3"><csymbol cd="ambiguous" id="S2.E9.m1.2.2.3.1.cmml" xref="S2.E9.m1.2.2.3">subscript</csymbol><ci id="S2.E9.m1.2.2.3.2.cmml" xref="S2.E9.m1.2.2.3.2">𝑝</ci><ci id="S2.E9.m1.2.2.3.3.cmml" xref="S2.E9.m1.2.2.3.3">ctc</ci></apply><interval closure="open" id="S2.E9.m1.2.2.1.2.cmml" xref="S2.E9.m1.2.2.1.1"><apply id="S2.E9.m1.2.2.1.1.1.cmml" xref="S2.E9.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.E9.m1.2.2.1.1.1.1.cmml" xref="S2.E9.m1.2.2.1.1.1">superscript</csymbol><apply id="S2.E9.m1.2.2.1.1.1.2.cmml" xref="S2.E9.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.E9.m1.2.2.1.1.1.2.1.cmml" xref="S2.E9.m1.2.2.1.1.1">subscript</csymbol><ci id="S2.E9.m1.2.2.1.1.1.2.2.cmml" xref="S2.E9.m1.2.2.1.1.1.2.2">𝑌</ci><ci id="S2.E9.m1.2.2.1.1.1.2.3.cmml" xref="S2.E9.m1.2.2.1.1.1.2.3">ctc</ci></apply><ci id="S2.E9.m1.2.2.1.1.1.3.cmml" xref="S2.E9.m1.2.2.1.1.1.3">𝑙</ci></apply><ci id="S2.E9.m1.1.1.cmml" xref="S2.E9.m1.1.1">𝑡</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E9.m1.2c">\displaystyle p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l},t)</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S2.E9.m2.4" class="ltx_Math" alttext="\displaystyle=\gamma(Y_{\mathrm{b}}^{l},t)+\gamma(Y_{\mathrm{n}}^{l},t)" display="inline"><semantics id="S2.E9.m2.4a"><mrow id="S2.E9.m2.4.4" xref="S2.E9.m2.4.4.cmml"><mi id="S2.E9.m2.4.4.4" xref="S2.E9.m2.4.4.4.cmml"></mi><mo id="S2.E9.m2.4.4.3" xref="S2.E9.m2.4.4.3.cmml">=</mo><mrow id="S2.E9.m2.4.4.2" xref="S2.E9.m2.4.4.2.cmml"><mrow id="S2.E9.m2.3.3.1.1" xref="S2.E9.m2.3.3.1.1.cmml"><mi id="S2.E9.m2.3.3.1.1.3" xref="S2.E9.m2.3.3.1.1.3.cmml">γ</mi><mo lspace="0em" rspace="0em" id="S2.E9.m2.3.3.1.1.2" xref="S2.E9.m2.3.3.1.1.2.cmml">​</mo><mrow id="S2.E9.m2.3.3.1.1.1.1" xref="S2.E9.m2.3.3.1.1.1.2.cmml"><mo stretchy="false" id="S2.E9.m2.3.3.1.1.1.1.2" xref="S2.E9.m2.3.3.1.1.1.2.cmml">(</mo><msubsup id="S2.E9.m2.3.3.1.1.1.1.1" xref="S2.E9.m2.3.3.1.1.1.1.1.cmml"><mi id="S2.E9.m2.3.3.1.1.1.1.1.2.2" xref="S2.E9.m2.3.3.1.1.1.1.1.2.2.cmml">Y</mi><mi mathvariant="normal" id="S2.E9.m2.3.3.1.1.1.1.1.2.3" xref="S2.E9.m2.3.3.1.1.1.1.1.2.3.cmml">b</mi><mi id="S2.E9.m2.3.3.1.1.1.1.1.3" xref="S2.E9.m2.3.3.1.1.1.1.1.3.cmml">l</mi></msubsup><mo id="S2.E9.m2.3.3.1.1.1.1.3" xref="S2.E9.m2.3.3.1.1.1.2.cmml">,</mo><mi id="S2.E9.m2.1.1" xref="S2.E9.m2.1.1.cmml">t</mi><mo stretchy="false" id="S2.E9.m2.3.3.1.1.1.1.4" xref="S2.E9.m2.3.3.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E9.m2.4.4.2.3" xref="S2.E9.m2.4.4.2.3.cmml">+</mo><mrow id="S2.E9.m2.4.4.2.2" xref="S2.E9.m2.4.4.2.2.cmml"><mi id="S2.E9.m2.4.4.2.2.3" xref="S2.E9.m2.4.4.2.2.3.cmml">γ</mi><mo lspace="0em" rspace="0em" id="S2.E9.m2.4.4.2.2.2" xref="S2.E9.m2.4.4.2.2.2.cmml">​</mo><mrow id="S2.E9.m2.4.4.2.2.1.1" xref="S2.E9.m2.4.4.2.2.1.2.cmml"><mo stretchy="false" id="S2.E9.m2.4.4.2.2.1.1.2" xref="S2.E9.m2.4.4.2.2.1.2.cmml">(</mo><msubsup id="S2.E9.m2.4.4.2.2.1.1.1" xref="S2.E9.m2.4.4.2.2.1.1.1.cmml"><mi id="S2.E9.m2.4.4.2.2.1.1.1.2.2" xref="S2.E9.m2.4.4.2.2.1.1.1.2.2.cmml">Y</mi><mi mathvariant="normal" id="S2.E9.m2.4.4.2.2.1.1.1.2.3" xref="S2.E9.m2.4.4.2.2.1.1.1.2.3.cmml">n</mi><mi id="S2.E9.m2.4.4.2.2.1.1.1.3" xref="S2.E9.m2.4.4.2.2.1.1.1.3.cmml">l</mi></msubsup><mo id="S2.E9.m2.4.4.2.2.1.1.3" xref="S2.E9.m2.4.4.2.2.1.2.cmml">,</mo><mi id="S2.E9.m2.2.2" xref="S2.E9.m2.2.2.cmml">t</mi><mo stretchy="false" id="S2.E9.m2.4.4.2.2.1.1.4" xref="S2.E9.m2.4.4.2.2.1.2.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E9.m2.4b"><apply id="S2.E9.m2.4.4.cmml" xref="S2.E9.m2.4.4"><eq id="S2.E9.m2.4.4.3.cmml" xref="S2.E9.m2.4.4.3"></eq><csymbol cd="latexml" id="S2.E9.m2.4.4.4.cmml" xref="S2.E9.m2.4.4.4">absent</csymbol><apply id="S2.E9.m2.4.4.2.cmml" xref="S2.E9.m2.4.4.2"><plus id="S2.E9.m2.4.4.2.3.cmml" xref="S2.E9.m2.4.4.2.3"></plus><apply id="S2.E9.m2.3.3.1.1.cmml" xref="S2.E9.m2.3.3.1.1"><times id="S2.E9.m2.3.3.1.1.2.cmml" xref="S2.E9.m2.3.3.1.1.2"></times><ci id="S2.E9.m2.3.3.1.1.3.cmml" xref="S2.E9.m2.3.3.1.1.3">𝛾</ci><interval closure="open" id="S2.E9.m2.3.3.1.1.1.2.cmml" xref="S2.E9.m2.3.3.1.1.1.1"><apply id="S2.E9.m2.3.3.1.1.1.1.1.cmml" xref="S2.E9.m2.3.3.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E9.m2.3.3.1.1.1.1.1.1.cmml" xref="S2.E9.m2.3.3.1.1.1.1.1">superscript</csymbol><apply id="S2.E9.m2.3.3.1.1.1.1.1.2.cmml" xref="S2.E9.m2.3.3.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E9.m2.3.3.1.1.1.1.1.2.1.cmml" xref="S2.E9.m2.3.3.1.1.1.1.1">subscript</csymbol><ci id="S2.E9.m2.3.3.1.1.1.1.1.2.2.cmml" xref="S2.E9.m2.3.3.1.1.1.1.1.2.2">𝑌</ci><ci id="S2.E9.m2.3.3.1.1.1.1.1.2.3.cmml" xref="S2.E9.m2.3.3.1.1.1.1.1.2.3">b</ci></apply><ci id="S2.E9.m2.3.3.1.1.1.1.1.3.cmml" xref="S2.E9.m2.3.3.1.1.1.1.1.3">𝑙</ci></apply><ci id="S2.E9.m2.1.1.cmml" xref="S2.E9.m2.1.1">𝑡</ci></interval></apply><apply id="S2.E9.m2.4.4.2.2.cmml" xref="S2.E9.m2.4.4.2.2"><times id="S2.E9.m2.4.4.2.2.2.cmml" xref="S2.E9.m2.4.4.2.2.2"></times><ci id="S2.E9.m2.4.4.2.2.3.cmml" xref="S2.E9.m2.4.4.2.2.3">𝛾</ci><interval closure="open" id="S2.E9.m2.4.4.2.2.1.2.cmml" xref="S2.E9.m2.4.4.2.2.1.1"><apply id="S2.E9.m2.4.4.2.2.1.1.1.cmml" xref="S2.E9.m2.4.4.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.E9.m2.4.4.2.2.1.1.1.1.cmml" xref="S2.E9.m2.4.4.2.2.1.1.1">superscript</csymbol><apply id="S2.E9.m2.4.4.2.2.1.1.1.2.cmml" xref="S2.E9.m2.4.4.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.E9.m2.4.4.2.2.1.1.1.2.1.cmml" xref="S2.E9.m2.4.4.2.2.1.1.1">subscript</csymbol><ci id="S2.E9.m2.4.4.2.2.1.1.1.2.2.cmml" xref="S2.E9.m2.4.4.2.2.1.1.1.2.2">𝑌</ci><ci id="S2.E9.m2.4.4.2.2.1.1.1.2.3.cmml" xref="S2.E9.m2.4.4.2.2.1.1.1.2.3">n</ci></apply><ci id="S2.E9.m2.4.4.2.2.1.1.1.3.cmml" xref="S2.E9.m2.4.4.2.2.1.1.1.3">𝑙</ci></apply><ci id="S2.E9.m2.2.2.cmml" xref="S2.E9.m2.2.2">𝑡</ci></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E9.m2.4c">\displaystyle=\gamma(Y_{\mathrm{b}}^{l},t)+\gamma(Y_{\mathrm{n}}^{l},t)</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(9)</span></td>
</tr></tbody>
<tbody id="S2.Ex1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.Ex1.m1.2" class="ltx_Math" alttext="\displaystyle\gamma(Y_{\mathrm{b}}^{l},t)" display="inline"><semantics id="S2.Ex1.m1.2a"><mrow id="S2.Ex1.m1.2.2" xref="S2.Ex1.m1.2.2.cmml"><mi id="S2.Ex1.m1.2.2.3" xref="S2.Ex1.m1.2.2.3.cmml">γ</mi><mo lspace="0em" rspace="0em" id="S2.Ex1.m1.2.2.2" xref="S2.Ex1.m1.2.2.2.cmml">​</mo><mrow id="S2.Ex1.m1.2.2.1.1" xref="S2.Ex1.m1.2.2.1.2.cmml"><mo stretchy="false" id="S2.Ex1.m1.2.2.1.1.2" xref="S2.Ex1.m1.2.2.1.2.cmml">(</mo><msubsup id="S2.Ex1.m1.2.2.1.1.1" xref="S2.Ex1.m1.2.2.1.1.1.cmml"><mi id="S2.Ex1.m1.2.2.1.1.1.2.2" xref="S2.Ex1.m1.2.2.1.1.1.2.2.cmml">Y</mi><mi mathvariant="normal" id="S2.Ex1.m1.2.2.1.1.1.2.3" xref="S2.Ex1.m1.2.2.1.1.1.2.3.cmml">b</mi><mi id="S2.Ex1.m1.2.2.1.1.1.3" xref="S2.Ex1.m1.2.2.1.1.1.3.cmml">l</mi></msubsup><mo id="S2.Ex1.m1.2.2.1.1.3" xref="S2.Ex1.m1.2.2.1.2.cmml">,</mo><mi id="S2.Ex1.m1.1.1" xref="S2.Ex1.m1.1.1.cmml">t</mi><mo stretchy="false" id="S2.Ex1.m1.2.2.1.1.4" xref="S2.Ex1.m1.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex1.m1.2b"><apply id="S2.Ex1.m1.2.2.cmml" xref="S2.Ex1.m1.2.2"><times id="S2.Ex1.m1.2.2.2.cmml" xref="S2.Ex1.m1.2.2.2"></times><ci id="S2.Ex1.m1.2.2.3.cmml" xref="S2.Ex1.m1.2.2.3">𝛾</ci><interval closure="open" id="S2.Ex1.m1.2.2.1.2.cmml" xref="S2.Ex1.m1.2.2.1.1"><apply id="S2.Ex1.m1.2.2.1.1.1.cmml" xref="S2.Ex1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.Ex1.m1.2.2.1.1.1.1.cmml" xref="S2.Ex1.m1.2.2.1.1.1">superscript</csymbol><apply id="S2.Ex1.m1.2.2.1.1.1.2.cmml" xref="S2.Ex1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.Ex1.m1.2.2.1.1.1.2.1.cmml" xref="S2.Ex1.m1.2.2.1.1.1">subscript</csymbol><ci id="S2.Ex1.m1.2.2.1.1.1.2.2.cmml" xref="S2.Ex1.m1.2.2.1.1.1.2.2">𝑌</ci><ci id="S2.Ex1.m1.2.2.1.1.1.2.3.cmml" xref="S2.Ex1.m1.2.2.1.1.1.2.3">b</ci></apply><ci id="S2.Ex1.m1.2.2.1.1.1.3.cmml" xref="S2.Ex1.m1.2.2.1.1.1.3">𝑙</ci></apply><ci id="S2.Ex1.m1.1.1.cmml" xref="S2.Ex1.m1.1.1">𝑡</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex1.m1.2c">\displaystyle\gamma(Y_{\mathrm{b}}^{l},t)</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S2.Ex1.m2.3" class="ltx_Math" alttext="\displaystyle=\sum_{\mathcal{F}_{\mathrm{ctc}}(Z^{t})=Y^{l}:z_{t}=\phi}p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l}|H^{t-1})q(z_{t}|\mathbf{h}_{t})" display="inline"><semantics id="S2.Ex1.m2.3a"><mrow id="S2.Ex1.m2.3.3" xref="S2.Ex1.m2.3.3.cmml"><mi id="S2.Ex1.m2.3.3.4" xref="S2.Ex1.m2.3.3.4.cmml"></mi><mo id="S2.Ex1.m2.3.3.3" xref="S2.Ex1.m2.3.3.3.cmml">=</mo><mrow id="S2.Ex1.m2.3.3.2" xref="S2.Ex1.m2.3.3.2.cmml"><mstyle displaystyle="true" id="S2.Ex1.m2.3.3.2.3" xref="S2.Ex1.m2.3.3.2.3.cmml"><munder id="S2.Ex1.m2.3.3.2.3a" xref="S2.Ex1.m2.3.3.2.3.cmml"><mo movablelimits="false" id="S2.Ex1.m2.3.3.2.3.2" xref="S2.Ex1.m2.3.3.2.3.2.cmml">∑</mo><mrow id="S2.Ex1.m2.1.1.1" xref="S2.Ex1.m2.1.1.1.cmml"><mrow id="S2.Ex1.m2.1.1.1.1" xref="S2.Ex1.m2.1.1.1.1.cmml"><mrow id="S2.Ex1.m2.1.1.1.1.1" xref="S2.Ex1.m2.1.1.1.1.1.cmml"><msub id="S2.Ex1.m2.1.1.1.1.1.3" xref="S2.Ex1.m2.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.Ex1.m2.1.1.1.1.1.3.2" xref="S2.Ex1.m2.1.1.1.1.1.3.2.cmml">ℱ</mi><mi id="S2.Ex1.m2.1.1.1.1.1.3.3" xref="S2.Ex1.m2.1.1.1.1.1.3.3.cmml">ctc</mi></msub><mo lspace="0em" rspace="0em" id="S2.Ex1.m2.1.1.1.1.1.2" xref="S2.Ex1.m2.1.1.1.1.1.2.cmml">​</mo><mrow id="S2.Ex1.m2.1.1.1.1.1.1.1" xref="S2.Ex1.m2.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.Ex1.m2.1.1.1.1.1.1.1.2" xref="S2.Ex1.m2.1.1.1.1.1.1.1.1.cmml">(</mo><msup id="S2.Ex1.m2.1.1.1.1.1.1.1.1" xref="S2.Ex1.m2.1.1.1.1.1.1.1.1.cmml"><mi id="S2.Ex1.m2.1.1.1.1.1.1.1.1.2" xref="S2.Ex1.m2.1.1.1.1.1.1.1.1.2.cmml">Z</mi><mi id="S2.Ex1.m2.1.1.1.1.1.1.1.1.3" xref="S2.Ex1.m2.1.1.1.1.1.1.1.1.3.cmml">t</mi></msup><mo stretchy="false" id="S2.Ex1.m2.1.1.1.1.1.1.1.3" xref="S2.Ex1.m2.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.Ex1.m2.1.1.1.1.2" xref="S2.Ex1.m2.1.1.1.1.2.cmml">=</mo><msup id="S2.Ex1.m2.1.1.1.1.3" xref="S2.Ex1.m2.1.1.1.1.3.cmml"><mi id="S2.Ex1.m2.1.1.1.1.3.2" xref="S2.Ex1.m2.1.1.1.1.3.2.cmml">Y</mi><mi id="S2.Ex1.m2.1.1.1.1.3.3" xref="S2.Ex1.m2.1.1.1.1.3.3.cmml">l</mi></msup></mrow><mo lspace="0.278em" rspace="0.278em" id="S2.Ex1.m2.1.1.1.2" xref="S2.Ex1.m2.1.1.1.2.cmml">:</mo><mrow id="S2.Ex1.m2.1.1.1.3" xref="S2.Ex1.m2.1.1.1.3.cmml"><msub id="S2.Ex1.m2.1.1.1.3.2" xref="S2.Ex1.m2.1.1.1.3.2.cmml"><mi id="S2.Ex1.m2.1.1.1.3.2.2" xref="S2.Ex1.m2.1.1.1.3.2.2.cmml">z</mi><mi id="S2.Ex1.m2.1.1.1.3.2.3" xref="S2.Ex1.m2.1.1.1.3.2.3.cmml">t</mi></msub><mo id="S2.Ex1.m2.1.1.1.3.1" xref="S2.Ex1.m2.1.1.1.3.1.cmml">=</mo><mi id="S2.Ex1.m2.1.1.1.3.3" xref="S2.Ex1.m2.1.1.1.3.3.cmml">ϕ</mi></mrow></mrow></munder></mstyle><mrow id="S2.Ex1.m2.3.3.2.2" xref="S2.Ex1.m2.3.3.2.2.cmml"><msub id="S2.Ex1.m2.3.3.2.2.4" xref="S2.Ex1.m2.3.3.2.2.4.cmml"><mi id="S2.Ex1.m2.3.3.2.2.4.2" xref="S2.Ex1.m2.3.3.2.2.4.2.cmml">p</mi><mi id="S2.Ex1.m2.3.3.2.2.4.3" xref="S2.Ex1.m2.3.3.2.2.4.3.cmml">ctc</mi></msub><mo lspace="0em" rspace="0em" id="S2.Ex1.m2.3.3.2.2.3" xref="S2.Ex1.m2.3.3.2.2.3.cmml">​</mo><mrow id="S2.Ex1.m2.2.2.1.1.1.1" xref="S2.Ex1.m2.2.2.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.Ex1.m2.2.2.1.1.1.1.2" xref="S2.Ex1.m2.2.2.1.1.1.1.1.cmml">(</mo><mrow id="S2.Ex1.m2.2.2.1.1.1.1.1" xref="S2.Ex1.m2.2.2.1.1.1.1.1.cmml"><msubsup id="S2.Ex1.m2.2.2.1.1.1.1.1.2" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2.cmml"><mi id="S2.Ex1.m2.2.2.1.1.1.1.1.2.2.2" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2.2.2.cmml">Y</mi><mi id="S2.Ex1.m2.2.2.1.1.1.1.1.2.2.3" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2.2.3.cmml">ctc</mi><mi id="S2.Ex1.m2.2.2.1.1.1.1.1.2.3" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2.3.cmml">l</mi></msubsup><mo fence="false" id="S2.Ex1.m2.2.2.1.1.1.1.1.1" xref="S2.Ex1.m2.2.2.1.1.1.1.1.1.cmml">|</mo><msup id="S2.Ex1.m2.2.2.1.1.1.1.1.3" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.cmml"><mi id="S2.Ex1.m2.2.2.1.1.1.1.1.3.2" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.2.cmml">H</mi><mrow id="S2.Ex1.m2.2.2.1.1.1.1.1.3.3" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.cmml"><mi id="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.2" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.2.cmml">t</mi><mo id="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.1" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.1.cmml">−</mo><mn id="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.3" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.3.cmml">1</mn></mrow></msup></mrow><mo stretchy="false" id="S2.Ex1.m2.2.2.1.1.1.1.3" xref="S2.Ex1.m2.2.2.1.1.1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S2.Ex1.m2.3.3.2.2.3a" xref="S2.Ex1.m2.3.3.2.2.3.cmml">​</mo><mi id="S2.Ex1.m2.3.3.2.2.5" xref="S2.Ex1.m2.3.3.2.2.5.cmml">q</mi><mo lspace="0em" rspace="0em" id="S2.Ex1.m2.3.3.2.2.3b" xref="S2.Ex1.m2.3.3.2.2.3.cmml">​</mo><mrow id="S2.Ex1.m2.3.3.2.2.2.1" xref="S2.Ex1.m2.3.3.2.2.2.1.1.cmml"><mo stretchy="false" id="S2.Ex1.m2.3.3.2.2.2.1.2" xref="S2.Ex1.m2.3.3.2.2.2.1.1.cmml">(</mo><mrow id="S2.Ex1.m2.3.3.2.2.2.1.1" xref="S2.Ex1.m2.3.3.2.2.2.1.1.cmml"><msub id="S2.Ex1.m2.3.3.2.2.2.1.1.2" xref="S2.Ex1.m2.3.3.2.2.2.1.1.2.cmml"><mi id="S2.Ex1.m2.3.3.2.2.2.1.1.2.2" xref="S2.Ex1.m2.3.3.2.2.2.1.1.2.2.cmml">z</mi><mi id="S2.Ex1.m2.3.3.2.2.2.1.1.2.3" xref="S2.Ex1.m2.3.3.2.2.2.1.1.2.3.cmml">t</mi></msub><mo fence="false" id="S2.Ex1.m2.3.3.2.2.2.1.1.1" xref="S2.Ex1.m2.3.3.2.2.2.1.1.1.cmml">|</mo><msub id="S2.Ex1.m2.3.3.2.2.2.1.1.3" xref="S2.Ex1.m2.3.3.2.2.2.1.1.3.cmml"><mi id="S2.Ex1.m2.3.3.2.2.2.1.1.3.2" xref="S2.Ex1.m2.3.3.2.2.2.1.1.3.2.cmml">𝐡</mi><mi id="S2.Ex1.m2.3.3.2.2.2.1.1.3.3" xref="S2.Ex1.m2.3.3.2.2.2.1.1.3.3.cmml">t</mi></msub></mrow><mo stretchy="false" id="S2.Ex1.m2.3.3.2.2.2.1.3" xref="S2.Ex1.m2.3.3.2.2.2.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex1.m2.3b"><apply id="S2.Ex1.m2.3.3.cmml" xref="S2.Ex1.m2.3.3"><eq id="S2.Ex1.m2.3.3.3.cmml" xref="S2.Ex1.m2.3.3.3"></eq><csymbol cd="latexml" id="S2.Ex1.m2.3.3.4.cmml" xref="S2.Ex1.m2.3.3.4">absent</csymbol><apply id="S2.Ex1.m2.3.3.2.cmml" xref="S2.Ex1.m2.3.3.2"><apply id="S2.Ex1.m2.3.3.2.3.cmml" xref="S2.Ex1.m2.3.3.2.3"><csymbol cd="ambiguous" id="S2.Ex1.m2.3.3.2.3.1.cmml" xref="S2.Ex1.m2.3.3.2.3">subscript</csymbol><sum id="S2.Ex1.m2.3.3.2.3.2.cmml" xref="S2.Ex1.m2.3.3.2.3.2"></sum><apply id="S2.Ex1.m2.1.1.1.cmml" xref="S2.Ex1.m2.1.1.1"><ci id="S2.Ex1.m2.1.1.1.2.cmml" xref="S2.Ex1.m2.1.1.1.2">:</ci><apply id="S2.Ex1.m2.1.1.1.1.cmml" xref="S2.Ex1.m2.1.1.1.1"><eq id="S2.Ex1.m2.1.1.1.1.2.cmml" xref="S2.Ex1.m2.1.1.1.1.2"></eq><apply id="S2.Ex1.m2.1.1.1.1.1.cmml" xref="S2.Ex1.m2.1.1.1.1.1"><times id="S2.Ex1.m2.1.1.1.1.1.2.cmml" xref="S2.Ex1.m2.1.1.1.1.1.2"></times><apply id="S2.Ex1.m2.1.1.1.1.1.3.cmml" xref="S2.Ex1.m2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.Ex1.m2.1.1.1.1.1.3.1.cmml" xref="S2.Ex1.m2.1.1.1.1.1.3">subscript</csymbol><ci id="S2.Ex1.m2.1.1.1.1.1.3.2.cmml" xref="S2.Ex1.m2.1.1.1.1.1.3.2">ℱ</ci><ci id="S2.Ex1.m2.1.1.1.1.1.3.3.cmml" xref="S2.Ex1.m2.1.1.1.1.1.3.3">ctc</ci></apply><apply id="S2.Ex1.m2.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex1.m2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex1.m2.1.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex1.m2.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.Ex1.m2.1.1.1.1.1.1.1.1.2.cmml" xref="S2.Ex1.m2.1.1.1.1.1.1.1.1.2">𝑍</ci><ci id="S2.Ex1.m2.1.1.1.1.1.1.1.1.3.cmml" xref="S2.Ex1.m2.1.1.1.1.1.1.1.1.3">𝑡</ci></apply></apply><apply id="S2.Ex1.m2.1.1.1.1.3.cmml" xref="S2.Ex1.m2.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.Ex1.m2.1.1.1.1.3.1.cmml" xref="S2.Ex1.m2.1.1.1.1.3">superscript</csymbol><ci id="S2.Ex1.m2.1.1.1.1.3.2.cmml" xref="S2.Ex1.m2.1.1.1.1.3.2">𝑌</ci><ci id="S2.Ex1.m2.1.1.1.1.3.3.cmml" xref="S2.Ex1.m2.1.1.1.1.3.3">𝑙</ci></apply></apply><apply id="S2.Ex1.m2.1.1.1.3.cmml" xref="S2.Ex1.m2.1.1.1.3"><eq id="S2.Ex1.m2.1.1.1.3.1.cmml" xref="S2.Ex1.m2.1.1.1.3.1"></eq><apply id="S2.Ex1.m2.1.1.1.3.2.cmml" xref="S2.Ex1.m2.1.1.1.3.2"><csymbol cd="ambiguous" id="S2.Ex1.m2.1.1.1.3.2.1.cmml" xref="S2.Ex1.m2.1.1.1.3.2">subscript</csymbol><ci id="S2.Ex1.m2.1.1.1.3.2.2.cmml" xref="S2.Ex1.m2.1.1.1.3.2.2">𝑧</ci><ci id="S2.Ex1.m2.1.1.1.3.2.3.cmml" xref="S2.Ex1.m2.1.1.1.3.2.3">𝑡</ci></apply><ci id="S2.Ex1.m2.1.1.1.3.3.cmml" xref="S2.Ex1.m2.1.1.1.3.3">italic-ϕ</ci></apply></apply></apply><apply id="S2.Ex1.m2.3.3.2.2.cmml" xref="S2.Ex1.m2.3.3.2.2"><times id="S2.Ex1.m2.3.3.2.2.3.cmml" xref="S2.Ex1.m2.3.3.2.2.3"></times><apply id="S2.Ex1.m2.3.3.2.2.4.cmml" xref="S2.Ex1.m2.3.3.2.2.4"><csymbol cd="ambiguous" id="S2.Ex1.m2.3.3.2.2.4.1.cmml" xref="S2.Ex1.m2.3.3.2.2.4">subscript</csymbol><ci id="S2.Ex1.m2.3.3.2.2.4.2.cmml" xref="S2.Ex1.m2.3.3.2.2.4.2">𝑝</ci><ci id="S2.Ex1.m2.3.3.2.2.4.3.cmml" xref="S2.Ex1.m2.3.3.2.2.4.3">ctc</ci></apply><apply id="S2.Ex1.m2.2.2.1.1.1.1.1.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1"><csymbol cd="latexml" id="S2.Ex1.m2.2.2.1.1.1.1.1.1.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.1">conditional</csymbol><apply id="S2.Ex1.m2.2.2.1.1.1.1.1.2.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.Ex1.m2.2.2.1.1.1.1.1.2.1.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2">superscript</csymbol><apply id="S2.Ex1.m2.2.2.1.1.1.1.1.2.2.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.Ex1.m2.2.2.1.1.1.1.1.2.2.1.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2">subscript</csymbol><ci id="S2.Ex1.m2.2.2.1.1.1.1.1.2.2.2.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2.2.2">𝑌</ci><ci id="S2.Ex1.m2.2.2.1.1.1.1.1.2.2.3.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2.2.3">ctc</ci></apply><ci id="S2.Ex1.m2.2.2.1.1.1.1.1.2.3.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.2.3">𝑙</ci></apply><apply id="S2.Ex1.m2.2.2.1.1.1.1.1.3.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.Ex1.m2.2.2.1.1.1.1.1.3.1.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3">superscript</csymbol><ci id="S2.Ex1.m2.2.2.1.1.1.1.1.3.2.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.2">𝐻</ci><apply id="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.3"><minus id="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.1.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.1"></minus><ci id="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.2.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.2">𝑡</ci><cn type="integer" id="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.3.cmml" xref="S2.Ex1.m2.2.2.1.1.1.1.1.3.3.3">1</cn></apply></apply></apply><ci id="S2.Ex1.m2.3.3.2.2.5.cmml" xref="S2.Ex1.m2.3.3.2.2.5">𝑞</ci><apply id="S2.Ex1.m2.3.3.2.2.2.1.1.cmml" xref="S2.Ex1.m2.3.3.2.2.2.1"><csymbol cd="latexml" id="S2.Ex1.m2.3.3.2.2.2.1.1.1.cmml" xref="S2.Ex1.m2.3.3.2.2.2.1.1.1">conditional</csymbol><apply id="S2.Ex1.m2.3.3.2.2.2.1.1.2.cmml" xref="S2.Ex1.m2.3.3.2.2.2.1.1.2"><csymbol cd="ambiguous" id="S2.Ex1.m2.3.3.2.2.2.1.1.2.1.cmml" xref="S2.Ex1.m2.3.3.2.2.2.1.1.2">subscript</csymbol><ci id="S2.Ex1.m2.3.3.2.2.2.1.1.2.2.cmml" xref="S2.Ex1.m2.3.3.2.2.2.1.1.2.2">𝑧</ci><ci id="S2.Ex1.m2.3.3.2.2.2.1.1.2.3.cmml" xref="S2.Ex1.m2.3.3.2.2.2.1.1.2.3">𝑡</ci></apply><apply id="S2.Ex1.m2.3.3.2.2.2.1.1.3.cmml" xref="S2.Ex1.m2.3.3.2.2.2.1.1.3"><csymbol cd="ambiguous" id="S2.Ex1.m2.3.3.2.2.2.1.1.3.1.cmml" xref="S2.Ex1.m2.3.3.2.2.2.1.1.3">subscript</csymbol><ci id="S2.Ex1.m2.3.3.2.2.2.1.1.3.2.cmml" xref="S2.Ex1.m2.3.3.2.2.2.1.1.3.2">𝐡</ci><ci id="S2.Ex1.m2.3.3.2.2.2.1.1.3.3.cmml" xref="S2.Ex1.m2.3.3.2.2.2.1.1.3.3">𝑡</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex1.m2.3c">\displaystyle=\sum_{\mathcal{F}_{\mathrm{ctc}}(Z^{t})=Y^{l}:z_{t}=\phi}p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l}|H^{t-1})q(z_{t}|\mathbf{h}_{t})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="S2.Ex2"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.Ex2.m1.2" class="ltx_Math" alttext="\displaystyle\gamma(Y_{\mathrm{n}}^{l},t)" display="inline"><semantics id="S2.Ex2.m1.2a"><mrow id="S2.Ex2.m1.2.2" xref="S2.Ex2.m1.2.2.cmml"><mi id="S2.Ex2.m1.2.2.3" xref="S2.Ex2.m1.2.2.3.cmml">γ</mi><mo lspace="0em" rspace="0em" id="S2.Ex2.m1.2.2.2" xref="S2.Ex2.m1.2.2.2.cmml">​</mo><mrow id="S2.Ex2.m1.2.2.1.1" xref="S2.Ex2.m1.2.2.1.2.cmml"><mo stretchy="false" id="S2.Ex2.m1.2.2.1.1.2" xref="S2.Ex2.m1.2.2.1.2.cmml">(</mo><msubsup id="S2.Ex2.m1.2.2.1.1.1" xref="S2.Ex2.m1.2.2.1.1.1.cmml"><mi id="S2.Ex2.m1.2.2.1.1.1.2.2" xref="S2.Ex2.m1.2.2.1.1.1.2.2.cmml">Y</mi><mi mathvariant="normal" id="S2.Ex2.m1.2.2.1.1.1.2.3" xref="S2.Ex2.m1.2.2.1.1.1.2.3.cmml">n</mi><mi id="S2.Ex2.m1.2.2.1.1.1.3" xref="S2.Ex2.m1.2.2.1.1.1.3.cmml">l</mi></msubsup><mo id="S2.Ex2.m1.2.2.1.1.3" xref="S2.Ex2.m1.2.2.1.2.cmml">,</mo><mi id="S2.Ex2.m1.1.1" xref="S2.Ex2.m1.1.1.cmml">t</mi><mo stretchy="false" id="S2.Ex2.m1.2.2.1.1.4" xref="S2.Ex2.m1.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex2.m1.2b"><apply id="S2.Ex2.m1.2.2.cmml" xref="S2.Ex2.m1.2.2"><times id="S2.Ex2.m1.2.2.2.cmml" xref="S2.Ex2.m1.2.2.2"></times><ci id="S2.Ex2.m1.2.2.3.cmml" xref="S2.Ex2.m1.2.2.3">𝛾</ci><interval closure="open" id="S2.Ex2.m1.2.2.1.2.cmml" xref="S2.Ex2.m1.2.2.1.1"><apply id="S2.Ex2.m1.2.2.1.1.1.cmml" xref="S2.Ex2.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.Ex2.m1.2.2.1.1.1.1.cmml" xref="S2.Ex2.m1.2.2.1.1.1">superscript</csymbol><apply id="S2.Ex2.m1.2.2.1.1.1.2.cmml" xref="S2.Ex2.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.Ex2.m1.2.2.1.1.1.2.1.cmml" xref="S2.Ex2.m1.2.2.1.1.1">subscript</csymbol><ci id="S2.Ex2.m1.2.2.1.1.1.2.2.cmml" xref="S2.Ex2.m1.2.2.1.1.1.2.2">𝑌</ci><ci id="S2.Ex2.m1.2.2.1.1.1.2.3.cmml" xref="S2.Ex2.m1.2.2.1.1.1.2.3">n</ci></apply><ci id="S2.Ex2.m1.2.2.1.1.1.3.cmml" xref="S2.Ex2.m1.2.2.1.1.1.3">𝑙</ci></apply><ci id="S2.Ex2.m1.1.1.cmml" xref="S2.Ex2.m1.1.1">𝑡</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex2.m1.2c">\displaystyle\gamma(Y_{\mathrm{n}}^{l},t)</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S2.Ex2.m2.2" class="ltx_Math" alttext="\displaystyle=\sum_{\mathcal{F}_{\mathrm{ctc}}(Z^{t})=Y^{l}:z_{t}=y_{l}}p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l-1}|H^{t-1})q(z_{t}|\mathbf{h}_{t})." display="inline"><semantics id="S2.Ex2.m2.2a"><mrow id="S2.Ex2.m2.2.2.1" xref="S2.Ex2.m2.2.2.1.1.cmml"><mrow id="S2.Ex2.m2.2.2.1.1" xref="S2.Ex2.m2.2.2.1.1.cmml"><mi id="S2.Ex2.m2.2.2.1.1.4" xref="S2.Ex2.m2.2.2.1.1.4.cmml"></mi><mo id="S2.Ex2.m2.2.2.1.1.3" xref="S2.Ex2.m2.2.2.1.1.3.cmml">=</mo><mrow id="S2.Ex2.m2.2.2.1.1.2" xref="S2.Ex2.m2.2.2.1.1.2.cmml"><mstyle displaystyle="true" id="S2.Ex2.m2.2.2.1.1.2.3" xref="S2.Ex2.m2.2.2.1.1.2.3.cmml"><munder id="S2.Ex2.m2.2.2.1.1.2.3a" xref="S2.Ex2.m2.2.2.1.1.2.3.cmml"><mo movablelimits="false" id="S2.Ex2.m2.2.2.1.1.2.3.2" xref="S2.Ex2.m2.2.2.1.1.2.3.2.cmml">∑</mo><mrow id="S2.Ex2.m2.1.1.1" xref="S2.Ex2.m2.1.1.1.cmml"><mrow id="S2.Ex2.m2.1.1.1.1" xref="S2.Ex2.m2.1.1.1.1.cmml"><mrow id="S2.Ex2.m2.1.1.1.1.1" xref="S2.Ex2.m2.1.1.1.1.1.cmml"><msub id="S2.Ex2.m2.1.1.1.1.1.3" xref="S2.Ex2.m2.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.Ex2.m2.1.1.1.1.1.3.2" xref="S2.Ex2.m2.1.1.1.1.1.3.2.cmml">ℱ</mi><mi id="S2.Ex2.m2.1.1.1.1.1.3.3" xref="S2.Ex2.m2.1.1.1.1.1.3.3.cmml">ctc</mi></msub><mo lspace="0em" rspace="0em" id="S2.Ex2.m2.1.1.1.1.1.2" xref="S2.Ex2.m2.1.1.1.1.1.2.cmml">​</mo><mrow id="S2.Ex2.m2.1.1.1.1.1.1.1" xref="S2.Ex2.m2.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.Ex2.m2.1.1.1.1.1.1.1.2" xref="S2.Ex2.m2.1.1.1.1.1.1.1.1.cmml">(</mo><msup id="S2.Ex2.m2.1.1.1.1.1.1.1.1" xref="S2.Ex2.m2.1.1.1.1.1.1.1.1.cmml"><mi id="S2.Ex2.m2.1.1.1.1.1.1.1.1.2" xref="S2.Ex2.m2.1.1.1.1.1.1.1.1.2.cmml">Z</mi><mi id="S2.Ex2.m2.1.1.1.1.1.1.1.1.3" xref="S2.Ex2.m2.1.1.1.1.1.1.1.1.3.cmml">t</mi></msup><mo stretchy="false" id="S2.Ex2.m2.1.1.1.1.1.1.1.3" xref="S2.Ex2.m2.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.Ex2.m2.1.1.1.1.2" xref="S2.Ex2.m2.1.1.1.1.2.cmml">=</mo><msup id="S2.Ex2.m2.1.1.1.1.3" xref="S2.Ex2.m2.1.1.1.1.3.cmml"><mi id="S2.Ex2.m2.1.1.1.1.3.2" xref="S2.Ex2.m2.1.1.1.1.3.2.cmml">Y</mi><mi id="S2.Ex2.m2.1.1.1.1.3.3" xref="S2.Ex2.m2.1.1.1.1.3.3.cmml">l</mi></msup></mrow><mo lspace="0.278em" rspace="0.278em" id="S2.Ex2.m2.1.1.1.2" xref="S2.Ex2.m2.1.1.1.2.cmml">:</mo><mrow id="S2.Ex2.m2.1.1.1.3" xref="S2.Ex2.m2.1.1.1.3.cmml"><msub id="S2.Ex2.m2.1.1.1.3.2" xref="S2.Ex2.m2.1.1.1.3.2.cmml"><mi id="S2.Ex2.m2.1.1.1.3.2.2" xref="S2.Ex2.m2.1.1.1.3.2.2.cmml">z</mi><mi id="S2.Ex2.m2.1.1.1.3.2.3" xref="S2.Ex2.m2.1.1.1.3.2.3.cmml">t</mi></msub><mo id="S2.Ex2.m2.1.1.1.3.1" xref="S2.Ex2.m2.1.1.1.3.1.cmml">=</mo><msub id="S2.Ex2.m2.1.1.1.3.3" xref="S2.Ex2.m2.1.1.1.3.3.cmml"><mi id="S2.Ex2.m2.1.1.1.3.3.2" xref="S2.Ex2.m2.1.1.1.3.3.2.cmml">y</mi><mi id="S2.Ex2.m2.1.1.1.3.3.3" xref="S2.Ex2.m2.1.1.1.3.3.3.cmml">l</mi></msub></mrow></mrow></munder></mstyle><mrow id="S2.Ex2.m2.2.2.1.1.2.2" xref="S2.Ex2.m2.2.2.1.1.2.2.cmml"><msub id="S2.Ex2.m2.2.2.1.1.2.2.4" xref="S2.Ex2.m2.2.2.1.1.2.2.4.cmml"><mi id="S2.Ex2.m2.2.2.1.1.2.2.4.2" xref="S2.Ex2.m2.2.2.1.1.2.2.4.2.cmml">p</mi><mi id="S2.Ex2.m2.2.2.1.1.2.2.4.3" xref="S2.Ex2.m2.2.2.1.1.2.2.4.3.cmml">ctc</mi></msub><mo lspace="0em" rspace="0em" id="S2.Ex2.m2.2.2.1.1.2.2.3" xref="S2.Ex2.m2.2.2.1.1.2.2.3.cmml">​</mo><mrow id="S2.Ex2.m2.2.2.1.1.1.1.1.1" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.Ex2.m2.2.2.1.1.1.1.1.1.2" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.cmml"><msubsup id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.cmml"><mi id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.2.2" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.2.2.cmml">Y</mi><mi id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.2.3" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.2.3.cmml">ctc</mi><mrow id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.cmml"><mi id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.2" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.2.cmml">l</mi><mo id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.1" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.1.cmml">−</mo><mn id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.3" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.3.cmml">1</mn></mrow></msubsup><mo fence="false" id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.1" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.1.cmml">|</mo><msup id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.cmml"><mi id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.2" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.2.cmml">H</mi><mrow id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.cmml"><mi id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.2" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.2.cmml">t</mi><mo id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.1" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.1.cmml">−</mo><mn id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.3" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.3.cmml">1</mn></mrow></msup></mrow><mo stretchy="false" id="S2.Ex2.m2.2.2.1.1.1.1.1.1.3" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S2.Ex2.m2.2.2.1.1.2.2.3a" xref="S2.Ex2.m2.2.2.1.1.2.2.3.cmml">​</mo><mi id="S2.Ex2.m2.2.2.1.1.2.2.5" xref="S2.Ex2.m2.2.2.1.1.2.2.5.cmml">q</mi><mo lspace="0em" rspace="0em" id="S2.Ex2.m2.2.2.1.1.2.2.3b" xref="S2.Ex2.m2.2.2.1.1.2.2.3.cmml">​</mo><mrow id="S2.Ex2.m2.2.2.1.1.2.2.2.1" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.cmml"><mo stretchy="false" id="S2.Ex2.m2.2.2.1.1.2.2.2.1.2" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.cmml">(</mo><mrow id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.cmml"><msub id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.cmml"><mi id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.2" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.2.cmml">z</mi><mi id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.3" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.3.cmml">t</mi></msub><mo fence="false" id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.1" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.1.cmml">|</mo><msub id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.cmml"><mi id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.2" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.2.cmml">𝐡</mi><mi id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.3" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.3.cmml">t</mi></msub></mrow><mo stretchy="false" id="S2.Ex2.m2.2.2.1.1.2.2.2.1.3" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo lspace="0em" id="S2.Ex2.m2.2.2.1.2" xref="S2.Ex2.m2.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex2.m2.2b"><apply id="S2.Ex2.m2.2.2.1.1.cmml" xref="S2.Ex2.m2.2.2.1"><eq id="S2.Ex2.m2.2.2.1.1.3.cmml" xref="S2.Ex2.m2.2.2.1.1.3"></eq><csymbol cd="latexml" id="S2.Ex2.m2.2.2.1.1.4.cmml" xref="S2.Ex2.m2.2.2.1.1.4">absent</csymbol><apply id="S2.Ex2.m2.2.2.1.1.2.cmml" xref="S2.Ex2.m2.2.2.1.1.2"><apply id="S2.Ex2.m2.2.2.1.1.2.3.cmml" xref="S2.Ex2.m2.2.2.1.1.2.3"><csymbol cd="ambiguous" id="S2.Ex2.m2.2.2.1.1.2.3.1.cmml" xref="S2.Ex2.m2.2.2.1.1.2.3">subscript</csymbol><sum id="S2.Ex2.m2.2.2.1.1.2.3.2.cmml" xref="S2.Ex2.m2.2.2.1.1.2.3.2"></sum><apply id="S2.Ex2.m2.1.1.1.cmml" xref="S2.Ex2.m2.1.1.1"><ci id="S2.Ex2.m2.1.1.1.2.cmml" xref="S2.Ex2.m2.1.1.1.2">:</ci><apply id="S2.Ex2.m2.1.1.1.1.cmml" xref="S2.Ex2.m2.1.1.1.1"><eq id="S2.Ex2.m2.1.1.1.1.2.cmml" xref="S2.Ex2.m2.1.1.1.1.2"></eq><apply id="S2.Ex2.m2.1.1.1.1.1.cmml" xref="S2.Ex2.m2.1.1.1.1.1"><times id="S2.Ex2.m2.1.1.1.1.1.2.cmml" xref="S2.Ex2.m2.1.1.1.1.1.2"></times><apply id="S2.Ex2.m2.1.1.1.1.1.3.cmml" xref="S2.Ex2.m2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.Ex2.m2.1.1.1.1.1.3.1.cmml" xref="S2.Ex2.m2.1.1.1.1.1.3">subscript</csymbol><ci id="S2.Ex2.m2.1.1.1.1.1.3.2.cmml" xref="S2.Ex2.m2.1.1.1.1.1.3.2">ℱ</ci><ci id="S2.Ex2.m2.1.1.1.1.1.3.3.cmml" xref="S2.Ex2.m2.1.1.1.1.1.3.3">ctc</ci></apply><apply id="S2.Ex2.m2.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex2.m2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex2.m2.1.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex2.m2.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.Ex2.m2.1.1.1.1.1.1.1.1.2.cmml" xref="S2.Ex2.m2.1.1.1.1.1.1.1.1.2">𝑍</ci><ci id="S2.Ex2.m2.1.1.1.1.1.1.1.1.3.cmml" xref="S2.Ex2.m2.1.1.1.1.1.1.1.1.3">𝑡</ci></apply></apply><apply id="S2.Ex2.m2.1.1.1.1.3.cmml" xref="S2.Ex2.m2.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.Ex2.m2.1.1.1.1.3.1.cmml" xref="S2.Ex2.m2.1.1.1.1.3">superscript</csymbol><ci id="S2.Ex2.m2.1.1.1.1.3.2.cmml" xref="S2.Ex2.m2.1.1.1.1.3.2">𝑌</ci><ci id="S2.Ex2.m2.1.1.1.1.3.3.cmml" xref="S2.Ex2.m2.1.1.1.1.3.3">𝑙</ci></apply></apply><apply id="S2.Ex2.m2.1.1.1.3.cmml" xref="S2.Ex2.m2.1.1.1.3"><eq id="S2.Ex2.m2.1.1.1.3.1.cmml" xref="S2.Ex2.m2.1.1.1.3.1"></eq><apply id="S2.Ex2.m2.1.1.1.3.2.cmml" xref="S2.Ex2.m2.1.1.1.3.2"><csymbol cd="ambiguous" id="S2.Ex2.m2.1.1.1.3.2.1.cmml" xref="S2.Ex2.m2.1.1.1.3.2">subscript</csymbol><ci id="S2.Ex2.m2.1.1.1.3.2.2.cmml" xref="S2.Ex2.m2.1.1.1.3.2.2">𝑧</ci><ci id="S2.Ex2.m2.1.1.1.3.2.3.cmml" xref="S2.Ex2.m2.1.1.1.3.2.3">𝑡</ci></apply><apply id="S2.Ex2.m2.1.1.1.3.3.cmml" xref="S2.Ex2.m2.1.1.1.3.3"><csymbol cd="ambiguous" id="S2.Ex2.m2.1.1.1.3.3.1.cmml" xref="S2.Ex2.m2.1.1.1.3.3">subscript</csymbol><ci id="S2.Ex2.m2.1.1.1.3.3.2.cmml" xref="S2.Ex2.m2.1.1.1.3.3.2">𝑦</ci><ci id="S2.Ex2.m2.1.1.1.3.3.3.cmml" xref="S2.Ex2.m2.1.1.1.3.3.3">𝑙</ci></apply></apply></apply></apply><apply id="S2.Ex2.m2.2.2.1.1.2.2.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2"><times id="S2.Ex2.m2.2.2.1.1.2.2.3.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.3"></times><apply id="S2.Ex2.m2.2.2.1.1.2.2.4.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.4"><csymbol cd="ambiguous" id="S2.Ex2.m2.2.2.1.1.2.2.4.1.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.4">subscript</csymbol><ci id="S2.Ex2.m2.2.2.1.1.2.2.4.2.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.4.2">𝑝</ci><ci id="S2.Ex2.m2.2.2.1.1.2.2.4.3.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.4.3">ctc</ci></apply><apply id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1"><csymbol cd="latexml" id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.1">conditional</csymbol><apply id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.1.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2">superscript</csymbol><apply id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.2.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.2.1.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.2.2.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.2.2">𝑌</ci><ci id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.2.3.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.2.3">ctc</ci></apply><apply id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3"><minus id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.1.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.1"></minus><ci id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.2.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.2">𝑙</ci><cn type="integer" id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.3.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.2.3.3">1</cn></apply></apply><apply id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.1.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3">superscript</csymbol><ci id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.2.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.2">𝐻</ci><apply id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3"><minus id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.1.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.1"></minus><ci id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.2.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.2">𝑡</ci><cn type="integer" id="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.3.cmml" xref="S2.Ex2.m2.2.2.1.1.1.1.1.1.1.3.3.3">1</cn></apply></apply></apply><ci id="S2.Ex2.m2.2.2.1.1.2.2.5.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.5">𝑞</ci><apply id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1"><csymbol cd="latexml" id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.1.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.1">conditional</csymbol><apply id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2"><csymbol cd="ambiguous" id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.1.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2">subscript</csymbol><ci id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.2.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.2">𝑧</ci><ci id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.3.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.2.3">𝑡</ci></apply><apply id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3"><csymbol cd="ambiguous" id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.1.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3">subscript</csymbol><ci id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.2.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.2">𝐡</ci><ci id="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.3.cmml" xref="S2.Ex2.m2.2.2.1.1.2.2.2.1.1.3.3">𝑡</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex2.m2.2c">\displaystyle=\sum_{\mathcal{F}_{\mathrm{ctc}}(Z^{t})=Y^{l}:z_{t}=y_{l}}p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l-1}|H^{t-1})q(z_{t}|\mathbf{h}_{t}).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S2.SS4.p2.18" class="ltx_p">The score fusion is done in a frame/label two-dimension grid, <math id="S2.SS4.p2.16.m1.2" class="ltx_Math" alttext="(t,i)" display="inline"><semantics id="S2.SS4.p2.16.m1.2a"><mrow id="S2.SS4.p2.16.m1.2.3.2" xref="S2.SS4.p2.16.m1.2.3.1.cmml"><mo stretchy="false" id="S2.SS4.p2.16.m1.2.3.2.1" xref="S2.SS4.p2.16.m1.2.3.1.cmml">(</mo><mi id="S2.SS4.p2.16.m1.1.1" xref="S2.SS4.p2.16.m1.1.1.cmml">t</mi><mo id="S2.SS4.p2.16.m1.2.3.2.2" xref="S2.SS4.p2.16.m1.2.3.1.cmml">,</mo><mi id="S2.SS4.p2.16.m1.2.2" xref="S2.SS4.p2.16.m1.2.2.cmml">i</mi><mo stretchy="false" id="S2.SS4.p2.16.m1.2.3.2.3" xref="S2.SS4.p2.16.m1.2.3.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.16.m1.2b"><interval closure="open" id="S2.SS4.p2.16.m1.2.3.1.cmml" xref="S2.SS4.p2.16.m1.2.3.2"><ci id="S2.SS4.p2.16.m1.1.1.cmml" xref="S2.SS4.p2.16.m1.1.1">𝑡</ci><ci id="S2.SS4.p2.16.m1.2.2.cmml" xref="S2.SS4.p2.16.m1.2.2">𝑖</ci></interval></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.16.m1.2c">(t,i)</annotation></semantics></math> based on log-likelihood of <math id="S2.SS4.p2.17.m2.1" class="ltx_Math" alttext="p_{\mathrm{dec}}(Y_{\mathrm{dec}}^{i})" display="inline"><semantics id="S2.SS4.p2.17.m2.1a"><mrow id="S2.SS4.p2.17.m2.1.1" xref="S2.SS4.p2.17.m2.1.1.cmml"><msub id="S2.SS4.p2.17.m2.1.1.3" xref="S2.SS4.p2.17.m2.1.1.3.cmml"><mi id="S2.SS4.p2.17.m2.1.1.3.2" xref="S2.SS4.p2.17.m2.1.1.3.2.cmml">p</mi><mi id="S2.SS4.p2.17.m2.1.1.3.3" xref="S2.SS4.p2.17.m2.1.1.3.3.cmml">dec</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS4.p2.17.m2.1.1.2" xref="S2.SS4.p2.17.m2.1.1.2.cmml">​</mo><mrow id="S2.SS4.p2.17.m2.1.1.1.1" xref="S2.SS4.p2.17.m2.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS4.p2.17.m2.1.1.1.1.2" xref="S2.SS4.p2.17.m2.1.1.1.1.1.cmml">(</mo><msubsup id="S2.SS4.p2.17.m2.1.1.1.1.1" xref="S2.SS4.p2.17.m2.1.1.1.1.1.cmml"><mi id="S2.SS4.p2.17.m2.1.1.1.1.1.2.2" xref="S2.SS4.p2.17.m2.1.1.1.1.1.2.2.cmml">Y</mi><mi id="S2.SS4.p2.17.m2.1.1.1.1.1.2.3" xref="S2.SS4.p2.17.m2.1.1.1.1.1.2.3.cmml">dec</mi><mi id="S2.SS4.p2.17.m2.1.1.1.1.1.3" xref="S2.SS4.p2.17.m2.1.1.1.1.1.3.cmml">i</mi></msubsup><mo stretchy="false" id="S2.SS4.p2.17.m2.1.1.1.1.3" xref="S2.SS4.p2.17.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.17.m2.1b"><apply id="S2.SS4.p2.17.m2.1.1.cmml" xref="S2.SS4.p2.17.m2.1.1"><times id="S2.SS4.p2.17.m2.1.1.2.cmml" xref="S2.SS4.p2.17.m2.1.1.2"></times><apply id="S2.SS4.p2.17.m2.1.1.3.cmml" xref="S2.SS4.p2.17.m2.1.1.3"><csymbol cd="ambiguous" id="S2.SS4.p2.17.m2.1.1.3.1.cmml" xref="S2.SS4.p2.17.m2.1.1.3">subscript</csymbol><ci id="S2.SS4.p2.17.m2.1.1.3.2.cmml" xref="S2.SS4.p2.17.m2.1.1.3.2">𝑝</ci><ci id="S2.SS4.p2.17.m2.1.1.3.3.cmml" xref="S2.SS4.p2.17.m2.1.1.3.3">dec</ci></apply><apply id="S2.SS4.p2.17.m2.1.1.1.1.1.cmml" xref="S2.SS4.p2.17.m2.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.17.m2.1.1.1.1.1.1.cmml" xref="S2.SS4.p2.17.m2.1.1.1.1">superscript</csymbol><apply id="S2.SS4.p2.17.m2.1.1.1.1.1.2.cmml" xref="S2.SS4.p2.17.m2.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.17.m2.1.1.1.1.1.2.1.cmml" xref="S2.SS4.p2.17.m2.1.1.1.1">subscript</csymbol><ci id="S2.SS4.p2.17.m2.1.1.1.1.1.2.2.cmml" xref="S2.SS4.p2.17.m2.1.1.1.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.17.m2.1.1.1.1.1.2.3.cmml" xref="S2.SS4.p2.17.m2.1.1.1.1.1.2.3">dec</ci></apply><ci id="S2.SS4.p2.17.m2.1.1.1.1.1.3.cmml" xref="S2.SS4.p2.17.m2.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.17.m2.1c">p_{\mathrm{dec}}(Y_{\mathrm{dec}}^{i})</annotation></semantics></math> in Eq. (<a href="#S2.E2" title="In 2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>) and <math id="S2.SS4.p2.18.m3.2" class="ltx_Math" alttext="p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l},t)" display="inline"><semantics id="S2.SS4.p2.18.m3.2a"><mrow id="S2.SS4.p2.18.m3.2.2" xref="S2.SS4.p2.18.m3.2.2.cmml"><msub id="S2.SS4.p2.18.m3.2.2.3" xref="S2.SS4.p2.18.m3.2.2.3.cmml"><mi id="S2.SS4.p2.18.m3.2.2.3.2" xref="S2.SS4.p2.18.m3.2.2.3.2.cmml">p</mi><mi id="S2.SS4.p2.18.m3.2.2.3.3" xref="S2.SS4.p2.18.m3.2.2.3.3.cmml">ctc</mi></msub><mo lspace="0em" rspace="0em" id="S2.SS4.p2.18.m3.2.2.2" xref="S2.SS4.p2.18.m3.2.2.2.cmml">​</mo><mrow id="S2.SS4.p2.18.m3.2.2.1.1" xref="S2.SS4.p2.18.m3.2.2.1.2.cmml"><mo stretchy="false" id="S2.SS4.p2.18.m3.2.2.1.1.2" xref="S2.SS4.p2.18.m3.2.2.1.2.cmml">(</mo><msubsup id="S2.SS4.p2.18.m3.2.2.1.1.1" xref="S2.SS4.p2.18.m3.2.2.1.1.1.cmml"><mi id="S2.SS4.p2.18.m3.2.2.1.1.1.2.2" xref="S2.SS4.p2.18.m3.2.2.1.1.1.2.2.cmml">Y</mi><mi id="S2.SS4.p2.18.m3.2.2.1.1.1.2.3" xref="S2.SS4.p2.18.m3.2.2.1.1.1.2.3.cmml">ctc</mi><mi id="S2.SS4.p2.18.m3.2.2.1.1.1.3" xref="S2.SS4.p2.18.m3.2.2.1.1.1.3.cmml">l</mi></msubsup><mo id="S2.SS4.p2.18.m3.2.2.1.1.3" xref="S2.SS4.p2.18.m3.2.2.1.2.cmml">,</mo><mi id="S2.SS4.p2.18.m3.1.1" xref="S2.SS4.p2.18.m3.1.1.cmml">t</mi><mo stretchy="false" id="S2.SS4.p2.18.m3.2.2.1.1.4" xref="S2.SS4.p2.18.m3.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.18.m3.2b"><apply id="S2.SS4.p2.18.m3.2.2.cmml" xref="S2.SS4.p2.18.m3.2.2"><times id="S2.SS4.p2.18.m3.2.2.2.cmml" xref="S2.SS4.p2.18.m3.2.2.2"></times><apply id="S2.SS4.p2.18.m3.2.2.3.cmml" xref="S2.SS4.p2.18.m3.2.2.3"><csymbol cd="ambiguous" id="S2.SS4.p2.18.m3.2.2.3.1.cmml" xref="S2.SS4.p2.18.m3.2.2.3">subscript</csymbol><ci id="S2.SS4.p2.18.m3.2.2.3.2.cmml" xref="S2.SS4.p2.18.m3.2.2.3.2">𝑝</ci><ci id="S2.SS4.p2.18.m3.2.2.3.3.cmml" xref="S2.SS4.p2.18.m3.2.2.3.3">ctc</ci></apply><interval closure="open" id="S2.SS4.p2.18.m3.2.2.1.2.cmml" xref="S2.SS4.p2.18.m3.2.2.1.1"><apply id="S2.SS4.p2.18.m3.2.2.1.1.1.cmml" xref="S2.SS4.p2.18.m3.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.18.m3.2.2.1.1.1.1.cmml" xref="S2.SS4.p2.18.m3.2.2.1.1.1">superscript</csymbol><apply id="S2.SS4.p2.18.m3.2.2.1.1.1.2.cmml" xref="S2.SS4.p2.18.m3.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.18.m3.2.2.1.1.1.2.1.cmml" xref="S2.SS4.p2.18.m3.2.2.1.1.1">subscript</csymbol><ci id="S2.SS4.p2.18.m3.2.2.1.1.1.2.2.cmml" xref="S2.SS4.p2.18.m3.2.2.1.1.1.2.2">𝑌</ci><ci id="S2.SS4.p2.18.m3.2.2.1.1.1.2.3.cmml" xref="S2.SS4.p2.18.m3.2.2.1.1.1.2.3">ctc</ci></apply><ci id="S2.SS4.p2.18.m3.2.2.1.1.1.3.cmml" xref="S2.SS4.p2.18.m3.2.2.1.1.1.3">𝑙</ci></apply><ci id="S2.SS4.p2.18.m3.1.1.cmml" xref="S2.SS4.p2.18.m3.1.1">𝑡</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.18.m3.2c">p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l},t)</annotation></semantics></math> in Eq. (<a href="#S2.E9" title="In 2.4 Score fusion inference ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">9</span></a>), as</p>
<table id="S5.EGx10" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S2.E10"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S2.E10.m1.6" class="ltx_Math" alttext="\displaystyle s(Y^{l},t,i)=\lambda_{\mathrm{ctc}}\log(p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l},t))+\lambda_{\mathrm{dec}}\log(p_{\mathrm{dec}}(Y_{\mathrm{dec}}^{i}))," display="inline"><semantics id="S2.E10.m1.6a"><mrow id="S2.E10.m1.6.6.1" xref="S2.E10.m1.6.6.1.1.cmml"><mrow id="S2.E10.m1.6.6.1.1" xref="S2.E10.m1.6.6.1.1.cmml"><mrow id="S2.E10.m1.6.6.1.1.1" xref="S2.E10.m1.6.6.1.1.1.cmml"><mi id="S2.E10.m1.6.6.1.1.1.3" xref="S2.E10.m1.6.6.1.1.1.3.cmml">s</mi><mo lspace="0em" rspace="0em" id="S2.E10.m1.6.6.1.1.1.2" xref="S2.E10.m1.6.6.1.1.1.2.cmml">​</mo><mrow id="S2.E10.m1.6.6.1.1.1.1.1" xref="S2.E10.m1.6.6.1.1.1.1.2.cmml"><mo stretchy="false" id="S2.E10.m1.6.6.1.1.1.1.1.2" xref="S2.E10.m1.6.6.1.1.1.1.2.cmml">(</mo><msup id="S2.E10.m1.6.6.1.1.1.1.1.1" xref="S2.E10.m1.6.6.1.1.1.1.1.1.cmml"><mi id="S2.E10.m1.6.6.1.1.1.1.1.1.2" xref="S2.E10.m1.6.6.1.1.1.1.1.1.2.cmml">Y</mi><mi id="S2.E10.m1.6.6.1.1.1.1.1.1.3" xref="S2.E10.m1.6.6.1.1.1.1.1.1.3.cmml">l</mi></msup><mo id="S2.E10.m1.6.6.1.1.1.1.1.3" xref="S2.E10.m1.6.6.1.1.1.1.2.cmml">,</mo><mi id="S2.E10.m1.1.1" xref="S2.E10.m1.1.1.cmml">t</mi><mo id="S2.E10.m1.6.6.1.1.1.1.1.4" xref="S2.E10.m1.6.6.1.1.1.1.2.cmml">,</mo><mi id="S2.E10.m1.2.2" xref="S2.E10.m1.2.2.cmml">i</mi><mo stretchy="false" id="S2.E10.m1.6.6.1.1.1.1.1.5" xref="S2.E10.m1.6.6.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E10.m1.6.6.1.1.4" xref="S2.E10.m1.6.6.1.1.4.cmml">=</mo><mrow id="S2.E10.m1.6.6.1.1.3" xref="S2.E10.m1.6.6.1.1.3.cmml"><mrow id="S2.E10.m1.6.6.1.1.2.1" xref="S2.E10.m1.6.6.1.1.2.1.cmml"><msub id="S2.E10.m1.6.6.1.1.2.1.3" xref="S2.E10.m1.6.6.1.1.2.1.3.cmml"><mi id="S2.E10.m1.6.6.1.1.2.1.3.2" xref="S2.E10.m1.6.6.1.1.2.1.3.2.cmml">λ</mi><mi id="S2.E10.m1.6.6.1.1.2.1.3.3" xref="S2.E10.m1.6.6.1.1.2.1.3.3.cmml">ctc</mi></msub><mo lspace="0.167em" rspace="0em" id="S2.E10.m1.6.6.1.1.2.1.2" xref="S2.E10.m1.6.6.1.1.2.1.2.cmml">​</mo><mrow id="S2.E10.m1.6.6.1.1.2.1.1.1" xref="S2.E10.m1.6.6.1.1.2.1.1.2.cmml"><mi id="S2.E10.m1.4.4" xref="S2.E10.m1.4.4.cmml">log</mi><mo id="S2.E10.m1.6.6.1.1.2.1.1.1a" xref="S2.E10.m1.6.6.1.1.2.1.1.2.cmml">⁡</mo><mrow id="S2.E10.m1.6.6.1.1.2.1.1.1.1" xref="S2.E10.m1.6.6.1.1.2.1.1.2.cmml"><mo stretchy="false" id="S2.E10.m1.6.6.1.1.2.1.1.1.1.2" xref="S2.E10.m1.6.6.1.1.2.1.1.2.cmml">(</mo><mrow id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.cmml"><msub id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.cmml"><mi id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.2" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.2.cmml">p</mi><mi id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.3" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.3.cmml">ctc</mi></msub><mo lspace="0em" rspace="0em" id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.2" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.2.cmml">​</mo><mrow id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.2" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.2.cmml">(</mo><msubsup id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.2.2" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.2.2.cmml">Y</mi><mi id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.2.3" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.2.3.cmml">ctc</mi><mi id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.3" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.3.cmml">l</mi></msubsup><mo id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.3" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.2.cmml">,</mo><mi id="S2.E10.m1.3.3" xref="S2.E10.m1.3.3.cmml">t</mi><mo stretchy="false" id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.4" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo stretchy="false" id="S2.E10.m1.6.6.1.1.2.1.1.1.1.3" xref="S2.E10.m1.6.6.1.1.2.1.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S2.E10.m1.6.6.1.1.3.3" xref="S2.E10.m1.6.6.1.1.3.3.cmml">+</mo><mrow id="S2.E10.m1.6.6.1.1.3.2" xref="S2.E10.m1.6.6.1.1.3.2.cmml"><msub id="S2.E10.m1.6.6.1.1.3.2.3" xref="S2.E10.m1.6.6.1.1.3.2.3.cmml"><mi id="S2.E10.m1.6.6.1.1.3.2.3.2" xref="S2.E10.m1.6.6.1.1.3.2.3.2.cmml">λ</mi><mi id="S2.E10.m1.6.6.1.1.3.2.3.3" xref="S2.E10.m1.6.6.1.1.3.2.3.3.cmml">dec</mi></msub><mo lspace="0.167em" rspace="0em" id="S2.E10.m1.6.6.1.1.3.2.2" xref="S2.E10.m1.6.6.1.1.3.2.2.cmml">​</mo><mrow id="S2.E10.m1.6.6.1.1.3.2.1.1" xref="S2.E10.m1.6.6.1.1.3.2.1.2.cmml"><mi id="S2.E10.m1.5.5" xref="S2.E10.m1.5.5.cmml">log</mi><mo id="S2.E10.m1.6.6.1.1.3.2.1.1a" xref="S2.E10.m1.6.6.1.1.3.2.1.2.cmml">⁡</mo><mrow id="S2.E10.m1.6.6.1.1.3.2.1.1.1" xref="S2.E10.m1.6.6.1.1.3.2.1.2.cmml"><mo stretchy="false" id="S2.E10.m1.6.6.1.1.3.2.1.1.1.2" xref="S2.E10.m1.6.6.1.1.3.2.1.2.cmml">(</mo><mrow id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.cmml"><msub id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.cmml"><mi id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.2" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.2.cmml">p</mi><mi id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.3" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.3.cmml">dec</mi></msub><mo lspace="0em" rspace="0em" id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.2" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.2.cmml">​</mo><mrow id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.2" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.cmml">(</mo><msubsup id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.cmml"><mi id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.2.2" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.2.2.cmml">Y</mi><mi id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.2.3" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.2.3.cmml">dec</mi><mi id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.3" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.3.cmml">i</mi></msubsup><mo stretchy="false" id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.3" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="S2.E10.m1.6.6.1.1.3.2.1.1.1.3" xref="S2.E10.m1.6.6.1.1.3.2.1.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="S2.E10.m1.6.6.1.2" xref="S2.E10.m1.6.6.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E10.m1.6b"><apply id="S2.E10.m1.6.6.1.1.cmml" xref="S2.E10.m1.6.6.1"><eq id="S2.E10.m1.6.6.1.1.4.cmml" xref="S2.E10.m1.6.6.1.1.4"></eq><apply id="S2.E10.m1.6.6.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.1"><times id="S2.E10.m1.6.6.1.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.1.2"></times><ci id="S2.E10.m1.6.6.1.1.1.3.cmml" xref="S2.E10.m1.6.6.1.1.1.3">𝑠</ci><vector id="S2.E10.m1.6.6.1.1.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.1.1.1"><apply id="S2.E10.m1.6.6.1.1.1.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E10.m1.6.6.1.1.1.1.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.1.1.1.1">superscript</csymbol><ci id="S2.E10.m1.6.6.1.1.1.1.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.1.1.1.1.2">𝑌</ci><ci id="S2.E10.m1.6.6.1.1.1.1.1.1.3.cmml" xref="S2.E10.m1.6.6.1.1.1.1.1.1.3">𝑙</ci></apply><ci id="S2.E10.m1.1.1.cmml" xref="S2.E10.m1.1.1">𝑡</ci><ci id="S2.E10.m1.2.2.cmml" xref="S2.E10.m1.2.2">𝑖</ci></vector></apply><apply id="S2.E10.m1.6.6.1.1.3.cmml" xref="S2.E10.m1.6.6.1.1.3"><plus id="S2.E10.m1.6.6.1.1.3.3.cmml" xref="S2.E10.m1.6.6.1.1.3.3"></plus><apply id="S2.E10.m1.6.6.1.1.2.1.cmml" xref="S2.E10.m1.6.6.1.1.2.1"><times id="S2.E10.m1.6.6.1.1.2.1.2.cmml" xref="S2.E10.m1.6.6.1.1.2.1.2"></times><apply id="S2.E10.m1.6.6.1.1.2.1.3.cmml" xref="S2.E10.m1.6.6.1.1.2.1.3"><csymbol cd="ambiguous" id="S2.E10.m1.6.6.1.1.2.1.3.1.cmml" xref="S2.E10.m1.6.6.1.1.2.1.3">subscript</csymbol><ci id="S2.E10.m1.6.6.1.1.2.1.3.2.cmml" xref="S2.E10.m1.6.6.1.1.2.1.3.2">𝜆</ci><ci id="S2.E10.m1.6.6.1.1.2.1.3.3.cmml" xref="S2.E10.m1.6.6.1.1.2.1.3.3">ctc</ci></apply><apply id="S2.E10.m1.6.6.1.1.2.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1"><log id="S2.E10.m1.4.4.cmml" xref="S2.E10.m1.4.4"></log><apply id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1"><times id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.2"></times><apply id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.1.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3">subscript</csymbol><ci id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.2.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.2">𝑝</ci><ci id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.3.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.3.3">ctc</ci></apply><interval closure="open" id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1"><apply id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.2.1.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.2.2.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.2.2">𝑌</ci><ci id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.2.3.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.2.3">ctc</ci></apply><ci id="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E10.m1.6.6.1.1.2.1.1.1.1.1.1.1.1.3">𝑙</ci></apply><ci id="S2.E10.m1.3.3.cmml" xref="S2.E10.m1.3.3">𝑡</ci></interval></apply></apply></apply><apply id="S2.E10.m1.6.6.1.1.3.2.cmml" xref="S2.E10.m1.6.6.1.1.3.2"><times id="S2.E10.m1.6.6.1.1.3.2.2.cmml" xref="S2.E10.m1.6.6.1.1.3.2.2"></times><apply id="S2.E10.m1.6.6.1.1.3.2.3.cmml" xref="S2.E10.m1.6.6.1.1.3.2.3"><csymbol cd="ambiguous" id="S2.E10.m1.6.6.1.1.3.2.3.1.cmml" xref="S2.E10.m1.6.6.1.1.3.2.3">subscript</csymbol><ci id="S2.E10.m1.6.6.1.1.3.2.3.2.cmml" xref="S2.E10.m1.6.6.1.1.3.2.3.2">𝜆</ci><ci id="S2.E10.m1.6.6.1.1.3.2.3.3.cmml" xref="S2.E10.m1.6.6.1.1.3.2.3.3">dec</ci></apply><apply id="S2.E10.m1.6.6.1.1.3.2.1.2.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1"><log id="S2.E10.m1.5.5.cmml" xref="S2.E10.m1.5.5"></log><apply id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1"><times id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.2"></times><apply id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.1.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3">subscript</csymbol><ci id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.2.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.2">𝑝</ci><ci id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.3.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.3.3">dec</ci></apply><apply id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1">superscript</csymbol><apply id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.2.1.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.2.2.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.2.2">𝑌</ci><ci id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.2.3.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.2.3">dec</ci></apply><ci id="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.3.cmml" xref="S2.E10.m1.6.6.1.1.3.2.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E10.m1.6c">\displaystyle s(Y^{l},t,i)=\lambda_{\mathrm{ctc}}\log(p_{\mathrm{ctc}}(Y_{\mathrm{ctc}}^{l},t))+\lambda_{\mathrm{dec}}\log(p_{\mathrm{dec}}(Y_{\mathrm{dec}}^{i})),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(10)</span></td>
</tr></tbody>
</table>
<p id="S2.SS4.p2.19" class="ltx_p">where <math id="S2.SS4.p2.19.m1.1" class="ltx_Math" alttext="\lambda_{*}" display="inline"><semantics id="S2.SS4.p2.19.m1.1a"><msub id="S2.SS4.p2.19.m1.1.1" xref="S2.SS4.p2.19.m1.1.1.cmml"><mi id="S2.SS4.p2.19.m1.1.1.2" xref="S2.SS4.p2.19.m1.1.1.2.cmml">λ</mi><mo id="S2.SS4.p2.19.m1.1.1.3" xref="S2.SS4.p2.19.m1.1.1.3.cmml">∗</mo></msub><annotation-xml encoding="MathML-Content" id="S2.SS4.p2.19.m1.1b"><apply id="S2.SS4.p2.19.m1.1.1.cmml" xref="S2.SS4.p2.19.m1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p2.19.m1.1.1.1.cmml" xref="S2.SS4.p2.19.m1.1.1">subscript</csymbol><ci id="S2.SS4.p2.19.m1.1.1.2.cmml" xref="S2.SS4.p2.19.m1.1.1.2">𝜆</ci><times id="S2.SS4.p2.19.m1.1.1.3.cmml" xref="S2.SS4.p2.19.m1.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p2.19.m1.1c">\lambda_{*}</annotation></semantics></math> are fusion weights.
LMs and length penalty can also be combined while scoring the hypothesis as in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>.</p>
</div>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Training procedure</h2>

<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Fine-tuning models</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.3" class="ltx_p">Training all the parameters of the decoder-only architecture from scratch is not effective on a large scale according to our previous work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib29" title="" class="ltx_ref">29</a>]</cite>.
Therefore, we follow the fine-tuning strategies described in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib25" title="" class="ltx_ref">25</a>, <a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite> for the proposed streaming ASR model.
We first train the blockwise speech subnetwork with CTC based on <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite> and a decoder-only transformer LM individually.
Subsequently, we combine each module to perform fine-tuning.
In each training step, the CTC greedy output <math id="S3.SS1.p1.1.m1.1" class="ltx_Math" alttext="\hat{z}_{t}" display="inline"><semantics id="S3.SS1.p1.1.m1.1a"><msub id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml"><mover accent="true" id="S3.SS1.p1.1.m1.1.1.2" xref="S3.SS1.p1.1.m1.1.1.2.cmml"><mi id="S3.SS1.p1.1.m1.1.1.2.2" xref="S3.SS1.p1.1.m1.1.1.2.2.cmml">z</mi><mo id="S3.SS1.p1.1.m1.1.1.2.1" xref="S3.SS1.p1.1.m1.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS1.p1.1.m1.1.1.3" xref="S3.SS1.p1.1.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><apply id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">subscript</csymbol><apply id="S3.SS1.p1.1.m1.1.1.2.cmml" xref="S3.SS1.p1.1.m1.1.1.2"><ci id="S3.SS1.p1.1.m1.1.1.2.1.cmml" xref="S3.SS1.p1.1.m1.1.1.2.1">^</ci><ci id="S3.SS1.p1.1.m1.1.1.2.2.cmml" xref="S3.SS1.p1.1.m1.1.1.2.2">𝑧</ci></apply><ci id="S3.SS1.p1.1.m1.1.1.3.cmml" xref="S3.SS1.p1.1.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">\hat{z}_{t}</annotation></semantics></math> (Sec. <a href="#S2.SS3.SSS1" title="2.3.1 CTC prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.3.1</span></a>) is computed and the prompts <math id="S3.SS1.p1.2.m2.1" class="ltx_Math" alttext="U^{j\in b}" display="inline"><semantics id="S3.SS1.p1.2.m2.1a"><msup id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml"><mi id="S3.SS1.p1.2.m2.1.1.2" xref="S3.SS1.p1.2.m2.1.1.2.cmml">U</mi><mrow id="S3.SS1.p1.2.m2.1.1.3" xref="S3.SS1.p1.2.m2.1.1.3.cmml"><mi id="S3.SS1.p1.2.m2.1.1.3.2" xref="S3.SS1.p1.2.m2.1.1.3.2.cmml">j</mi><mo id="S3.SS1.p1.2.m2.1.1.3.1" xref="S3.SS1.p1.2.m2.1.1.3.1.cmml">∈</mo><mi id="S3.SS1.p1.2.m2.1.1.3.3" xref="S3.SS1.p1.2.m2.1.1.3.3.cmml">b</mi></mrow></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><apply id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">superscript</csymbol><ci id="S3.SS1.p1.2.m2.1.1.2.cmml" xref="S3.SS1.p1.2.m2.1.1.2">𝑈</ci><apply id="S3.SS1.p1.2.m2.1.1.3.cmml" xref="S3.SS1.p1.2.m2.1.1.3"><in id="S3.SS1.p1.2.m2.1.1.3.1.cmml" xref="S3.SS1.p1.2.m2.1.1.3.1"></in><ci id="S3.SS1.p1.2.m2.1.1.3.2.cmml" xref="S3.SS1.p1.2.m2.1.1.3.2">𝑗</ci><ci id="S3.SS1.p1.2.m2.1.1.3.3.cmml" xref="S3.SS1.p1.2.m2.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">U^{j\in b}</annotation></semantics></math> in Eq. (<a href="#S2.E8" title="In 2.3.2 Block context prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>) are generated on-the-fly for each block <math id="S3.SS1.p1.3.m3.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S3.SS1.p1.3.m3.1a"><mi id="S3.SS1.p1.3.m3.1.1" xref="S3.SS1.p1.3.m3.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.1b"><ci id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.1c">b</annotation></semantics></math>.
Using the prompts, the decoder is trained to minimize a cross entropy loss, and the parameters of the speech subnetwork are also updated.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Prompt masking in training</h3>

<section id="S3.SS2.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.1 </span>Full prompts</h4>

<div id="S3.SS2.SSS1.p1" class="ltx_para">
<p id="S3.SS2.SSS1.p1.5" class="ltx_p">For streaming inference, to estimate <math id="S3.SS2.SSS1.p1.1.m1.1" class="ltx_Math" alttext="y_{i}" display="inline"><semantics id="S3.SS2.SSS1.p1.1.m1.1a"><msub id="S3.SS2.SSS1.p1.1.m1.1.1" xref="S3.SS2.SSS1.p1.1.m1.1.1.cmml"><mi id="S3.SS2.SSS1.p1.1.m1.1.1.2" xref="S3.SS2.SSS1.p1.1.m1.1.1.2.cmml">y</mi><mi id="S3.SS2.SSS1.p1.1.m1.1.1.3" xref="S3.SS2.SSS1.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.1.m1.1b"><apply id="S3.SS2.SSS1.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.1.m1.1.1.1.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.SSS1.p1.1.m1.1.1.2.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1.2">𝑦</ci><ci id="S3.SS2.SSS1.p1.1.m1.1.1.3.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.1.m1.1c">y_{i}</annotation></semantics></math> at <math id="S3.SS2.SSS1.p1.2.m2.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S3.SS2.SSS1.p1.2.m2.1a"><mi id="S3.SS2.SSS1.p1.2.m2.1.1" xref="S3.SS2.SSS1.p1.2.m2.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.2.m2.1b"><ci id="S3.SS2.SSS1.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS1.p1.2.m2.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.2.m2.1c">b</annotation></semantics></math>-th block, only a partial of prompts <math id="S3.SS2.SSS1.p1.3.m3.1" class="ltx_Math" alttext="U^{J_{b}}" display="inline"><semantics id="S3.SS2.SSS1.p1.3.m3.1a"><msup id="S3.SS2.SSS1.p1.3.m3.1.1" xref="S3.SS2.SSS1.p1.3.m3.1.1.cmml"><mi id="S3.SS2.SSS1.p1.3.m3.1.1.2" xref="S3.SS2.SSS1.p1.3.m3.1.1.2.cmml">U</mi><msub id="S3.SS2.SSS1.p1.3.m3.1.1.3" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.cmml"><mi id="S3.SS2.SSS1.p1.3.m3.1.1.3.2" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.2.cmml">J</mi><mi id="S3.SS2.SSS1.p1.3.m3.1.1.3.3" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.3.cmml">b</mi></msub></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.3.m3.1b"><apply id="S3.SS2.SSS1.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.3.m3.1.1.1.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1">superscript</csymbol><ci id="S3.SS2.SSS1.p1.3.m3.1.1.2.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.2">𝑈</ci><apply id="S3.SS2.SSS1.p1.3.m3.1.1.3.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.3.m3.1.1.3.1.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.3">subscript</csymbol><ci id="S3.SS2.SSS1.p1.3.m3.1.1.3.2.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.2">𝐽</ci><ci id="S3.SS2.SSS1.p1.3.m3.1.1.3.3.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.3.m3.1c">U^{J_{b}}</annotation></semantics></math> are provided.
However, it is not trivial to prepare partial transcription corresponding to the prompts without accurate forced alignment.
The naive training using the entire prompts <math id="S3.SS2.SSS1.p1.4.m4.1" class="ltx_Math" alttext="U^{J}" display="inline"><semantics id="S3.SS2.SSS1.p1.4.m4.1a"><msup id="S3.SS2.SSS1.p1.4.m4.1.1" xref="S3.SS2.SSS1.p1.4.m4.1.1.cmml"><mi id="S3.SS2.SSS1.p1.4.m4.1.1.2" xref="S3.SS2.SSS1.p1.4.m4.1.1.2.cmml">U</mi><mi id="S3.SS2.SSS1.p1.4.m4.1.1.3" xref="S3.SS2.SSS1.p1.4.m4.1.1.3.cmml">J</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.4.m4.1b"><apply id="S3.SS2.SSS1.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.4.m4.1.1.1.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1">superscript</csymbol><ci id="S3.SS2.SSS1.p1.4.m4.1.1.2.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1.2">𝑈</ci><ci id="S3.SS2.SSS1.p1.4.m4.1.1.3.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1.3">𝐽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.4.m4.1c">U^{J}</annotation></semantics></math> for the transcription <math id="S3.SS2.SSS1.p1.5.m5.1" class="ltx_Math" alttext="Y^{I}" display="inline"><semantics id="S3.SS2.SSS1.p1.5.m5.1a"><msup id="S3.SS2.SSS1.p1.5.m5.1.1" xref="S3.SS2.SSS1.p1.5.m5.1.1.cmml"><mi id="S3.SS2.SSS1.p1.5.m5.1.1.2" xref="S3.SS2.SSS1.p1.5.m5.1.1.2.cmml">Y</mi><mi id="S3.SS2.SSS1.p1.5.m5.1.1.3" xref="S3.SS2.SSS1.p1.5.m5.1.1.3.cmml">I</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.5.m5.1b"><apply id="S3.SS2.SSS1.p1.5.m5.1.1.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.5.m5.1.1.1.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1">superscript</csymbol><ci id="S3.SS2.SSS1.p1.5.m5.1.1.2.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1.2">𝑌</ci><ci id="S3.SS2.SSS1.p1.5.m5.1.1.3.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1.3">𝐼</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.5.m5.1c">Y^{I}</annotation></semantics></math> may cause training–inference mismatch, i.e., Eq. (<a href="#S2.E1" title="In 2.1 Decoder-only architecture for ASR ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>) is calculated in training while Eq. (<a href="#S2.E2" title="In 2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>) is calculated in the inference step.
Therefore, we propose two methods to mask out the prompts while training to mitigate the mismatch.
</p>
</div>
</section>
<section id="S3.SS2.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.2 </span>Forced alignment masking</h4>

<div id="S3.SS2.SSS2.p1" class="ltx_para">
<p id="S3.SS2.SSS2.p1.6" class="ltx_p">To strictly align <math id="S3.SS2.SSS2.p1.1.m1.1" class="ltx_Math" alttext="U^{J}" display="inline"><semantics id="S3.SS2.SSS2.p1.1.m1.1a"><msup id="S3.SS2.SSS2.p1.1.m1.1.1" xref="S3.SS2.SSS2.p1.1.m1.1.1.cmml"><mi id="S3.SS2.SSS2.p1.1.m1.1.1.2" xref="S3.SS2.SSS2.p1.1.m1.1.1.2.cmml">U</mi><mi id="S3.SS2.SSS2.p1.1.m1.1.1.3" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.cmml">J</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.1.m1.1b"><apply id="S3.SS2.SSS2.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.1.m1.1.1.1.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1">superscript</csymbol><ci id="S3.SS2.SSS2.p1.1.m1.1.1.2.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1.2">𝑈</ci><ci id="S3.SS2.SSS2.p1.1.m1.1.1.3.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1.3">𝐽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.1.m1.1c">U^{J}</annotation></semantics></math> and <math id="S3.SS2.SSS2.p1.2.m2.1" class="ltx_Math" alttext="Y^{I}" display="inline"><semantics id="S3.SS2.SSS2.p1.2.m2.1a"><msup id="S3.SS2.SSS2.p1.2.m2.1.1" xref="S3.SS2.SSS2.p1.2.m2.1.1.cmml"><mi id="S3.SS2.SSS2.p1.2.m2.1.1.2" xref="S3.SS2.SSS2.p1.2.m2.1.1.2.cmml">Y</mi><mi id="S3.SS2.SSS2.p1.2.m2.1.1.3" xref="S3.SS2.SSS2.p1.2.m2.1.1.3.cmml">I</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.2.m2.1b"><apply id="S3.SS2.SSS2.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.2.m2.1.1.1.cmml" xref="S3.SS2.SSS2.p1.2.m2.1.1">superscript</csymbol><ci id="S3.SS2.SSS2.p1.2.m2.1.1.2.cmml" xref="S3.SS2.SSS2.p1.2.m2.1.1.2">𝑌</ci><ci id="S3.SS2.SSS2.p1.2.m2.1.1.3.cmml" xref="S3.SS2.SSS2.p1.2.m2.1.1.3">𝐼</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.2.m2.1c">Y^{I}</annotation></semantics></math>, we propose using CTC forced alignment <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite> to mask out future information.
The forced alignment <math id="S3.SS2.SSS2.p1.3.m3.1" class="ltx_Math" alttext="a" display="inline"><semantics id="S3.SS2.SSS2.p1.3.m3.1a"><mi id="S3.SS2.SSS2.p1.3.m3.1.1" xref="S3.SS2.SSS2.p1.3.m3.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.3.m3.1b"><ci id="S3.SS2.SSS2.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS2.p1.3.m3.1.1">𝑎</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.3.m3.1c">a</annotation></semantics></math> aligns output index <math id="S3.SS2.SSS2.p1.4.m4.1" class="ltx_Math" alttext="i(a)" display="inline"><semantics id="S3.SS2.SSS2.p1.4.m4.1a"><mrow id="S3.SS2.SSS2.p1.4.m4.1.2" xref="S3.SS2.SSS2.p1.4.m4.1.2.cmml"><mi id="S3.SS2.SSS2.p1.4.m4.1.2.2" xref="S3.SS2.SSS2.p1.4.m4.1.2.2.cmml">i</mi><mo lspace="0em" rspace="0em" id="S3.SS2.SSS2.p1.4.m4.1.2.1" xref="S3.SS2.SSS2.p1.4.m4.1.2.1.cmml">​</mo><mrow id="S3.SS2.SSS2.p1.4.m4.1.2.3.2" xref="S3.SS2.SSS2.p1.4.m4.1.2.cmml"><mo stretchy="false" id="S3.SS2.SSS2.p1.4.m4.1.2.3.2.1" xref="S3.SS2.SSS2.p1.4.m4.1.2.cmml">(</mo><mi id="S3.SS2.SSS2.p1.4.m4.1.1" xref="S3.SS2.SSS2.p1.4.m4.1.1.cmml">a</mi><mo stretchy="false" id="S3.SS2.SSS2.p1.4.m4.1.2.3.2.2" xref="S3.SS2.SSS2.p1.4.m4.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.4.m4.1b"><apply id="S3.SS2.SSS2.p1.4.m4.1.2.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.2"><times id="S3.SS2.SSS2.p1.4.m4.1.2.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.2.1"></times><ci id="S3.SS2.SSS2.p1.4.m4.1.2.2.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.2.2">𝑖</ci><ci id="S3.SS2.SSS2.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1">𝑎</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.4.m4.1c">i(a)</annotation></semantics></math> with frame <math id="S3.SS2.SSS2.p1.5.m5.1" class="ltx_Math" alttext="\tau(a)" display="inline"><semantics id="S3.SS2.SSS2.p1.5.m5.1a"><mrow id="S3.SS2.SSS2.p1.5.m5.1.2" xref="S3.SS2.SSS2.p1.5.m5.1.2.cmml"><mi id="S3.SS2.SSS2.p1.5.m5.1.2.2" xref="S3.SS2.SSS2.p1.5.m5.1.2.2.cmml">τ</mi><mo lspace="0em" rspace="0em" id="S3.SS2.SSS2.p1.5.m5.1.2.1" xref="S3.SS2.SSS2.p1.5.m5.1.2.1.cmml">​</mo><mrow id="S3.SS2.SSS2.p1.5.m5.1.2.3.2" xref="S3.SS2.SSS2.p1.5.m5.1.2.cmml"><mo stretchy="false" id="S3.SS2.SSS2.p1.5.m5.1.2.3.2.1" xref="S3.SS2.SSS2.p1.5.m5.1.2.cmml">(</mo><mi id="S3.SS2.SSS2.p1.5.m5.1.1" xref="S3.SS2.SSS2.p1.5.m5.1.1.cmml">a</mi><mo stretchy="false" id="S3.SS2.SSS2.p1.5.m5.1.2.3.2.2" xref="S3.SS2.SSS2.p1.5.m5.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.5.m5.1b"><apply id="S3.SS2.SSS2.p1.5.m5.1.2.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.2"><times id="S3.SS2.SSS2.p1.5.m5.1.2.1.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.2.1"></times><ci id="S3.SS2.SSS2.p1.5.m5.1.2.2.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.2.2">𝜏</ci><ci id="S3.SS2.SSS2.p1.5.m5.1.1.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.1">𝑎</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.5.m5.1c">\tau(a)</annotation></semantics></math>.
When the decoder estimates <math id="S3.SS2.SSS2.p1.6.m6.1" class="ltx_Math" alttext="y_{i(a)}" display="inline"><semantics id="S3.SS2.SSS2.p1.6.m6.1a"><msub id="S3.SS2.SSS2.p1.6.m6.1.2" xref="S3.SS2.SSS2.p1.6.m6.1.2.cmml"><mi id="S3.SS2.SSS2.p1.6.m6.1.2.2" xref="S3.SS2.SSS2.p1.6.m6.1.2.2.cmml">y</mi><mrow id="S3.SS2.SSS2.p1.6.m6.1.1.1" xref="S3.SS2.SSS2.p1.6.m6.1.1.1.cmml"><mi id="S3.SS2.SSS2.p1.6.m6.1.1.1.3" xref="S3.SS2.SSS2.p1.6.m6.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S3.SS2.SSS2.p1.6.m6.1.1.1.2" xref="S3.SS2.SSS2.p1.6.m6.1.1.1.2.cmml">​</mo><mrow id="S3.SS2.SSS2.p1.6.m6.1.1.1.4.2" xref="S3.SS2.SSS2.p1.6.m6.1.1.1.cmml"><mo stretchy="false" id="S3.SS2.SSS2.p1.6.m6.1.1.1.4.2.1" xref="S3.SS2.SSS2.p1.6.m6.1.1.1.cmml">(</mo><mi id="S3.SS2.SSS2.p1.6.m6.1.1.1.1" xref="S3.SS2.SSS2.p1.6.m6.1.1.1.1.cmml">a</mi><mo stretchy="false" id="S3.SS2.SSS2.p1.6.m6.1.1.1.4.2.2" xref="S3.SS2.SSS2.p1.6.m6.1.1.1.cmml">)</mo></mrow></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.6.m6.1b"><apply id="S3.SS2.SSS2.p1.6.m6.1.2.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.2"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.6.m6.1.2.1.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.2">subscript</csymbol><ci id="S3.SS2.SSS2.p1.6.m6.1.2.2.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.2.2">𝑦</ci><apply id="S3.SS2.SSS2.p1.6.m6.1.1.1.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.1.1"><times id="S3.SS2.SSS2.p1.6.m6.1.1.1.2.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.1.1.2"></times><ci id="S3.SS2.SSS2.p1.6.m6.1.1.1.3.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.1.1.3">𝑖</ci><ci id="S3.SS2.SSS2.p1.6.m6.1.1.1.1.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.1.1.1">𝑎</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.6.m6.1c">y_{i(a)}</annotation></semantics></math>, we compute the corresponding prompts as follows.</p>
<table id="S5.EGx11" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S3.E11"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E11.m1.1" class="ltx_Math" alttext="\displaystyle U_{\mathrm{ctc}}^{y_{i(a)}}" display="inline"><semantics id="S3.E11.m1.1a"><msubsup id="S3.E11.m1.1.2" xref="S3.E11.m1.1.2.cmml"><mi id="S3.E11.m1.1.2.2.2" xref="S3.E11.m1.1.2.2.2.cmml">U</mi><mi id="S3.E11.m1.1.2.2.3" xref="S3.E11.m1.1.2.2.3.cmml">ctc</mi><msub id="S3.E11.m1.1.1.1" xref="S3.E11.m1.1.1.1.cmml"><mi id="S3.E11.m1.1.1.1.3" xref="S3.E11.m1.1.1.1.3.cmml">y</mi><mrow id="S3.E11.m1.1.1.1.1.1" xref="S3.E11.m1.1.1.1.1.1.cmml"><mi id="S3.E11.m1.1.1.1.1.1.3" xref="S3.E11.m1.1.1.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S3.E11.m1.1.1.1.1.1.2" xref="S3.E11.m1.1.1.1.1.1.2.cmml">​</mo><mrow id="S3.E11.m1.1.1.1.1.1.4.2" xref="S3.E11.m1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E11.m1.1.1.1.1.1.4.2.1" xref="S3.E11.m1.1.1.1.1.1.cmml">(</mo><mi id="S3.E11.m1.1.1.1.1.1.1" xref="S3.E11.m1.1.1.1.1.1.1.cmml">a</mi><mo stretchy="false" id="S3.E11.m1.1.1.1.1.1.4.2.2" xref="S3.E11.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msubsup><annotation-xml encoding="MathML-Content" id="S3.E11.m1.1b"><apply id="S3.E11.m1.1.2.cmml" xref="S3.E11.m1.1.2"><csymbol cd="ambiguous" id="S3.E11.m1.1.2.1.cmml" xref="S3.E11.m1.1.2">superscript</csymbol><apply id="S3.E11.m1.1.2.2.cmml" xref="S3.E11.m1.1.2"><csymbol cd="ambiguous" id="S3.E11.m1.1.2.2.1.cmml" xref="S3.E11.m1.1.2">subscript</csymbol><ci id="S3.E11.m1.1.2.2.2.cmml" xref="S3.E11.m1.1.2.2.2">𝑈</ci><ci id="S3.E11.m1.1.2.2.3.cmml" xref="S3.E11.m1.1.2.2.3">ctc</ci></apply><apply id="S3.E11.m1.1.1.1.cmml" xref="S3.E11.m1.1.1.1"><csymbol cd="ambiguous" id="S3.E11.m1.1.1.1.2.cmml" xref="S3.E11.m1.1.1.1">subscript</csymbol><ci id="S3.E11.m1.1.1.1.3.cmml" xref="S3.E11.m1.1.1.1.3">𝑦</ci><apply id="S3.E11.m1.1.1.1.1.1.cmml" xref="S3.E11.m1.1.1.1.1.1"><times id="S3.E11.m1.1.1.1.1.1.2.cmml" xref="S3.E11.m1.1.1.1.1.1.2"></times><ci id="S3.E11.m1.1.1.1.1.1.3.cmml" xref="S3.E11.m1.1.1.1.1.1.3">𝑖</ci><ci id="S3.E11.m1.1.1.1.1.1.1.cmml" xref="S3.E11.m1.1.1.1.1.1.1">𝑎</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E11.m1.1c">\displaystyle U_{\mathrm{ctc}}^{y_{i(a)}}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S3.E11.m2.1" class="ltx_math_unparsed" alttext="\displaystyle=\{\mathrm{MLP}_{\mathrm{ctc}}(\mathbf{h}_{t})|t:0&lt;t\leq\tau(a),\hat{z}_{t}\neq\phi\}" display="inline"><semantics id="S3.E11.m2.1a"><mrow id="S3.E11.m2.1b"><mo id="S3.E11.m2.1.2">=</mo><mrow id="S3.E11.m2.1.3"><mo stretchy="false" id="S3.E11.m2.1.3.1">{</mo><msub id="S3.E11.m2.1.3.2"><mi id="S3.E11.m2.1.3.2.2">MLP</mi><mi id="S3.E11.m2.1.3.2.3">ctc</mi></msub><mrow id="S3.E11.m2.1.3.3"><mo stretchy="false" id="S3.E11.m2.1.3.3.1">(</mo><msub id="S3.E11.m2.1.3.3.2"><mi id="S3.E11.m2.1.3.3.2.2">𝐡</mi><mi id="S3.E11.m2.1.3.3.2.3">t</mi></msub><mo stretchy="false" id="S3.E11.m2.1.3.3.3">)</mo></mrow><mo fence="false" rspace="0.167em" stretchy="false" id="S3.E11.m2.1.3.4">|</mo><mi id="S3.E11.m2.1.3.5">t</mi><mo lspace="0.278em" rspace="0.278em" id="S3.E11.m2.1.3.6">:</mo><mn id="S3.E11.m2.1.3.7">0</mn><mo id="S3.E11.m2.1.3.8">&lt;</mo><mi id="S3.E11.m2.1.3.9">t</mi><mo id="S3.E11.m2.1.3.10">≤</mo><mi id="S3.E11.m2.1.3.11">τ</mi><mrow id="S3.E11.m2.1.3.12"><mo stretchy="false" id="S3.E11.m2.1.3.12.1">(</mo><mi id="S3.E11.m2.1.1">a</mi><mo stretchy="false" id="S3.E11.m2.1.3.12.2">)</mo></mrow><mo id="S3.E11.m2.1.3.13">,</mo><msub id="S3.E11.m2.1.3.14"><mover accent="true" id="S3.E11.m2.1.3.14.2"><mi id="S3.E11.m2.1.3.14.2.2">z</mi><mo id="S3.E11.m2.1.3.14.2.1">^</mo></mover><mi id="S3.E11.m2.1.3.14.3">t</mi></msub><mo id="S3.E11.m2.1.3.15">≠</mo><mi id="S3.E11.m2.1.3.16">ϕ</mi><mo stretchy="false" id="S3.E11.m2.1.3.17">}</mo></mrow></mrow><annotation encoding="application/x-tex" id="S3.E11.m2.1c">\displaystyle=\{\mathrm{MLP}_{\mathrm{ctc}}(\mathbf{h}_{t})|t:0&lt;t\leq\tau(a),\hat{z}_{t}\neq\phi\}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(11)</span></td>
</tr></tbody>
<tbody id="S3.E12"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E12.m1.1" class="ltx_Math" alttext="\displaystyle U_{\mathrm{cxt}}^{y_{i(a)}}" display="inline"><semantics id="S3.E12.m1.1a"><msubsup id="S3.E12.m1.1.2" xref="S3.E12.m1.1.2.cmml"><mi id="S3.E12.m1.1.2.2.2" xref="S3.E12.m1.1.2.2.2.cmml">U</mi><mi id="S3.E12.m1.1.2.2.3" xref="S3.E12.m1.1.2.2.3.cmml">cxt</mi><msub id="S3.E12.m1.1.1.1" xref="S3.E12.m1.1.1.1.cmml"><mi id="S3.E12.m1.1.1.1.3" xref="S3.E12.m1.1.1.1.3.cmml">y</mi><mrow id="S3.E12.m1.1.1.1.1.1" xref="S3.E12.m1.1.1.1.1.1.cmml"><mi id="S3.E12.m1.1.1.1.1.1.3" xref="S3.E12.m1.1.1.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S3.E12.m1.1.1.1.1.1.2" xref="S3.E12.m1.1.1.1.1.1.2.cmml">​</mo><mrow id="S3.E12.m1.1.1.1.1.1.4.2" xref="S3.E12.m1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E12.m1.1.1.1.1.1.4.2.1" xref="S3.E12.m1.1.1.1.1.1.cmml">(</mo><mi id="S3.E12.m1.1.1.1.1.1.1" xref="S3.E12.m1.1.1.1.1.1.1.cmml">a</mi><mo stretchy="false" id="S3.E12.m1.1.1.1.1.1.4.2.2" xref="S3.E12.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msubsup><annotation-xml encoding="MathML-Content" id="S3.E12.m1.1b"><apply id="S3.E12.m1.1.2.cmml" xref="S3.E12.m1.1.2"><csymbol cd="ambiguous" id="S3.E12.m1.1.2.1.cmml" xref="S3.E12.m1.1.2">superscript</csymbol><apply id="S3.E12.m1.1.2.2.cmml" xref="S3.E12.m1.1.2"><csymbol cd="ambiguous" id="S3.E12.m1.1.2.2.1.cmml" xref="S3.E12.m1.1.2">subscript</csymbol><ci id="S3.E12.m1.1.2.2.2.cmml" xref="S3.E12.m1.1.2.2.2">𝑈</ci><ci id="S3.E12.m1.1.2.2.3.cmml" xref="S3.E12.m1.1.2.2.3">cxt</ci></apply><apply id="S3.E12.m1.1.1.1.cmml" xref="S3.E12.m1.1.1.1"><csymbol cd="ambiguous" id="S3.E12.m1.1.1.1.2.cmml" xref="S3.E12.m1.1.1.1">subscript</csymbol><ci id="S3.E12.m1.1.1.1.3.cmml" xref="S3.E12.m1.1.1.1.3">𝑦</ci><apply id="S3.E12.m1.1.1.1.1.1.cmml" xref="S3.E12.m1.1.1.1.1.1"><times id="S3.E12.m1.1.1.1.1.1.2.cmml" xref="S3.E12.m1.1.1.1.1.1.2"></times><ci id="S3.E12.m1.1.1.1.1.1.3.cmml" xref="S3.E12.m1.1.1.1.1.1.3">𝑖</ci><ci id="S3.E12.m1.1.1.1.1.1.1.cmml" xref="S3.E12.m1.1.1.1.1.1.1">𝑎</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E12.m1.1c">\displaystyle U_{\mathrm{cxt}}^{y_{i(a)}}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S3.E12.m2.5" class="ltx_Math" alttext="\displaystyle=\{\mathrm{MLP}_{\mathrm{cxt}}({\mathbf{c}}_{N,b})|b:\tau_{b-1}\leq\tau(a)\}" display="inline"><semantics id="S3.E12.m2.5a"><mrow id="S3.E12.m2.5.5" xref="S3.E12.m2.5.5.cmml"><mi id="S3.E12.m2.5.5.4" xref="S3.E12.m2.5.5.4.cmml"></mi><mo id="S3.E12.m2.5.5.3" xref="S3.E12.m2.5.5.3.cmml">=</mo><mrow id="S3.E12.m2.5.5.2.2" xref="S3.E12.m2.5.5.2.3.cmml"><mo stretchy="false" id="S3.E12.m2.5.5.2.2.3" xref="S3.E12.m2.5.5.2.3.1.cmml">{</mo><mrow id="S3.E12.m2.4.4.1.1.1" xref="S3.E12.m2.4.4.1.1.1.cmml"><msub id="S3.E12.m2.4.4.1.1.1.3" xref="S3.E12.m2.4.4.1.1.1.3.cmml"><mi id="S3.E12.m2.4.4.1.1.1.3.2" xref="S3.E12.m2.4.4.1.1.1.3.2.cmml">MLP</mi><mi id="S3.E12.m2.4.4.1.1.1.3.3" xref="S3.E12.m2.4.4.1.1.1.3.3.cmml">cxt</mi></msub><mo lspace="0em" rspace="0em" id="S3.E12.m2.4.4.1.1.1.2" xref="S3.E12.m2.4.4.1.1.1.2.cmml">​</mo><mrow id="S3.E12.m2.4.4.1.1.1.1.1" xref="S3.E12.m2.4.4.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E12.m2.4.4.1.1.1.1.1.2" xref="S3.E12.m2.4.4.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E12.m2.4.4.1.1.1.1.1.1" xref="S3.E12.m2.4.4.1.1.1.1.1.1.cmml"><mi id="S3.E12.m2.4.4.1.1.1.1.1.1.2" xref="S3.E12.m2.4.4.1.1.1.1.1.1.2.cmml">𝐜</mi><mrow id="S3.E12.m2.2.2.2.4" xref="S3.E12.m2.2.2.2.3.cmml"><mi id="S3.E12.m2.1.1.1.1" xref="S3.E12.m2.1.1.1.1.cmml">N</mi><mo id="S3.E12.m2.2.2.2.4.1" xref="S3.E12.m2.2.2.2.3.cmml">,</mo><mi id="S3.E12.m2.2.2.2.2" xref="S3.E12.m2.2.2.2.2.cmml">b</mi></mrow></msub><mo stretchy="false" id="S3.E12.m2.4.4.1.1.1.1.1.3" xref="S3.E12.m2.4.4.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo lspace="0em" rspace="0em" id="S3.E12.m2.5.5.2.2.4" xref="S3.E12.m2.5.5.2.3.1.cmml">|</mo><mrow id="S3.E12.m2.5.5.2.2.2" xref="S3.E12.m2.5.5.2.2.2.cmml"><mi id="S3.E12.m2.5.5.2.2.2.2" xref="S3.E12.m2.5.5.2.2.2.2.cmml">b</mi><mo lspace="0.278em" rspace="0.278em" id="S3.E12.m2.5.5.2.2.2.1" xref="S3.E12.m2.5.5.2.2.2.1.cmml">:</mo><mrow id="S3.E12.m2.5.5.2.2.2.3" xref="S3.E12.m2.5.5.2.2.2.3.cmml"><msub id="S3.E12.m2.5.5.2.2.2.3.2" xref="S3.E12.m2.5.5.2.2.2.3.2.cmml"><mi id="S3.E12.m2.5.5.2.2.2.3.2.2" xref="S3.E12.m2.5.5.2.2.2.3.2.2.cmml">τ</mi><mrow id="S3.E12.m2.5.5.2.2.2.3.2.3" xref="S3.E12.m2.5.5.2.2.2.3.2.3.cmml"><mi id="S3.E12.m2.5.5.2.2.2.3.2.3.2" xref="S3.E12.m2.5.5.2.2.2.3.2.3.2.cmml">b</mi><mo id="S3.E12.m2.5.5.2.2.2.3.2.3.1" xref="S3.E12.m2.5.5.2.2.2.3.2.3.1.cmml">−</mo><mn id="S3.E12.m2.5.5.2.2.2.3.2.3.3" xref="S3.E12.m2.5.5.2.2.2.3.2.3.3.cmml">1</mn></mrow></msub><mo id="S3.E12.m2.5.5.2.2.2.3.1" xref="S3.E12.m2.5.5.2.2.2.3.1.cmml">≤</mo><mrow id="S3.E12.m2.5.5.2.2.2.3.3" xref="S3.E12.m2.5.5.2.2.2.3.3.cmml"><mi id="S3.E12.m2.5.5.2.2.2.3.3.2" xref="S3.E12.m2.5.5.2.2.2.3.3.2.cmml">τ</mi><mo lspace="0em" rspace="0em" id="S3.E12.m2.5.5.2.2.2.3.3.1" xref="S3.E12.m2.5.5.2.2.2.3.3.1.cmml">​</mo><mrow id="S3.E12.m2.5.5.2.2.2.3.3.3.2" xref="S3.E12.m2.5.5.2.2.2.3.3.cmml"><mo stretchy="false" id="S3.E12.m2.5.5.2.2.2.3.3.3.2.1" xref="S3.E12.m2.5.5.2.2.2.3.3.cmml">(</mo><mi id="S3.E12.m2.3.3" xref="S3.E12.m2.3.3.cmml">a</mi><mo stretchy="false" id="S3.E12.m2.5.5.2.2.2.3.3.3.2.2" xref="S3.E12.m2.5.5.2.2.2.3.3.cmml">)</mo></mrow></mrow></mrow></mrow><mo stretchy="false" id="S3.E12.m2.5.5.2.2.5" xref="S3.E12.m2.5.5.2.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E12.m2.5b"><apply id="S3.E12.m2.5.5.cmml" xref="S3.E12.m2.5.5"><eq id="S3.E12.m2.5.5.3.cmml" xref="S3.E12.m2.5.5.3"></eq><csymbol cd="latexml" id="S3.E12.m2.5.5.4.cmml" xref="S3.E12.m2.5.5.4">absent</csymbol><apply id="S3.E12.m2.5.5.2.3.cmml" xref="S3.E12.m2.5.5.2.2"><csymbol cd="latexml" id="S3.E12.m2.5.5.2.3.1.cmml" xref="S3.E12.m2.5.5.2.2.3">conditional-set</csymbol><apply id="S3.E12.m2.4.4.1.1.1.cmml" xref="S3.E12.m2.4.4.1.1.1"><times id="S3.E12.m2.4.4.1.1.1.2.cmml" xref="S3.E12.m2.4.4.1.1.1.2"></times><apply id="S3.E12.m2.4.4.1.1.1.3.cmml" xref="S3.E12.m2.4.4.1.1.1.3"><csymbol cd="ambiguous" id="S3.E12.m2.4.4.1.1.1.3.1.cmml" xref="S3.E12.m2.4.4.1.1.1.3">subscript</csymbol><ci id="S3.E12.m2.4.4.1.1.1.3.2.cmml" xref="S3.E12.m2.4.4.1.1.1.3.2">MLP</ci><ci id="S3.E12.m2.4.4.1.1.1.3.3.cmml" xref="S3.E12.m2.4.4.1.1.1.3.3">cxt</ci></apply><apply id="S3.E12.m2.4.4.1.1.1.1.1.1.cmml" xref="S3.E12.m2.4.4.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E12.m2.4.4.1.1.1.1.1.1.1.cmml" xref="S3.E12.m2.4.4.1.1.1.1.1">subscript</csymbol><ci id="S3.E12.m2.4.4.1.1.1.1.1.1.2.cmml" xref="S3.E12.m2.4.4.1.1.1.1.1.1.2">𝐜</ci><list id="S3.E12.m2.2.2.2.3.cmml" xref="S3.E12.m2.2.2.2.4"><ci id="S3.E12.m2.1.1.1.1.cmml" xref="S3.E12.m2.1.1.1.1">𝑁</ci><ci id="S3.E12.m2.2.2.2.2.cmml" xref="S3.E12.m2.2.2.2.2">𝑏</ci></list></apply></apply><apply id="S3.E12.m2.5.5.2.2.2.cmml" xref="S3.E12.m2.5.5.2.2.2"><ci id="S3.E12.m2.5.5.2.2.2.1.cmml" xref="S3.E12.m2.5.5.2.2.2.1">:</ci><ci id="S3.E12.m2.5.5.2.2.2.2.cmml" xref="S3.E12.m2.5.5.2.2.2.2">𝑏</ci><apply id="S3.E12.m2.5.5.2.2.2.3.cmml" xref="S3.E12.m2.5.5.2.2.2.3"><leq id="S3.E12.m2.5.5.2.2.2.3.1.cmml" xref="S3.E12.m2.5.5.2.2.2.3.1"></leq><apply id="S3.E12.m2.5.5.2.2.2.3.2.cmml" xref="S3.E12.m2.5.5.2.2.2.3.2"><csymbol cd="ambiguous" id="S3.E12.m2.5.5.2.2.2.3.2.1.cmml" xref="S3.E12.m2.5.5.2.2.2.3.2">subscript</csymbol><ci id="S3.E12.m2.5.5.2.2.2.3.2.2.cmml" xref="S3.E12.m2.5.5.2.2.2.3.2.2">𝜏</ci><apply id="S3.E12.m2.5.5.2.2.2.3.2.3.cmml" xref="S3.E12.m2.5.5.2.2.2.3.2.3"><minus id="S3.E12.m2.5.5.2.2.2.3.2.3.1.cmml" xref="S3.E12.m2.5.5.2.2.2.3.2.3.1"></minus><ci id="S3.E12.m2.5.5.2.2.2.3.2.3.2.cmml" xref="S3.E12.m2.5.5.2.2.2.3.2.3.2">𝑏</ci><cn type="integer" id="S3.E12.m2.5.5.2.2.2.3.2.3.3.cmml" xref="S3.E12.m2.5.5.2.2.2.3.2.3.3">1</cn></apply></apply><apply id="S3.E12.m2.5.5.2.2.2.3.3.cmml" xref="S3.E12.m2.5.5.2.2.2.3.3"><times id="S3.E12.m2.5.5.2.2.2.3.3.1.cmml" xref="S3.E12.m2.5.5.2.2.2.3.3.1"></times><ci id="S3.E12.m2.5.5.2.2.2.3.3.2.cmml" xref="S3.E12.m2.5.5.2.2.2.3.3.2">𝜏</ci><ci id="S3.E12.m2.3.3.cmml" xref="S3.E12.m2.3.3">𝑎</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E12.m2.5c">\displaystyle=\{\mathrm{MLP}_{\mathrm{cxt}}({\mathbf{c}}_{N,b})|b:\tau_{b-1}\leq\tau(a)\}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(12)</span></td>
</tr></tbody>
</table>
<p id="S3.SS2.SSS2.p1.7" class="ltx_p">This calculation is efficiently done by manipulating the mask for self-attention computation.
The mask is created on-the-fly using CTC of the latest parameters.</p>
</div>
<figure id="S3.T1" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 1: </span>Performance comparison for streaming ASR trained with LibriSpeech.</figcaption>
<table id="S3.T1.1" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S3.T1.1.1.1" class="ltx_tr">
<th id="S3.T1.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t">Models</th>
<th id="S3.T1.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t"># of</th>
<th id="S3.T1.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">Training</th>
<th id="S3.T1.1.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="2">Batched WER</th>
<th id="S3.T1.1.1.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="2">Streaming WER</th>
<th id="S3.T1.1.1.1.6" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">RTF</th>
<th id="S3.T1.1.1.1.7" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t">Latency</th>
</tr>
<tr id="S3.T1.1.2.2" class="ltx_tr">
<th id="S3.T1.1.2.2.1" class="ltx_td ltx_th ltx_th_column ltx_border_r"></th>
<th id="S3.T1.1.2.2.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r">pram.</th>
<th id="S3.T1.1.2.2.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r">method</th>
<th id="S3.T1.1.2.2.4" class="ltx_td ltx_align_center ltx_th ltx_th_column">test-clean</th>
<th id="S3.T1.1.2.2.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r">test-other</th>
<th id="S3.T1.1.2.2.6" class="ltx_td ltx_align_center ltx_th ltx_th_column">test-clean</th>
<th id="S3.T1.1.2.2.7" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r">test-other</th>
<th id="S3.T1.1.2.2.8" class="ltx_td ltx_th ltx_th_column ltx_border_r"></th>
<th id="S3.T1.1.2.2.9" class="ltx_td ltx_align_center ltx_th ltx_th_column">EP50 (sec)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S3.T1.1.3.1" class="ltx_tr">
<td id="S3.T1.1.3.1.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">Baseline CTC <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>
</td>
<td id="S3.T1.1.3.1.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">41.5M</td>
<td id="S3.T1.1.3.1.3" class="ltx_td ltx_border_r ltx_border_tt"></td>
<td id="S3.T1.1.3.1.4" class="ltx_td ltx_align_center ltx_border_tt">3.9</td>
<td id="S3.T1.1.3.1.5" class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">
<span id="S3.T1.1.3.1.5.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>9.7</td>
<td id="S3.T1.1.3.1.6" class="ltx_td ltx_align_center ltx_border_tt">3.9</td>
<td id="S3.T1.1.3.1.7" class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">
<span id="S3.T1.1.3.1.7.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>9.7</td>
<td id="S3.T1.1.3.1.8" class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">0.07</td>
<td id="S3.T1.1.3.1.9" class="ltx_td ltx_align_center ltx_border_tt">0.09</td>
</tr>
<tr id="S3.T1.1.4.2" class="ltx_tr">
<td id="S3.T1.1.4.2.1" class="ltx_td ltx_align_left ltx_border_r">Baseline RNNT <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite>
</td>
<td id="S3.T1.1.4.2.2" class="ltx_td ltx_align_center ltx_border_r">43.5M</td>
<td id="S3.T1.1.4.2.3" class="ltx_td ltx_border_r"></td>
<td id="S3.T1.1.4.2.4" class="ltx_td ltx_align_center">3.5</td>
<td id="S3.T1.1.4.2.5" class="ltx_td ltx_align_center ltx_border_r">
<span id="S3.T1.1.4.2.5.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>9.5</td>
<td id="S3.T1.1.4.2.6" class="ltx_td ltx_align_center">3.5</td>
<td id="S3.T1.1.4.2.7" class="ltx_td ltx_align_center ltx_border_r">
<span id="S3.T1.1.4.2.7.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>9.5</td>
<td id="S3.T1.1.4.2.8" class="ltx_td ltx_align_center ltx_border_r">0.08</td>
<td id="S3.T1.1.4.2.9" class="ltx_td ltx_align_center">0.15</td>
</tr>
<tr id="S3.T1.1.5.3" class="ltx_tr">
<td id="S3.T1.1.5.3.1" class="ltx_td ltx_align_left ltx_border_r">Baseline EncDec <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>
</td>
<td id="S3.T1.1.5.3.2" class="ltx_td ltx_align_center ltx_border_r">53.0M</td>
<td id="S3.T1.1.5.3.3" class="ltx_td ltx_border_r"></td>
<td id="S3.T1.1.5.3.4" class="ltx_td ltx_align_center">3.5</td>
<td id="S3.T1.1.5.3.5" class="ltx_td ltx_align_center ltx_border_r">
<span id="S3.T1.1.5.3.5.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>8.4</td>
<td id="S3.T1.1.5.3.6" class="ltx_td ltx_align_center"><span id="S3.T1.1.5.3.6.1" class="ltx_text ltx_font_bold">3.2</span></td>
<td id="S3.T1.1.5.3.7" class="ltx_td ltx_align_center ltx_border_r">
<span id="S3.T1.1.5.3.7.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>8.6</td>
<td id="S3.T1.1.5.3.8" class="ltx_td ltx_align_center ltx_border_r">0.37</td>
<td id="S3.T1.1.5.3.9" class="ltx_td ltx_align_center">0.92</td>
</tr>
<tr id="S3.T1.1.6.4" class="ltx_tr">
<td id="S3.T1.1.6.4.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Decoder-only (proposed)</td>
<td id="S3.T1.1.6.4.2" class="ltx_td ltx_border_r ltx_border_t"></td>
<td id="S3.T1.1.6.4.3" class="ltx_td ltx_border_r ltx_border_t"></td>
<td id="S3.T1.1.6.4.4" class="ltx_td ltx_border_t"></td>
<td id="S3.T1.1.6.4.5" class="ltx_td ltx_border_r ltx_border_t"></td>
<td id="S3.T1.1.6.4.6" class="ltx_td ltx_border_t"></td>
<td id="S3.T1.1.6.4.7" class="ltx_td ltx_border_r ltx_border_t"></td>
<td id="S3.T1.1.6.4.8" class="ltx_td ltx_border_r ltx_border_t"></td>
<td id="S3.T1.1.6.4.9" class="ltx_td ltx_border_t"></td>
</tr>
<tr id="S3.T1.1.7.5" class="ltx_tr">
<td id="S3.T1.1.7.5.1" class="ltx_td ltx_align_left ltx_border_r">CTC prompts (Eq. (<a href="#S2.E6" title="In 2.3.1 CTC prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>))</td>
<td id="S3.T1.1.7.5.2" class="ltx_td ltx_align_center ltx_border_r">51.5M</td>
<td id="S3.T1.1.7.5.3" class="ltx_td ltx_align_center ltx_border_r">full prompt</td>
<td id="S3.T1.1.7.5.4" class="ltx_td ltx_align_center">3.3</td>
<td id="S3.T1.1.7.5.5" class="ltx_td ltx_align_center ltx_border_r">
<span id="S3.T1.1.7.5.5.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>8.7</td>
<td id="S3.T1.1.7.5.6" class="ltx_td ltx_align_center">3.5</td>
<td id="S3.T1.1.7.5.7" class="ltx_td ltx_align_center ltx_border_r">
<span id="S3.T1.1.7.5.7.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>9.0</td>
<td id="S3.T1.1.7.5.8" class="ltx_td ltx_align_center ltx_border_r">0.17</td>
<td id="S3.T1.1.7.5.9" class="ltx_td ltx_align_center">0.37</td>
</tr>
<tr id="S3.T1.1.8.6" class="ltx_tr">
<td id="S3.T1.1.8.6.1" class="ltx_td ltx_border_r"></td>
<td id="S3.T1.1.8.6.2" class="ltx_td ltx_border_r"></td>
<td id="S3.T1.1.8.6.3" class="ltx_td ltx_align_center ltx_border_r">forced align</td>
<td id="S3.T1.1.8.6.4" class="ltx_td ltx_align_center">7.8</td>
<td id="S3.T1.1.8.6.5" class="ltx_td ltx_align_center ltx_border_r">15.1</td>
<td id="S3.T1.1.8.6.6" class="ltx_td ltx_align_center">8.3</td>
<td id="S3.T1.1.8.6.7" class="ltx_td ltx_align_center ltx_border_r">14.7</td>
<td id="S3.T1.1.8.6.8" class="ltx_td ltx_align_center ltx_border_r">0.12</td>
<td id="S3.T1.1.8.6.9" class="ltx_td ltx_align_center">0.36</td>
</tr>
<tr id="S3.T1.1.9.7" class="ltx_tr">
<td id="S3.T1.1.9.7.1" class="ltx_td ltx_border_r"></td>
<td id="S3.T1.1.9.7.2" class="ltx_td ltx_border_r"></td>
<td id="S3.T1.1.9.7.3" class="ltx_td ltx_align_center ltx_border_r">prefix</td>
<td id="S3.T1.1.9.7.4" class="ltx_td ltx_align_center">3.5</td>
<td id="S3.T1.1.9.7.5" class="ltx_td ltx_align_center ltx_border_r">
<span id="S3.T1.1.9.7.5.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>8.2</td>
<td id="S3.T1.1.9.7.6" class="ltx_td ltx_align_center">3.6</td>
<td id="S3.T1.1.9.7.7" class="ltx_td ltx_align_center ltx_border_r">
<span id="S3.T1.1.9.7.7.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>8.0</td>
<td id="S3.T1.1.9.7.8" class="ltx_td ltx_align_center ltx_border_r">0.17</td>
<td id="S3.T1.1.9.7.9" class="ltx_td ltx_align_center">0.44</td>
</tr>
<tr id="S3.T1.1.10.8" class="ltx_tr">
<td id="S3.T1.1.10.8.1" class="ltx_td ltx_align_left ltx_border_r">Context prompts (Eq. (<a href="#S2.E7" title="In 2.3.2 Block context prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a>))</td>
<td id="S3.T1.1.10.8.2" class="ltx_td ltx_align_center ltx_border_r">51.5M</td>
<td id="S3.T1.1.10.8.3" class="ltx_td ltx_align_center ltx_border_r">prefix</td>
<td id="S3.T1.1.10.8.4" class="ltx_td ltx_align_center">4.2</td>
<td id="S3.T1.1.10.8.5" class="ltx_td ltx_align_center ltx_border_r">
<span id="S3.T1.1.10.8.5.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>9.0</td>
<td id="S3.T1.1.10.8.6" class="ltx_td ltx_align_center">3.8</td>
<td id="S3.T1.1.10.8.7" class="ltx_td ltx_align_center ltx_border_r">
<span id="S3.T1.1.10.8.7.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>9.0</td>
<td id="S3.T1.1.10.8.8" class="ltx_td ltx_align_center ltx_border_r">0.12</td>
<td id="S3.T1.1.10.8.9" class="ltx_td ltx_align_center">0.37</td>
</tr>
<tr id="S3.T1.1.11.9" class="ltx_tr">
<td id="S3.T1.1.11.9.1" class="ltx_td ltx_align_left ltx_border_b ltx_border_r">CTC+Context prompts (Eq. (<a href="#S2.E8" title="In 2.3.2 Block context prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>))</td>
<td id="S3.T1.1.11.9.2" class="ltx_td ltx_align_center ltx_border_b ltx_border_r">51.5M</td>
<td id="S3.T1.1.11.9.3" class="ltx_td ltx_align_center ltx_border_b ltx_border_r">prefix</td>
<td id="S3.T1.1.11.9.4" class="ltx_td ltx_align_center ltx_border_b">3.4</td>
<td id="S3.T1.1.11.9.5" class="ltx_td ltx_align_center ltx_border_b ltx_border_r">
<span id="S3.T1.1.11.9.5.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>8.0</td>
<td id="S3.T1.1.11.9.6" class="ltx_td ltx_align_center ltx_border_b"><span id="S3.T1.1.11.9.6.1" class="ltx_text ltx_font_bold">3.2</span></td>
<td id="S3.T1.1.11.9.7" class="ltx_td ltx_align_center ltx_border_b ltx_border_r">
<span id="S3.T1.1.11.9.7.1" class="ltx_text ltx_phantom ltx_font_bold"><span style="visibility:hidden">0</span></span><span id="S3.T1.1.11.9.7.2" class="ltx_text ltx_font_bold">7.9</span>
</td>
<td id="S3.T1.1.11.9.8" class="ltx_td ltx_align_center ltx_border_b ltx_border_r">0.16</td>
<td id="S3.T1.1.11.9.9" class="ltx_td ltx_align_center ltx_border_b">0.47</td>
</tr>
</tbody>
</table>
</figure>
</section>
<section id="S3.SS2.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.3 </span>Prefix prompts</h4>

<div id="S3.SS2.SSS3.p1" class="ltx_para">
<p id="S3.SS2.SSS3.p1.9" class="ltx_p">Instead of strictly aligning prompts and the output labels, we also propose randomly selecting a prefix of the prompts.
The random block size <math id="S3.SS2.SSS3.p1.1.m1.1" class="ltx_Math" alttext="1\leq\beta\leq B" display="inline"><semantics id="S3.SS2.SSS3.p1.1.m1.1a"><mrow id="S3.SS2.SSS3.p1.1.m1.1.1" xref="S3.SS2.SSS3.p1.1.m1.1.1.cmml"><mn id="S3.SS2.SSS3.p1.1.m1.1.1.2" xref="S3.SS2.SSS3.p1.1.m1.1.1.2.cmml">1</mn><mo id="S3.SS2.SSS3.p1.1.m1.1.1.3" xref="S3.SS2.SSS3.p1.1.m1.1.1.3.cmml">≤</mo><mi id="S3.SS2.SSS3.p1.1.m1.1.1.4" xref="S3.SS2.SSS3.p1.1.m1.1.1.4.cmml">β</mi><mo id="S3.SS2.SSS3.p1.1.m1.1.1.5" xref="S3.SS2.SSS3.p1.1.m1.1.1.5.cmml">≤</mo><mi id="S3.SS2.SSS3.p1.1.m1.1.1.6" xref="S3.SS2.SSS3.p1.1.m1.1.1.6.cmml">B</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.1.m1.1b"><apply id="S3.SS2.SSS3.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1"><and id="S3.SS2.SSS3.p1.1.m1.1.1a.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1"></and><apply id="S3.SS2.SSS3.p1.1.m1.1.1b.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1"><leq id="S3.SS2.SSS3.p1.1.m1.1.1.3.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1.3"></leq><cn type="integer" id="S3.SS2.SSS3.p1.1.m1.1.1.2.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1.2">1</cn><ci id="S3.SS2.SSS3.p1.1.m1.1.1.4.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1.4">𝛽</ci></apply><apply id="S3.SS2.SSS3.p1.1.m1.1.1c.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1"><leq id="S3.SS2.SSS3.p1.1.m1.1.1.5.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1.5"></leq><share href="#S3.SS2.SSS3.p1.1.m1.1.1.4.cmml" id="S3.SS2.SSS3.p1.1.m1.1.1d.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1"></share><ci id="S3.SS2.SSS3.p1.1.m1.1.1.6.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1.6">𝐵</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.1.m1.1c">1\leq\beta\leq B</annotation></semantics></math> is selected at each training step, and the prefix prompts <math id="S3.SS2.SSS3.p1.2.m2.1" class="ltx_Math" alttext="U^{J_{\beta}}" display="inline"><semantics id="S3.SS2.SSS3.p1.2.m2.1a"><msup id="S3.SS2.SSS3.p1.2.m2.1.1" xref="S3.SS2.SSS3.p1.2.m2.1.1.cmml"><mi id="S3.SS2.SSS3.p1.2.m2.1.1.2" xref="S3.SS2.SSS3.p1.2.m2.1.1.2.cmml">U</mi><msub id="S3.SS2.SSS3.p1.2.m2.1.1.3" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.cmml"><mi id="S3.SS2.SSS3.p1.2.m2.1.1.3.2" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.2.cmml">J</mi><mi id="S3.SS2.SSS3.p1.2.m2.1.1.3.3" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.3.cmml">β</mi></msub></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.2.m2.1b"><apply id="S3.SS2.SSS3.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.2.m2.1.1.1.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1">superscript</csymbol><ci id="S3.SS2.SSS3.p1.2.m2.1.1.2.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1.2">𝑈</ci><apply id="S3.SS2.SSS3.p1.2.m2.1.1.3.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.2.m2.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1.3">subscript</csymbol><ci id="S3.SS2.SSS3.p1.2.m2.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.2">𝐽</ci><ci id="S3.SS2.SSS3.p1.2.m2.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.3">𝛽</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.2.m2.1c">U^{J_{\beta}}</annotation></semantics></math> is used to estimate the entire sentence <math id="S3.SS2.SSS3.p1.3.m3.1" class="ltx_Math" alttext="Y^{I}" display="inline"><semantics id="S3.SS2.SSS3.p1.3.m3.1a"><msup id="S3.SS2.SSS3.p1.3.m3.1.1" xref="S3.SS2.SSS3.p1.3.m3.1.1.cmml"><mi id="S3.SS2.SSS3.p1.3.m3.1.1.2" xref="S3.SS2.SSS3.p1.3.m3.1.1.2.cmml">Y</mi><mi id="S3.SS2.SSS3.p1.3.m3.1.1.3" xref="S3.SS2.SSS3.p1.3.m3.1.1.3.cmml">I</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.3.m3.1b"><apply id="S3.SS2.SSS3.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.3.m3.1.1.1.cmml" xref="S3.SS2.SSS3.p1.3.m3.1.1">superscript</csymbol><ci id="S3.SS2.SSS3.p1.3.m3.1.1.2.cmml" xref="S3.SS2.SSS3.p1.3.m3.1.1.2">𝑌</ci><ci id="S3.SS2.SSS3.p1.3.m3.1.1.3.cmml" xref="S3.SS2.SSS3.p1.3.m3.1.1.3">𝐼</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.3.m3.1c">Y^{I}</annotation></semantics></math> using Eq. (<a href="#S2.E2" title="In 2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>).
Because it does not rely on the CTC module, we expect this method to be more robust to the CTC error.
We consider this training method similar to a mixture of ASR/LM training.
This is because the tokens <math id="S3.SS2.SSS3.p1.4.m4.1" class="ltx_Math" alttext="y_{i}" display="inline"><semantics id="S3.SS2.SSS3.p1.4.m4.1a"><msub id="S3.SS2.SSS3.p1.4.m4.1.1" xref="S3.SS2.SSS3.p1.4.m4.1.1.cmml"><mi id="S3.SS2.SSS3.p1.4.m4.1.1.2" xref="S3.SS2.SSS3.p1.4.m4.1.1.2.cmml">y</mi><mi id="S3.SS2.SSS3.p1.4.m4.1.1.3" xref="S3.SS2.SSS3.p1.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.4.m4.1b"><apply id="S3.SS2.SSS3.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.4.m4.1.1.1.cmml" xref="S3.SS2.SSS3.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS2.SSS3.p1.4.m4.1.1.2.cmml" xref="S3.SS2.SSS3.p1.4.m4.1.1.2">𝑦</ci><ci id="S3.SS2.SSS3.p1.4.m4.1.1.3.cmml" xref="S3.SS2.SSS3.p1.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.4.m4.1c">y_{i}</annotation></semantics></math> are aligned with <math id="S3.SS2.SSS3.p1.5.m5.1" class="ltx_Math" alttext="{\mathbf{x}}_{t}" display="inline"><semantics id="S3.SS2.SSS3.p1.5.m5.1a"><msub id="S3.SS2.SSS3.p1.5.m5.1.1" xref="S3.SS2.SSS3.p1.5.m5.1.1.cmml"><mi id="S3.SS2.SSS3.p1.5.m5.1.1.2" xref="S3.SS2.SSS3.p1.5.m5.1.1.2.cmml">𝐱</mi><mi id="S3.SS2.SSS3.p1.5.m5.1.1.3" xref="S3.SS2.SSS3.p1.5.m5.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.5.m5.1b"><apply id="S3.SS2.SSS3.p1.5.m5.1.1.cmml" xref="S3.SS2.SSS3.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.5.m5.1.1.1.cmml" xref="S3.SS2.SSS3.p1.5.m5.1.1">subscript</csymbol><ci id="S3.SS2.SSS3.p1.5.m5.1.1.2.cmml" xref="S3.SS2.SSS3.p1.5.m5.1.1.2">𝐱</ci><ci id="S3.SS2.SSS3.p1.5.m5.1.1.3.cmml" xref="S3.SS2.SSS3.p1.5.m5.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.5.m5.1c">{\mathbf{x}}_{t}</annotation></semantics></math> such that <math id="S3.SS2.SSS3.p1.6.m6.1" class="ltx_Math" alttext="t&lt;T_{\beta}" display="inline"><semantics id="S3.SS2.SSS3.p1.6.m6.1a"><mrow id="S3.SS2.SSS3.p1.6.m6.1.1" xref="S3.SS2.SSS3.p1.6.m6.1.1.cmml"><mi id="S3.SS2.SSS3.p1.6.m6.1.1.2" xref="S3.SS2.SSS3.p1.6.m6.1.1.2.cmml">t</mi><mo id="S3.SS2.SSS3.p1.6.m6.1.1.1" xref="S3.SS2.SSS3.p1.6.m6.1.1.1.cmml">&lt;</mo><msub id="S3.SS2.SSS3.p1.6.m6.1.1.3" xref="S3.SS2.SSS3.p1.6.m6.1.1.3.cmml"><mi id="S3.SS2.SSS3.p1.6.m6.1.1.3.2" xref="S3.SS2.SSS3.p1.6.m6.1.1.3.2.cmml">T</mi><mi id="S3.SS2.SSS3.p1.6.m6.1.1.3.3" xref="S3.SS2.SSS3.p1.6.m6.1.1.3.3.cmml">β</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.6.m6.1b"><apply id="S3.SS2.SSS3.p1.6.m6.1.1.cmml" xref="S3.SS2.SSS3.p1.6.m6.1.1"><lt id="S3.SS2.SSS3.p1.6.m6.1.1.1.cmml" xref="S3.SS2.SSS3.p1.6.m6.1.1.1"></lt><ci id="S3.SS2.SSS3.p1.6.m6.1.1.2.cmml" xref="S3.SS2.SSS3.p1.6.m6.1.1.2">𝑡</ci><apply id="S3.SS2.SSS3.p1.6.m6.1.1.3.cmml" xref="S3.SS2.SSS3.p1.6.m6.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.6.m6.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.6.m6.1.1.3">subscript</csymbol><ci id="S3.SS2.SSS3.p1.6.m6.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.6.m6.1.1.3.2">𝑇</ci><ci id="S3.SS2.SSS3.p1.6.m6.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.6.m6.1.1.3.3">𝛽</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.6.m6.1c">t&lt;T_{\beta}</annotation></semantics></math> benefit from sufficient acoustic clues from <math id="S3.SS2.SSS3.p1.7.m7.1" class="ltx_Math" alttext="U^{J_{\beta}}" display="inline"><semantics id="S3.SS2.SSS3.p1.7.m7.1a"><msup id="S3.SS2.SSS3.p1.7.m7.1.1" xref="S3.SS2.SSS3.p1.7.m7.1.1.cmml"><mi id="S3.SS2.SSS3.p1.7.m7.1.1.2" xref="S3.SS2.SSS3.p1.7.m7.1.1.2.cmml">U</mi><msub id="S3.SS2.SSS3.p1.7.m7.1.1.3" xref="S3.SS2.SSS3.p1.7.m7.1.1.3.cmml"><mi id="S3.SS2.SSS3.p1.7.m7.1.1.3.2" xref="S3.SS2.SSS3.p1.7.m7.1.1.3.2.cmml">J</mi><mi id="S3.SS2.SSS3.p1.7.m7.1.1.3.3" xref="S3.SS2.SSS3.p1.7.m7.1.1.3.3.cmml">β</mi></msub></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.7.m7.1b"><apply id="S3.SS2.SSS3.p1.7.m7.1.1.cmml" xref="S3.SS2.SSS3.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.7.m7.1.1.1.cmml" xref="S3.SS2.SSS3.p1.7.m7.1.1">superscript</csymbol><ci id="S3.SS2.SSS3.p1.7.m7.1.1.2.cmml" xref="S3.SS2.SSS3.p1.7.m7.1.1.2">𝑈</ci><apply id="S3.SS2.SSS3.p1.7.m7.1.1.3.cmml" xref="S3.SS2.SSS3.p1.7.m7.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.7.m7.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.7.m7.1.1.3">subscript</csymbol><ci id="S3.SS2.SSS3.p1.7.m7.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.7.m7.1.1.3.2">𝐽</ci><ci id="S3.SS2.SSS3.p1.7.m7.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.7.m7.1.1.3.3">𝛽</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.7.m7.1c">U^{J_{\beta}}</annotation></semantics></math>, resembling ASR training.
Conversely, the estimation for the remaining tokens <math id="S3.SS2.SSS3.p1.8.m8.1" class="ltx_Math" alttext="y_{i}" display="inline"><semantics id="S3.SS2.SSS3.p1.8.m8.1a"><msub id="S3.SS2.SSS3.p1.8.m8.1.1" xref="S3.SS2.SSS3.p1.8.m8.1.1.cmml"><mi id="S3.SS2.SSS3.p1.8.m8.1.1.2" xref="S3.SS2.SSS3.p1.8.m8.1.1.2.cmml">y</mi><mi id="S3.SS2.SSS3.p1.8.m8.1.1.3" xref="S3.SS2.SSS3.p1.8.m8.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.8.m8.1b"><apply id="S3.SS2.SSS3.p1.8.m8.1.1.cmml" xref="S3.SS2.SSS3.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.8.m8.1.1.1.cmml" xref="S3.SS2.SSS3.p1.8.m8.1.1">subscript</csymbol><ci id="S3.SS2.SSS3.p1.8.m8.1.1.2.cmml" xref="S3.SS2.SSS3.p1.8.m8.1.1.2">𝑦</ci><ci id="S3.SS2.SSS3.p1.8.m8.1.1.3.cmml" xref="S3.SS2.SSS3.p1.8.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.8.m8.1c">y_{i}</annotation></semantics></math> can be regarded as pure LM training as it primarily relies on previous outputs, i.e., <math id="S3.SS2.SSS3.p1.9.m9.2" class="ltx_Math" alttext="p(y_{i}|Y^{(i-1)})" display="inline"><semantics id="S3.SS2.SSS3.p1.9.m9.2a"><mrow id="S3.SS2.SSS3.p1.9.m9.2.2" xref="S3.SS2.SSS3.p1.9.m9.2.2.cmml"><mi id="S3.SS2.SSS3.p1.9.m9.2.2.3" xref="S3.SS2.SSS3.p1.9.m9.2.2.3.cmml">p</mi><mo lspace="0em" rspace="0em" id="S3.SS2.SSS3.p1.9.m9.2.2.2" xref="S3.SS2.SSS3.p1.9.m9.2.2.2.cmml">​</mo><mrow id="S3.SS2.SSS3.p1.9.m9.2.2.1.1" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.cmml"><mo stretchy="false" id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.2" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.cmml">(</mo><mrow id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.cmml"><msub id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.cmml"><mi id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.2" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.2.cmml">y</mi><mi id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.3" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.3.cmml">i</mi></msub><mo fence="false" id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.1" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.1.cmml">|</mo><msup id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.3" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.3.cmml"><mi id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.3.2" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.3.2.cmml">Y</mi><mrow id="S3.SS2.SSS3.p1.9.m9.1.1.1.1" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.SS2.SSS3.p1.9.m9.1.1.1.1.2" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.cmml"><mi id="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.2" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.2.cmml">i</mi><mo id="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.1" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.1.cmml">−</mo><mn id="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.3" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S3.SS2.SSS3.p1.9.m9.1.1.1.1.3" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.cmml">)</mo></mrow></msup></mrow><mo stretchy="false" id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.3" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.9.m9.2b"><apply id="S3.SS2.SSS3.p1.9.m9.2.2.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2"><times id="S3.SS2.SSS3.p1.9.m9.2.2.2.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.2"></times><ci id="S3.SS2.SSS3.p1.9.m9.2.2.3.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.3">𝑝</ci><apply id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1"><csymbol cd="latexml" id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.1">conditional</csymbol><apply id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.1.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2">subscript</csymbol><ci id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.2.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.2">𝑦</ci><ci id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.3.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.2.3">𝑖</ci></apply><apply id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.3.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.3">superscript</csymbol><ci id="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.9.m9.2.2.1.1.1.3.2">𝑌</ci><apply id="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1"><minus id="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.1"></minus><ci id="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.2.cmml" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.2">𝑖</ci><cn type="integer" id="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.3.cmml" xref="S3.SS2.SSS3.p1.9.m9.1.1.1.1.1.3">1</cn></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.9.m9.2c">p(y_{i}|Y^{(i-1)})</annotation></semantics></math>, rather than Eq. (<a href="#S2.E2" title="In 2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>).</p>
</div>
</section>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2>

<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Experimental setup</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.1" class="ltx_p">To evaluate the proposed decoder-only architecture for streaming ASR, we used LibriSpeech <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib34" title="" class="ltx_ref">34</a>]</cite> and Switchboard dataset.
We first trained the speech subnetwork and the decoder, which was a 12-block conformer and 6-block transformer, respectively, both with four-head 256-unit attention layers and 2048-unit feed-forward layers, and the other detail including block size were as in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>.
The speech subnetwork was trained with the CTC loss. For the decoder pre-training, we used the external text-only corpus for LibriSpeech, and Fisher corpus for Switchboard.
We used the Adam optimizer with a learning rate of 0.0025 decayed by Noam learning rate decay.
Then the entire model consisting of both speech subnetwork and decoder-only architecture was fine-tuned on paired speech–transcription data using a lower learning rate of 0.0005 without warm-up.
The external LMs, used for scoring hypotheses during inference, were also trained using text-only data. The LMs were two-layer LSTMs with 512 hidden units.
We applied byte-pair encoding subword tokenization with 5,000 token classes for LibriSpeech and 2,000 token classes for Switchboard, respectively.
</p>
</div>
<div id="S4.SS1.p2" class="ltx_para">
<p id="S4.SS1.p2.2" class="ltx_p">For comparison, we also trained the baseline conformer-based encoder–decoder streaming model <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite> and used it as Baseline EncDec or Baseline CTC by omitting the decoder.
We also added RNN transducer layers <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite> to the same encoder architecture as another baseline (Baseline RNNT).
The baselines methods were decoded using the integrated frame/label-synchronous search <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite> for EncDec and frame-synchronous search <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite> for the rest.
The fusing weights in Eq. (<a href="#S2.E10" title="In 2.4 Score fusion inference ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">10</span></a>) were determined using the development set, and were <math id="S4.SS1.p2.1.m1.1" class="ltx_Math" alttext="\lambda_{\mathrm{ctc}}=0.4" display="inline"><semantics id="S4.SS1.p2.1.m1.1a"><mrow id="S4.SS1.p2.1.m1.1.1" xref="S4.SS1.p2.1.m1.1.1.cmml"><msub id="S4.SS1.p2.1.m1.1.1.2" xref="S4.SS1.p2.1.m1.1.1.2.cmml"><mi id="S4.SS1.p2.1.m1.1.1.2.2" xref="S4.SS1.p2.1.m1.1.1.2.2.cmml">λ</mi><mi id="S4.SS1.p2.1.m1.1.1.2.3" xref="S4.SS1.p2.1.m1.1.1.2.3.cmml">ctc</mi></msub><mo id="S4.SS1.p2.1.m1.1.1.1" xref="S4.SS1.p2.1.m1.1.1.1.cmml">=</mo><mn id="S4.SS1.p2.1.m1.1.1.3" xref="S4.SS1.p2.1.m1.1.1.3.cmml">0.4</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.1.m1.1b"><apply id="S4.SS1.p2.1.m1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1"><eq id="S4.SS1.p2.1.m1.1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1.1"></eq><apply id="S4.SS1.p2.1.m1.1.1.2.cmml" xref="S4.SS1.p2.1.m1.1.1.2"><csymbol cd="ambiguous" id="S4.SS1.p2.1.m1.1.1.2.1.cmml" xref="S4.SS1.p2.1.m1.1.1.2">subscript</csymbol><ci id="S4.SS1.p2.1.m1.1.1.2.2.cmml" xref="S4.SS1.p2.1.m1.1.1.2.2">𝜆</ci><ci id="S4.SS1.p2.1.m1.1.1.2.3.cmml" xref="S4.SS1.p2.1.m1.1.1.2.3">ctc</ci></apply><cn type="float" id="S4.SS1.p2.1.m1.1.1.3.cmml" xref="S4.SS1.p2.1.m1.1.1.3">0.4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.1.m1.1c">\lambda_{\mathrm{ctc}}=0.4</annotation></semantics></math> and <math id="S4.SS1.p2.2.m2.1" class="ltx_Math" alttext="\lambda_{\mathrm{dec}}=0.6" display="inline"><semantics id="S4.SS1.p2.2.m2.1a"><mrow id="S4.SS1.p2.2.m2.1.1" xref="S4.SS1.p2.2.m2.1.1.cmml"><msub id="S4.SS1.p2.2.m2.1.1.2" xref="S4.SS1.p2.2.m2.1.1.2.cmml"><mi id="S4.SS1.p2.2.m2.1.1.2.2" xref="S4.SS1.p2.2.m2.1.1.2.2.cmml">λ</mi><mi id="S4.SS1.p2.2.m2.1.1.2.3" xref="S4.SS1.p2.2.m2.1.1.2.3.cmml">dec</mi></msub><mo id="S4.SS1.p2.2.m2.1.1.1" xref="S4.SS1.p2.2.m2.1.1.1.cmml">=</mo><mn id="S4.SS1.p2.2.m2.1.1.3" xref="S4.SS1.p2.2.m2.1.1.3.cmml">0.6</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.2.m2.1b"><apply id="S4.SS1.p2.2.m2.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1"><eq id="S4.SS1.p2.2.m2.1.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1.1"></eq><apply id="S4.SS1.p2.2.m2.1.1.2.cmml" xref="S4.SS1.p2.2.m2.1.1.2"><csymbol cd="ambiguous" id="S4.SS1.p2.2.m2.1.1.2.1.cmml" xref="S4.SS1.p2.2.m2.1.1.2">subscript</csymbol><ci id="S4.SS1.p2.2.m2.1.1.2.2.cmml" xref="S4.SS1.p2.2.m2.1.1.2.2">𝜆</ci><ci id="S4.SS1.p2.2.m2.1.1.2.3.cmml" xref="S4.SS1.p2.2.m2.1.1.2.3">dec</ci></apply><cn type="float" id="S4.SS1.p2.2.m2.1.1.3.cmml" xref="S4.SS1.p2.2.m2.1.1.3">0.6</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.2.m2.1c">\lambda_{\mathrm{dec}}=0.6</annotation></semantics></math>.
The LM was also fused with a weight of 0.4.</p>
</div>
<div id="S4.SS1.p3" class="ltx_para">
<p id="S4.SS1.p3.1" class="ltx_p">We measured not only word error rates (WERs), but also real-time factors (RTFs) and latency using randomly selected 100 utterances from the test set of each corpus with an 8 core 3.60 GHz Intel i9-9900K CPU.
We adopted EP latency following <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib35" title="" class="ltx_ref">35</a>]</cite>, which was the duration between the last audio sample inputted and the last transcription token emitted.
The median of both RTFs and latency are reported.</p>
</div>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Librispeech results</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">We investigate the efficacy of decoder-only architecture for streaming ASR using LibriSpeech.
All the methods were inferred not only in a streaming manner (Sec. <a href="#S2.SS2" title="2.2 Blockwise processing of prompt generation ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2</span></a>), but we also performed an ablation study of batch processing inference.
In the case of batch processing, the full prompts were given to the decoder, which was a matched condition with full prompt training using Eq. (<a href="#S2.E1" title="In 2.1 Decoder-only architecture for ASR ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>), described in Sec. <a href="#S3.SS2.SSS1" title="3.2.1 Full prompts ‣ 3.2 Prompt masking in training ‣ 3 Training procedure ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2.1</span></a>.</p>
</div>
<div id="S4.SS2.p2" class="ltx_para">
<p id="S4.SS2.p2.1" class="ltx_p">First, we conducted experiments with the three training methods discussed in Sec. <a href="#S3.SS2" title="3.2 Prompt masking in training ‣ 3 Training procedure ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2</span></a>, using only CTC prompts, i.e., <math id="S4.SS2.p2.1.m1.1" class="ltx_Math" alttext="U^{J}=U^{J}_{\mathrm{ctc}}" display="inline"><semantics id="S4.SS2.p2.1.m1.1a"><mrow id="S4.SS2.p2.1.m1.1.1" xref="S4.SS2.p2.1.m1.1.1.cmml"><msup id="S4.SS2.p2.1.m1.1.1.2" xref="S4.SS2.p2.1.m1.1.1.2.cmml"><mi id="S4.SS2.p2.1.m1.1.1.2.2" xref="S4.SS2.p2.1.m1.1.1.2.2.cmml">U</mi><mi id="S4.SS2.p2.1.m1.1.1.2.3" xref="S4.SS2.p2.1.m1.1.1.2.3.cmml">J</mi></msup><mo id="S4.SS2.p2.1.m1.1.1.1" xref="S4.SS2.p2.1.m1.1.1.1.cmml">=</mo><msubsup id="S4.SS2.p2.1.m1.1.1.3" xref="S4.SS2.p2.1.m1.1.1.3.cmml"><mi id="S4.SS2.p2.1.m1.1.1.3.2.2" xref="S4.SS2.p2.1.m1.1.1.3.2.2.cmml">U</mi><mi id="S4.SS2.p2.1.m1.1.1.3.3" xref="S4.SS2.p2.1.m1.1.1.3.3.cmml">ctc</mi><mi id="S4.SS2.p2.1.m1.1.1.3.2.3" xref="S4.SS2.p2.1.m1.1.1.3.2.3.cmml">J</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.1.m1.1b"><apply id="S4.SS2.p2.1.m1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1"><eq id="S4.SS2.p2.1.m1.1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1.1"></eq><apply id="S4.SS2.p2.1.m1.1.1.2.cmml" xref="S4.SS2.p2.1.m1.1.1.2"><csymbol cd="ambiguous" id="S4.SS2.p2.1.m1.1.1.2.1.cmml" xref="S4.SS2.p2.1.m1.1.1.2">superscript</csymbol><ci id="S4.SS2.p2.1.m1.1.1.2.2.cmml" xref="S4.SS2.p2.1.m1.1.1.2.2">𝑈</ci><ci id="S4.SS2.p2.1.m1.1.1.2.3.cmml" xref="S4.SS2.p2.1.m1.1.1.2.3">𝐽</ci></apply><apply id="S4.SS2.p2.1.m1.1.1.3.cmml" xref="S4.SS2.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S4.SS2.p2.1.m1.1.1.3.1.cmml" xref="S4.SS2.p2.1.m1.1.1.3">subscript</csymbol><apply id="S4.SS2.p2.1.m1.1.1.3.2.cmml" xref="S4.SS2.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S4.SS2.p2.1.m1.1.1.3.2.1.cmml" xref="S4.SS2.p2.1.m1.1.1.3">superscript</csymbol><ci id="S4.SS2.p2.1.m1.1.1.3.2.2.cmml" xref="S4.SS2.p2.1.m1.1.1.3.2.2">𝑈</ci><ci id="S4.SS2.p2.1.m1.1.1.3.2.3.cmml" xref="S4.SS2.p2.1.m1.1.1.3.2.3">𝐽</ci></apply><ci id="S4.SS2.p2.1.m1.1.1.3.3.cmml" xref="S4.SS2.p2.1.m1.1.1.3.3">ctc</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.1.m1.1c">U^{J}=U^{J}_{\mathrm{ctc}}</annotation></semantics></math> (Eq. (<a href="#S2.E6" title="In 2.3.1 CTC prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>)).
The results are shown in Table <a href="#S3.T1" title="Table 1 ‣ 3.2.2 Forced alignment masking ‣ 3.2 Prompt masking in training ‣ 3 Training procedure ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.
For the naive full prompt model (Sec. <a href="#S3.SS2.SSS1" title="3.2.1 Full prompts ‣ 3.2 Prompt masking in training ‣ 3 Training procedure ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2.1</span></a>), the inference using full prompts is a matched condition. However, when it was inferred using the proposed streaming processing, the train–inference mismatch (see Sec. <a href="#S3.SS2.SSS1" title="3.2.1 Full prompts ‣ 3.2 Prompt masking in training ‣ 3 Training procedure ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2.1</span></a>) degraded the accuracy, from 3.3% to 3.5% and 8.7% to 9.0% for each test set.
For the forced alignment model (Sec. <a href="#S3.SS2.SSS2" title="3.2.2 Forced alignment masking ‣ 3.2 Prompt masking in training ‣ 3 Training procedure ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2.2</span></a>), the model did not perform well and the training was unstable.
We hypothesize that this was because the training used different alignments given by new CTC parameters in every iteration and the CTC forced alignment might contain errors.
On the other hand, training using the random-length prefix prompts (Sec. <a href="#S3.SS2.SSS3" title="3.2.3 Prefix prompts ‣ 3.2 Prompt masking in training ‣ 3 Training procedure ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2.3</span></a>) performed robustly in both the mismatched batched scenario and the target streaming scenario.
In particular, the prefix prompt training reduced test-other WERs significantly, i.e., by 0.5% and 1.0% in both the batched and streaming inference, compared to full prompt training.
The result indicates the efficacy of prefix prompt training in covering various situations of prompting that the decoder faces in inference.
Among the three training methods, prefix prompt training scored lowest WER in the streaming scenario, and outperformed Baseline CTC/RNNT models.</p>
</div>
<div id="S4.SS2.p3" class="ltx_para">
<p id="S4.SS2.p3.2" class="ltx_p">Then, we evaluated the additional block context prompts <math id="S4.SS2.p3.1.m1.1" class="ltx_Math" alttext="U^{J}_{\mathrm{cxt}}" display="inline"><semantics id="S4.SS2.p3.1.m1.1a"><msubsup id="S4.SS2.p3.1.m1.1.1" xref="S4.SS2.p3.1.m1.1.1.cmml"><mi id="S4.SS2.p3.1.m1.1.1.2.2" xref="S4.SS2.p3.1.m1.1.1.2.2.cmml">U</mi><mi id="S4.SS2.p3.1.m1.1.1.3" xref="S4.SS2.p3.1.m1.1.1.3.cmml">cxt</mi><mi id="S4.SS2.p3.1.m1.1.1.2.3" xref="S4.SS2.p3.1.m1.1.1.2.3.cmml">J</mi></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.1.m1.1b"><apply id="S4.SS2.p3.1.m1.1.1.cmml" xref="S4.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p3.1.m1.1.1.1.cmml" xref="S4.SS2.p3.1.m1.1.1">subscript</csymbol><apply id="S4.SS2.p3.1.m1.1.1.2.cmml" xref="S4.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p3.1.m1.1.1.2.1.cmml" xref="S4.SS2.p3.1.m1.1.1">superscript</csymbol><ci id="S4.SS2.p3.1.m1.1.1.2.2.cmml" xref="S4.SS2.p3.1.m1.1.1.2.2">𝑈</ci><ci id="S4.SS2.p3.1.m1.1.1.2.3.cmml" xref="S4.SS2.p3.1.m1.1.1.2.3">𝐽</ci></apply><ci id="S4.SS2.p3.1.m1.1.1.3.cmml" xref="S4.SS2.p3.1.m1.1.1.3">cxt</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.1.m1.1c">U^{J}_{\mathrm{cxt}}</annotation></semantics></math> in Eq. (<a href="#S2.E7" title="In 2.3.2 Block context prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a>).
As shown in Table <a href="#S3.T1" title="Table 1 ‣ 3.2.2 Forced alignment masking ‣ 3.2 Prompt masking in training ‣ 3 Training procedure ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, using only the block context prompts performed 3.8% and 9.0% for test-clean/other sets, respectively.
When we combined two proposed prompts as <math id="S4.SS2.p3.2.m2.1" class="ltx_Math" alttext="U^{J}" display="inline"><semantics id="S4.SS2.p3.2.m2.1a"><msup id="S4.SS2.p3.2.m2.1.1" xref="S4.SS2.p3.2.m2.1.1.cmml"><mi id="S4.SS2.p3.2.m2.1.1.2" xref="S4.SS2.p3.2.m2.1.1.2.cmml">U</mi><mi id="S4.SS2.p3.2.m2.1.1.3" xref="S4.SS2.p3.2.m2.1.1.3.cmml">J</mi></msup><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.2.m2.1b"><apply id="S4.SS2.p3.2.m2.1.1.cmml" xref="S4.SS2.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS2.p3.2.m2.1.1.1.cmml" xref="S4.SS2.p3.2.m2.1.1">superscript</csymbol><ci id="S4.SS2.p3.2.m2.1.1.2.cmml" xref="S4.SS2.p3.2.m2.1.1.2">𝑈</ci><ci id="S4.SS2.p3.2.m2.1.1.3.cmml" xref="S4.SS2.p3.2.m2.1.1.3">𝐽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.2.m2.1c">U^{J}</annotation></semantics></math> (Eq. (<a href="#S2.E8" title="In 2.3.2 Block context prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>)), we observed improvement over CTC prompt model by 0.4% and 0.1% absolute, while maintaining nearly the same computational efficiency, with latency increasing by only 0.03 seconds.
Compared to Baseline EncDec, the CTC+Context prompt model achieved similar performance in test-clean and 8% relative WER reduction in test-other with almost 50% reduction in computational requirements.</p>
</div>
<figure id="S4.T2" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 2: </span>Streaming ASR evaluation using Switchboard.</figcaption>
<table id="S4.T2.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S4.T2.1.1.1" class="ltx_tr">
<th id="S4.T2.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Models</th>
<td id="S4.T2.1.1.1.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" colspan="2">Streaming WER</td>
<td id="S4.T2.1.1.1.3" class="ltx_td ltx_align_center ltx_border_t">RTF</td>
</tr>
<tr id="S4.T2.1.2.2" class="ltx_tr">
<th id="S4.T2.1.2.2.1" class="ltx_td ltx_th ltx_th_row ltx_border_r"></th>
<td id="S4.T2.1.2.2.2" class="ltx_td ltx_align_center">Switchboard</td>
<td id="S4.T2.1.2.2.3" class="ltx_td ltx_align_center ltx_border_r">CallHome</td>
<td id="S4.T2.1.2.2.4" class="ltx_td"></td>
</tr>
<tr id="S4.T2.1.3.3" class="ltx_tr">
<th id="S4.T2.1.3.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_tt">Baseline CTC <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>
</th>
<td id="S4.T2.1.3.3.2" class="ltx_td ltx_align_center ltx_border_tt">10.2</td>
<td id="S4.T2.1.3.3.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">17.8</td>
<td id="S4.T2.1.3.3.4" class="ltx_td ltx_align_center ltx_border_tt">0.06</td>
</tr>
<tr id="S4.T2.1.4.4" class="ltx_tr">
<th id="S4.T2.1.4.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Baseline RNNT <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite>
</th>
<td id="S4.T2.1.4.4.2" class="ltx_td ltx_align_center">10.3</td>
<td id="S4.T2.1.4.4.3" class="ltx_td ltx_align_center ltx_border_r">17.7</td>
<td id="S4.T2.1.4.4.4" class="ltx_td ltx_align_center">0.09</td>
</tr>
<tr id="S4.T2.1.5.5" class="ltx_tr">
<th id="S4.T2.1.5.5.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Baseline EncDec <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>
</th>
<td id="S4.T2.1.5.5.2" class="ltx_td ltx_align_center">
<span id="S4.T2.1.5.5.2.1" class="ltx_text ltx_phantom"><span style="visibility:hidden">0</span></span>8.8</td>
<td id="S4.T2.1.5.5.3" class="ltx_td ltx_align_center ltx_border_r">16.0</td>
<td id="S4.T2.1.5.5.4" class="ltx_td ltx_align_center">0.46</td>
</tr>
<tr id="S4.T2.1.6.6" class="ltx_tr">
<th id="S4.T2.1.6.6.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r ltx_border_t">Decoder-only (Eq. (<a href="#S2.E8" title="In 2.3.2 Block context prompts ‣ 2.3 Prompts generation methods ‣ 2 Streamable decoder-only architecture ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>))</th>
<td id="S4.T2.1.6.6.2" class="ltx_td ltx_align_center ltx_border_b ltx_border_t">
<span id="S4.T2.1.6.6.2.1" class="ltx_text ltx_phantom ltx_font_bold"><span style="visibility:hidden">0</span></span><span id="S4.T2.1.6.6.2.2" class="ltx_text ltx_font_bold">8.7</span>
</td>
<td id="S4.T2.1.6.6.3" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t"><span id="S4.T2.1.6.6.3.1" class="ltx_text ltx_font_bold">15.7</span></td>
<td id="S4.T2.1.6.6.4" class="ltx_td ltx_align_center ltx_border_b ltx_border_t">0.39</td>
</tr>
</tbody>
</table>
</figure>
</section>
<section id="S4.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Switchboard and Fisher results</h3>

<div id="S4.SS3.p1" class="ltx_para">
<p id="S4.SS3.p1.1" class="ltx_p">Lastly, we evaluated the proposed method trained with the Switchboard dataset to see if our method is consistently effective in a different dataset.
The results in Table. <a href="#S4.T2" title="Table 2 ‣ 4.2 Librispeech results ‣ 4 Experiments ‣ Decoder-only Architecture for Streaming End-to-end Speech Recognition" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> follows similar tendency as in Librispeech corpus, and we confirmed that our proposed methods outperformed all baselines by achieving WERs of 9.0% and 16.2% for Switchboard/CallHome test set.</p>
</div>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Conclusion</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">We investigated using powerful yet efficient decoder-only architecture for blockwise streaming ASR.
We propose a novel architecture where the speech utterances are processed in a blockwise speech subnetwork, and prompts are produced block-by-block based on CTC greedy output and the context embedding. The decoder-only architecture estimates transcriptions in a blockwise manner after each chunk of prompts are given.
For training, we also propose novel <em id="S5.p1.1.1" class="ltx_emph ltx_font_italic">prefix prompt training</em> that mitigate the mismatch between batched training and streaming inference.
This method selects the prefix of the prompts randomly to cover various prompt lengths that may occur in inference.
Experimentally we confirmed that our proposed usage of decoder-only architecture in streaming ASR performs better accuracy with smaller RTF and latency.</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
D. Povey, H. Hadian, P. Ghahremani, K. Li, and S. Khudanpur, ``A
time-restricted self-attention layer for ASR,'' in <em id="bib.bib1.1.1" class="ltx_emph ltx_font_italic">Proc. of ICASSP</em>,
2018, pp. 5874–5878.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
L. Dong, F. Wang, and B. Xu, ``Self-attention aligner: A latency-control
end-to-end model for ASR using self-attention network and chunk-hopping,''
in <em id="bib.bib2.1.1" class="ltx_emph ltx_font_italic">Proc. of ICASSP</em>, 2019, pp. 5656–5660.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
E. Tsunoo, Y. Kashiwagi, T. Kumakura, and S. Watanabe, ``Transformer ASR with
contextual block processing,'' in <em id="bib.bib3.1.1" class="ltx_emph ltx_font_italic">Proc. of ASRU Workshop</em>, 2019, pp.
427–433.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Y. Shi, Y. Wang, C. Wu, C.-F. Yeh, J. Chan, F. Zhang, D. Le, and M. Seltzer,
``Emformer: Efficient memory transformer based acoustic model for low latency
streaming speech recognition,'' in <em id="bib.bib4.1.1" class="ltx_emph ltx_font_italic">Proc. of ICASSP</em>, 2021, pp.
6783–6787.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
A. Graves, S. Fernández, F. Gomez, and J. Schmidhuber, ``Connectionist
temporal classification: labelling unsegmented sequence data with recurrent
neural networks,'' in <em id="bib.bib5.1.1" class="ltx_emph ltx_font_italic">Proc. of 23rd International Conference on Machine
Learning</em>, 2006, pp. 369–376.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Y. Miao, M. Gowayyed, and F. Metze, ``EESEN: End-to-end speech recognition
using deep RNN models and WFST-based decoding,'' in <em id="bib.bib6.1.1" class="ltx_emph ltx_font_italic">Proc. of ASRU
Workshop</em>, 2015, pp. 167–174.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
D. Amodei <em id="bib.bib7.1.1" class="ltx_emph ltx_font_italic">et al.</em>, ``Deep Speech 2: End-to-end speech recognition in
English and Mandarin,'' in <em id="bib.bib7.2.2" class="ltx_emph ltx_font_italic">Proc. of 33rd International Conference
on Machine Learning</em>, vol. 48, 2016, pp. 173–182.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
S. Arora, G. Saon, S. Watanabe, and B. Kingsbury, ``Semi-autoregressive
streaming ASR with label context,'' <em id="bib.bib8.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2309.10926</em>,
2023.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
A. Graves, A.-R. Mohamed, and G. Hinton, ``Speech recognition with deep
recurrent neural networks,'' in <em id="bib.bib9.1.1" class="ltx_emph ltx_font_italic">Proc. of ICASSP</em>, 2013, pp. 6645–6649.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
K. Rao, H. Sak, and R. Prabhavalkar, ``Exploring architectures, data and units
for streaming end-to-end speech recognition with RNN-transducer,'' in
<em id="bib.bib10.1.1" class="ltx_emph ltx_font_italic">Proc. of ASRU Workshop</em>, 2017, pp. 193–199.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Q. Zhang, H. Lu, H. Sak, A. Tripathi, E. McDermott, S. Koo, and S. Kumar,
``Transformer transducer: A streamable speech recognition model with
transformer encoders and RNN-T loss,'' in <em id="bib.bib11.1.1" class="ltx_emph ltx_font_italic">Proc. of ICASSP</em>, 2020, pp.
7829–7833.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
N. Moritz, T. Hori, and J. Le Roux, ``Triggered attention for end-to-end speech
recognition,'' in <em id="bib.bib12.1.1" class="ltx_emph ltx_font_italic">Proc. of ICASSP</em>, 2019, pp. 5666–5670.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
H. Miao, G. Cheng, Z. Pengyuan, and Y. Yan, ``Transformer online
CTC/attention end-to-end speech recognition architecture,'' in <em id="bib.bib13.1.1" class="ltx_emph ltx_font_italic">Proc.
of ICASSP</em>, 2020, pp. 6084–6088.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
M. Li, S. Zhang, C. Zorilă, and R. Doddipatla, ``Transformer-based streaming
ASR with cumulative attention,'' in <em id="bib.bib14.1.1" class="ltx_emph ltx_font_italic">Proc. of ICASSP</em>, 2022, pp.
8272–8276.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
T. N. Sainath, R. Pang, D. Rybach, Y. He, R. Prabhavalkar, W. Li, M. Visontai,
Q. Liang, T. Strohman, Y. Wu <em id="bib.bib15.1.1" class="ltx_emph ltx_font_italic">et al.</em>, ``Two-pass end-to-end speech
recognition,'' in <em id="bib.bib15.2.2" class="ltx_emph ltx_font_italic">Proc. of Interspeech</em>, 2019, pp. 2773–2777.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
W. Zhou, S. Berger, R. Schlüter, and H. Ney, ``Phoneme based neural
transducer for large vocabulary speech recognition,'' in <em id="bib.bib16.1.1" class="ltx_emph ltx_font_italic">Proc. of
ICASSP</em>, 2021, pp. 5644–5648.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Z. Yao, D. Wu, X. Wang, B. Zhang, F. Yu, C. Yang, Z. Peng, X. Chen, L. Xie, and
X. Lei, ``Wenet: Production oriented streaming and non-streaming end-to-end
speech recognition toolkit,'' in <em id="bib.bib17.1.1" class="ltx_emph ltx_font_italic">Proc. of Interspeech</em>, 2021.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
E. Tsunoo, H. Futami, Y. Kashiwagi, S. Arora, and S. Watanabe, ``Integration
of Frame- and Label-synchronous Beam Search for Streaming Encoder-decoder
Speech Recognition,'' in <em id="bib.bib18.1.1" class="ltx_emph ltx_font_italic">Proc. of Interspeech</em>, 2023, pp. 1369–1373.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
R. Botros, R. Prabhavalkar, J. Schalkwyk, C. Chelba, T. N. Sainath, and
F. Beaufays, ``Lego-Features: Exporting modular encoder features for
streaming and deliberation ASR,'' in <em id="bib.bib19.1.1" class="ltx_emph ltx_font_italic">Proc. of ICASSP</em>.   IEEE, 2023, pp. 1–5.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
T. Brown, B. Mann, N. Ryder, M. Subbiah, J. D. Kaplan, P. Dhariwal,
A. Neelakantan, P. Shyam, G. Sastry, A. Askell <em id="bib.bib20.1.1" class="ltx_emph ltx_font_italic">et al.</em>, ``Language
models are few-shot learners,'' <em id="bib.bib20.2.2" class="ltx_emph ltx_font_italic">Proc. of NurIPS</em>, vol. 33, pp.
1877–1901, 2020.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
A. Chowdhery, S. Narang, J. Devlin, M. Bosma, G. Mishra, A. Roberts, P. Barham,
H. W. Chung, C. Sutton, S. Gehrmann <em id="bib.bib21.1.1" class="ltx_emph ltx_font_italic">et al.</em>, ``PaLM: Scaling language
modeling with pathways,'' <em id="bib.bib21.2.2" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2204.02311</em>, 2022.

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
K.-W. Chang, Y.-K. Wang, H. Shen, I.-t. Kang, W.-C. Tseng, S.-W. Li, and H.-y.
Lee, ``Speechprompt v2: Prompt tuning for speech classification tasks,''
<em id="bib.bib22.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2303.00733</em>, 2023.

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
D. Zhang, S. Li, X. Zhang, J. Zhan, P. Wang, Y. Zhou, and X. Qiu,
``SpeechGPT: Empowering large language models with intrinsic cross-modal
conversational abilities,'' <em id="bib.bib23.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2305.11000</em>, 2023.

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
P. K. Rubenstein, C. Asawaroengchai, D. D. Nguyen, A. Bapna, Z. Borsos,
F. d. C. Quitry, P. Chen, D. E. Badawy, W. Han, E. Kharitonov <em id="bib.bib24.1.1" class="ltx_emph ltx_font_italic">et al.</em>,
``AudioPaLM: A large language model that can speak and listen,''
<em id="bib.bib24.2.2" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2306.12925</em>, 2023.

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Y. Fathullah, C. Wu, E. Lakomkin, J. Jia, Y. Shangguan, K. Li, J. Guo,
W. Xiong, J. Mahadeokar, O. Kalinli <em id="bib.bib25.1.1" class="ltx_emph ltx_font_italic">et al.</em>, ``Prompting large language
models with speech recognition abilities,'' <em id="bib.bib25.2.2" class="ltx_emph ltx_font_italic">arXiv preprint
arXiv:2307.11795</em>, 2023.

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
J. Wu, Y. Gaur, Z. Chen, L. Zhou, Y. Zhu, T. Wang, J. Li, S. Liu, B. Ren,
L. Liu <em id="bib.bib26.1.1" class="ltx_emph ltx_font_italic">et al.</em>, ``On decoder-only architecture for speech-to-text and
large language model integration,'' <em id="bib.bib26.2.2" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2307.03917</em>,
2023.

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
S. Arora, H. Futami, Y. Kashiwagi, E. Tsunoo, B. Yan, and S. Watanabe,
``Integrating pretrained ASR and LM to perform sequence generation for
spoken language understanding,'' in <em id="bib.bib27.1.1" class="ltx_emph ltx_font_italic">Proc. of Interspeech</em>, 2023, pp.
720–724.

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
S. Maiti, Y. Peng, S. Choi, J.-w. Jung, X. Chang, and S. Watanabe, ``Voxtlm:
unified decoder-only models for consolidating speech recognition/synthesis
and speech/text continuation tasks,'' <em id="bib.bib28.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2309.07937</em>,
2023.

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
E. Tsunoo, H. Futami, Y. Kashiwagi, S. Arora, and S. Watanabe, ``Decoder-only
architecture for speech recognition with ctc prompts and text data
augmentation,'' <em id="bib.bib29.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2309.08876</em>, 2023.

</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
R. Sharma, S. Arora, K. Zheng, S. Watanabe, R. Singh, and B. Raj, ``BASS:
Block-wise Adaptation for Speech Summarization,'' in <em id="bib.bib30.1.1" class="ltx_emph ltx_font_italic">Proc. of
Interspeech</em>, 2023, pp. 1454–1458.

</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
Y. Hono, K. Mitsuda, T. Zhao, K. Mitsui, T. Wakatsuki, and K. Sawada, ``An
integration of pre-trained speech and language models for end-to-end speech
recognition,'' <em id="bib.bib31.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2312.03668</em>, 2023.

</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
S. Watanabe, T. Hori, S. Kim, J. R. Hershey, and T. Hayashi, ``Hybrid
CTC/attention architecture for end-to-end speech recognition,''
<em id="bib.bib32.1.1" class="ltx_emph ltx_font_italic">Journal of Selected Topics in Signal Processing</em>, vol. 11, no. 8, pp.
1240–1253, 2017.

</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
L. Kürzinger, D. Winkelbauer, L. Li, T. Watzel, and G. Rigoll,
``CTC-segmentation of large corpora for german end-to-end speech
recognition,'' in <em id="bib.bib33.1.1" class="ltx_emph ltx_font_italic">International Conference on Speech and Computer</em>,
2020, pp. 267–278.

</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
V. Panayotov, G. Chen, D. Povey, and S. Khudanpur, ``LibriSpeech: an ASR
corpus based on public domain audio books,'' in <em id="bib.bib34.1.1" class="ltx_emph ltx_font_italic">Proc. of ICASSP</em>, 2015,
pp. 5206–5210.

</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
J. Yu, C.-C. Chiu, B. Li, S.-y. Chang, T. N. Sainath, Y. He, A. Narayanan,
W. Han, A. Gulati, Y. Wu <em id="bib.bib35.1.1" class="ltx_emph ltx_font_italic">et al.</em>, ``FastEmit: Low-latency streaming
ASR with sequence-level emission regularization,'' in <em id="bib.bib35.2.2" class="ltx_emph ltx_font_italic">Proc. of
ICASSP</em>, 2021, pp. 6004–6008.

</span>
</li>
</ul>
</section><div class="ltx_rdf" about="" property="dcterms:title" content="{Under review}"></div>

</article>
</div>
<div class="ar5iv-footer"><a href="/html/2406.16106" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2406.16107" class="ar5iv-text-button ar5iv-severity-error">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2406.16107">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2406.16107" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2406.16108" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Fri Jul  5 18:38:16 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
